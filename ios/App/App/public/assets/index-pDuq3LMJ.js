var b_=Object.defineProperty;var __=(e,t,n)=>t in e?b_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Yt=(e,t,n)=>__(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function N_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Fv={exports:{}},rf={},Dv={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),k_=Symbol.for("react.portal"),S_=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),A_=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),L_=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),P_=Symbol.for("react.suspense"),T_=Symbol.for("react.memo"),I_=Symbol.for("react.lazy"),Mg=Symbol.iterator;function R_(e){return e===null||typeof e!="object"?null:(e=Mg&&e[Mg]||e["@@iterator"],typeof e=="function"?e:null)}var Mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uv=Object.assign,Bv={};function $l(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||Mv}$l.prototype.isReactComponent={};$l.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$l.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zv(){}zv.prototype=$l.prototype;function B1(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||Mv}var z1=B1.prototype=new zv;z1.constructor=B1;Uv(z1,$l.prototype);z1.isPureReactComponent=!0;var Ug=Array.isArray,qv=Object.prototype.hasOwnProperty,q1={current:null},$v={key:!0,ref:!0,__self:!0,__source:!0};function Hv(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)qv.call(t,r)&&!$v.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Tu,type:e,key:s,ref:a,props:i,_owner:q1.current}}function O_(e,t){return{$$typeof:Tu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tu}function F_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bg=/\/+/g;function lp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F_(""+e.key):t.toString(36)}function nh(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Tu:case k_:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+lp(a,0):r,Ug(i)?(n="",e!=null&&(n=e.replace(Bg,"$&/")+"/"),nh(i,t,n,"",function(c){return c})):i!=null&&($1(i)&&(i=O_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Bg,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Ug(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+lp(s,o);a+=nh(s,t,n,l,i)}else if(l=R_(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+lp(s,o++),a+=nh(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Sd(e,t,n){if(e==null)return e;var r=[],i=0;return nh(e,r,"","",function(s){return t.call(n,s,i++)}),r}function D_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ir={current:null},rh={transition:null},M_={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:rh,ReactCurrentOwner:q1};function Wv(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Sd,forEach:function(e,t,n){Sd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sd(e,function(){t++}),t},toArray:function(e){return Sd(e,function(t){return t})||[]},only:function(e){if(!$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tt.Component=$l;Tt.Fragment=S_;Tt.Profiler=A_;Tt.PureComponent=B1;Tt.StrictMode=j_;Tt.Suspense=P_;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M_;Tt.act=Wv;Tt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Uv({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=q1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)qv.call(t,l)&&!$v.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Tu,type:e.type,key:i,ref:s,props:r,_owner:a}};Tt.createContext=function(e){return e={$$typeof:L_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:E_,_context:e},e.Consumer=e};Tt.createElement=Hv;Tt.createFactory=function(e){var t=Hv.bind(null,e);return t.type=e,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(e){return{$$typeof:C_,render:e}};Tt.isValidElement=$1;Tt.lazy=function(e){return{$$typeof:I_,_payload:{_status:-1,_result:e},_init:D_}};Tt.memo=function(e,t){return{$$typeof:T_,type:e,compare:t===void 0?null:t}};Tt.startTransition=function(e){var t=rh.transition;rh.transition={};try{e()}finally{rh.transition=t}};Tt.unstable_act=Wv;Tt.useCallback=function(e,t){return Ir.current.useCallback(e,t)};Tt.useContext=function(e){return Ir.current.useContext(e)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(e){return Ir.current.useDeferredValue(e)};Tt.useEffect=function(e,t){return Ir.current.useEffect(e,t)};Tt.useId=function(){return Ir.current.useId()};Tt.useImperativeHandle=function(e,t,n){return Ir.current.useImperativeHandle(e,t,n)};Tt.useInsertionEffect=function(e,t){return Ir.current.useInsertionEffect(e,t)};Tt.useLayoutEffect=function(e,t){return Ir.current.useLayoutEffect(e,t)};Tt.useMemo=function(e,t){return Ir.current.useMemo(e,t)};Tt.useReducer=function(e,t,n){return Ir.current.useReducer(e,t,n)};Tt.useRef=function(e){return Ir.current.useRef(e)};Tt.useState=function(e){return Ir.current.useState(e)};Tt.useSyncExternalStore=function(e,t,n){return Ir.current.useSyncExternalStore(e,t,n)};Tt.useTransition=function(){return Ir.current.useTransition()};Tt.version="18.3.1";Dv.exports=Tt;var me=Dv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_=me,B_=Symbol.for("react.element"),z_=Symbol.for("react.fragment"),q_=Object.prototype.hasOwnProperty,$_=U_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H_={key:!0,ref:!0,__self:!0,__source:!0};function Vv(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)q_.call(t,r)&&!H_.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:B_,type:e,key:s,ref:a,props:i,_owner:$_.current}}rf.Fragment=z_;rf.jsx=Vv;rf.jsxs=Vv;Fv.exports=rf;var d=Fv.exports,Gv={exports:{}},ci={},Kv={exports:{}},Jv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Z,se){var ve=Z.length;Z.push(se);e:for(;0<ve;){var fe=ve-1>>>1,P=Z[fe];if(0<i(P,se))Z[fe]=se,Z[ve]=P,ve=fe;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var se=Z[0],ve=Z.pop();if(ve!==se){Z[0]=ve;e:for(var fe=0,P=Z.length,q=P>>>1;fe<q;){var G=2*(fe+1)-1,Y=Z[G],Q=G+1,ae=Z[Q];if(0>i(Y,ve))Q<P&&0>i(ae,Y)?(Z[fe]=ae,Z[Q]=ve,fe=Q):(Z[fe]=Y,Z[G]=ve,fe=G);else if(Q<P&&0>i(ae,ve))Z[fe]=ae,Z[Q]=ve,fe=Q;else break e}}return se}function i(Z,se){var ve=Z.sortIndex-se.sortIndex;return ve!==0?ve:Z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,g=null,y=3,p=!1,k=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Z){for(var se=n(c);se!==null;){if(se.callback===null)r(c);else if(se.startTime<=Z)r(c),se.sortIndex=se.expirationTime,t(l,se);else break;se=n(c)}}function C(Z){if(_=!1,N(Z),!k)if(n(l)!==null)k=!0,le(K);else{var se=n(c);se!==null&&de(C,se.startTime-Z)}}function K(Z,se){k=!1,_&&(_=!1,x(I),I=-1),p=!0;var ve=y;try{for(N(se),g=n(l);g!==null&&(!(g.expirationTime>se)||Z&&!j());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,y=g.priorityLevel;var P=fe(g.expirationTime<=se);se=e.unstable_now(),typeof P=="function"?g.callback=P:g===n(l)&&r(l),N(se)}else r(l);g=n(l)}if(g!==null)var q=!0;else{var G=n(c);G!==null&&de(C,G.startTime-se),q=!1}return q}finally{g=null,y=ve,p=!1}}var T=!1,M=null,I=-1,S=5,z=-1;function j(){return!(e.unstable_now()-z<S)}function R(){if(M!==null){var Z=e.unstable_now();z=Z;var se=!0;try{se=M(!0,Z)}finally{se?$():(T=!1,M=null)}}else T=!1}var $;if(typeof b=="function")$=function(){b(R)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,X=J.port2;J.port1.onmessage=R,$=function(){X.postMessage(null)}}else $=function(){A(R,0)};function le(Z){M=Z,T||(T=!0,$())}function de(Z,se){I=A(function(){Z(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){k||p||(k=!0,le(K))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var se=3;break;default:se=y}var ve=y;y=se;try{return Z()}finally{y=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ve=y;y=Z;try{return se()}finally{y=ve}},e.unstable_scheduleCallback=function(Z,se,ve){var fe=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?fe+ve:fe):ve=fe,Z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ve+P,Z={id:f++,callback:se,priorityLevel:Z,startTime:ve,expirationTime:P,sortIndex:-1},ve>fe?(Z.sortIndex=ve,t(c,Z),n(l)===null&&Z===n(c)&&(_?(x(I),I=-1):_=!0,de(C,ve-fe))):(Z.sortIndex=P,t(l,Z),k||p||(k=!0,le(K))),Z},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(Z){var se=y;return function(){var ve=y;y=se;try{return Z.apply(this,arguments)}finally{y=ve}}}})(Jv);Kv.exports=Jv;var W_=Kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_=me,li=W_;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yv=new Set,su={};function Co(e,t){Tl(e,t),Tl(e+"Capture",t)}function Tl(e,t){for(su[e]=t,e=0;e<t.length;e++)Yv.add(t[e])}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v0=Object.prototype.hasOwnProperty,G_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zg={},qg={};function K_(e){return v0.call(qg,e)?!0:v0.call(zg,e)?!1:G_.test(e)?qg[e]=!0:(zg[e]=!0,!1)}function J_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y_(e,t,n,r){if(t===null||typeof t>"u"||J_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rr(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new Rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dr[t]=new Rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new Rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new Rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new Rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new Rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new Rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new Rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new Rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var H1=/[\-:]([a-z])/g;function W1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H1,W1);dr[t]=new Rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H1,W1);dr[t]=new Rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H1,W1);dr[t]=new Rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function V1(e,t,n,r){var i=dr.hasOwnProperty(t)?dr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y_(t,n,i,r)&&(n=null),r||i===null?K_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Hs=V_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jd=Symbol.for("react.element"),ll=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),G1=Symbol.for("react.strict_mode"),y0=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),K1=Symbol.for("react.forward_ref"),x0=Symbol.for("react.suspense"),w0=Symbol.for("react.suspense_list"),J1=Symbol.for("react.memo"),fa=Symbol.for("react.lazy"),Xv=Symbol.for("react.offscreen"),$g=Symbol.iterator;function kc(e){return e===null||typeof e!="object"?null:(e=$g&&e[$g]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,cp;function Fc(e){if(cp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);cp=t&&t[1]||""}return`
`+cp+e}var up=!1;function dp(e,t){if(!e||up)return"";up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{up=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fc(e):""}function Z_(e){switch(e.tag){case 5:return Fc(e.type);case 16:return Fc("Lazy");case 13:return Fc("Suspense");case 19:return Fc("SuspenseList");case 0:case 2:case 15:return e=dp(e.type,!1),e;case 11:return e=dp(e.type.render,!1),e;case 1:return e=dp(e.type,!0),e;default:return""}}function b0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cl:return"Fragment";case ll:return"Portal";case y0:return"Profiler";case G1:return"StrictMode";case x0:return"Suspense";case w0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qv:return(e.displayName||"Context")+".Consumer";case Zv:return(e._context.displayName||"Context")+".Provider";case K1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J1:return t=e.displayName||null,t!==null?t:b0(e.type)||"Memo";case fa:t=e._payload,e=e._init;try{return b0(e(t))}catch{}}return null}function Q_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b0(t);case 8:return t===G1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ey(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X_(e){var t=ey(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ad(e){e._valueTracker||(e._valueTracker=X_(e))}function ty(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ey(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _h(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _0(e,t){var n=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Oa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ny(e,t){t=t.checked,t!=null&&V1(e,"checked",t,!1)}function N0(e,t){ny(e,t);var n=Oa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?k0(e,t.type,n):t.hasOwnProperty("defaultValue")&&k0(e,t.type,Oa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function k0(e,t,n){(t!=="number"||_h(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dc=Array.isArray;function bl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Oa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function S0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Fe(92));if(Dc(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Oa(n)}}function ry(e,t){var n=Oa(t.value),r=Oa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ed,sy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ed=Ed||document.createElement("div"),Ed.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ed.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function au(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e4=["Webkit","ms","Moz","O"];Object.keys($c).forEach(function(e){e4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$c[t]=$c[e]})});function ay(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$c.hasOwnProperty(e)&&$c[e]?(""+t).trim():t+"px"}function oy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ay(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var t4=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A0(e,t){if(t){if(t4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function E0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L0=null;function Y1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var C0=null,_l=null,Nl=null;function Kg(e){if(e=Ou(e)){if(typeof C0!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=cf(t),C0(e.stateNode,e.type,t))}}function ly(e){_l?Nl?Nl.push(e):Nl=[e]:_l=e}function cy(){if(_l){var e=_l,t=Nl;if(Nl=_l=null,Kg(e),t)for(e=0;e<t.length;e++)Kg(t[e])}}function uy(e,t){return e(t)}function dy(){}var hp=!1;function hy(e,t,n){if(hp)return e(t,n);hp=!0;try{return uy(e,t,n)}finally{hp=!1,(_l!==null||Nl!==null)&&(dy(),cy())}}function ou(e,t){var n=e.stateNode;if(n===null)return null;var r=cf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Fe(231,t,typeof n));return n}var P0=!1;if(Bs)try{var Sc={};Object.defineProperty(Sc,"passive",{get:function(){P0=!0}}),window.addEventListener("test",Sc,Sc),window.removeEventListener("test",Sc,Sc)}catch{P0=!1}function n4(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Hc=!1,Nh=null,kh=!1,T0=null,r4={onError:function(e){Hc=!0,Nh=e}};function i4(e,t,n,r,i,s,a,o,l){Hc=!1,Nh=null,n4.apply(r4,arguments)}function s4(e,t,n,r,i,s,a,o,l){if(i4.apply(this,arguments),Hc){if(Hc){var c=Nh;Hc=!1,Nh=null}else throw Error(Fe(198));kh||(kh=!0,T0=c)}}function Po(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jg(e){if(Po(e)!==e)throw Error(Fe(188))}function a4(e){var t=e.alternate;if(!t){if(t=Po(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jg(i),e;if(s===r)return Jg(i),t;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?e:t}function py(e){return e=a4(e),e!==null?my(e):null}function my(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=my(e);if(t!==null)return t;e=e.sibling}return null}var gy=li.unstable_scheduleCallback,Yg=li.unstable_cancelCallback,o4=li.unstable_shouldYield,l4=li.unstable_requestPaint,Rn=li.unstable_now,c4=li.unstable_getCurrentPriorityLevel,Z1=li.unstable_ImmediatePriority,vy=li.unstable_UserBlockingPriority,Sh=li.unstable_NormalPriority,u4=li.unstable_LowPriority,yy=li.unstable_IdlePriority,sf=null,ls=null;function d4(e){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(sf,e,void 0,(e.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:p4,h4=Math.log,f4=Math.LN2;function p4(e){return e>>>=0,e===0?32:31-(h4(e)/f4|0)|0}var Ld=64,Cd=4194304;function Mc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Mc(o):(s&=a,s!==0&&(r=Mc(s)))}else a=n&~i,a!==0?r=Mc(a):s!==0&&(r=Mc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qi(t),i=1<<n,r|=e[n],t&=~i;return r}function m4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-qi(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=m4(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function I0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xy(){var e=Ld;return Ld<<=1,!(Ld&4194240)&&(Ld=64),e}function fp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Iu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qi(t),e[t]=n}function v4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-qi(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Q1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Qt=0;function wy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var by,X1,_y,Ny,ky,R0=!1,Pd=[],Na=null,ka=null,Sa=null,lu=new Map,cu=new Map,ma=[],y4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(e,t){switch(e){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":lu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(t.pointerId)}}function jc(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ou(t),t!==null&&X1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function x4(e,t,n,r,i){switch(t){case"focusin":return Na=jc(Na,e,t,n,r,i),!0;case"dragenter":return ka=jc(ka,e,t,n,r,i),!0;case"mouseover":return Sa=jc(Sa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lu.set(s,jc(lu.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cu.set(s,jc(cu.get(s)||null,e,t,n,r,i)),!0}return!1}function Sy(e){var t=ho(e.target);if(t!==null){var n=Po(t);if(n!==null){if(t=n.tag,t===13){if(t=fy(n),t!==null){e.blockedOn=t,ky(e.priority,function(){_y(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ih(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=O0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);L0=r,n.target.dispatchEvent(r),L0=null}else return t=Ou(n),t!==null&&X1(t),e.blockedOn=n,!1;t.shift()}return!0}function Qg(e,t,n){ih(e)&&n.delete(t)}function w4(){R0=!1,Na!==null&&ih(Na)&&(Na=null),ka!==null&&ih(ka)&&(ka=null),Sa!==null&&ih(Sa)&&(Sa=null),lu.forEach(Qg),cu.forEach(Qg)}function Ac(e,t){e.blockedOn===t&&(e.blockedOn=null,R0||(R0=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,w4)))}function uu(e){function t(i){return Ac(i,e)}if(0<Pd.length){Ac(Pd[0],e);for(var n=1;n<Pd.length;n++){var r=Pd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Na!==null&&Ac(Na,e),ka!==null&&Ac(ka,e),Sa!==null&&Ac(Sa,e),lu.forEach(t),cu.forEach(t),n=0;n<ma.length;n++)r=ma[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ma.length&&(n=ma[0],n.blockedOn===null);)Sy(n),n.blockedOn===null&&ma.shift()}var kl=Hs.ReactCurrentBatchConfig,Ah=!0;function b4(e,t,n,r){var i=Qt,s=kl.transition;kl.transition=null;try{Qt=1,em(e,t,n,r)}finally{Qt=i,kl.transition=s}}function _4(e,t,n,r){var i=Qt,s=kl.transition;kl.transition=null;try{Qt=4,em(e,t,n,r)}finally{Qt=i,kl.transition=s}}function em(e,t,n,r){if(Ah){var i=O0(e,t,n,r);if(i===null)Np(e,t,r,Eh,n),Zg(e,r);else if(x4(i,e,t,n,r))r.stopPropagation();else if(Zg(e,r),t&4&&-1<y4.indexOf(e)){for(;i!==null;){var s=Ou(i);if(s!==null&&by(s),s=O0(e,t,n,r),s===null&&Np(e,t,r,Eh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Np(e,t,r,null,n)}}var Eh=null;function O0(e,t,n,r){if(Eh=null,e=Y1(r),e=ho(e),e!==null)if(t=Po(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Eh=e,null}function jy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c4()){case Z1:return 1;case vy:return 4;case Sh:case u4:return 16;case yy:return 536870912;default:return 16}default:return 16}}var xa=null,tm=null,sh=null;function Ay(){if(sh)return sh;var e,t=tm,n=t.length,r,i="value"in xa?xa.value:xa.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return sh=i.slice(e,1<r?1-r:void 0)}function ah(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Td(){return!0}function Xg(){return!1}function ui(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Td:Xg,this.isPropagationStopped=Xg,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),t}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=ui(Hl),Ru=kn({},Hl,{view:0,detail:0}),N4=ui(Ru),pp,mp,Ec,af=kn({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ec&&(Ec&&e.type==="mousemove"?(pp=e.screenX-Ec.screenX,mp=e.screenY-Ec.screenY):mp=pp=0,Ec=e),pp)},movementY:function(e){return"movementY"in e?e.movementY:mp}}),e2=ui(af),k4=kn({},af,{dataTransfer:0}),S4=ui(k4),j4=kn({},Ru,{relatedTarget:0}),gp=ui(j4),A4=kn({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),E4=ui(A4),L4=kn({},Hl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C4=ui(L4),P4=kn({},Hl,{data:0}),t2=ui(P4),T4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R4[e])?!!t[e]:!1}function rm(){return O4}var F4=kn({},Ru,{key:function(e){if(e.key){var t=T4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ah(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rm,charCode:function(e){return e.type==="keypress"?ah(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ah(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D4=ui(F4),M4=kn({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n2=ui(M4),U4=kn({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rm}),B4=ui(U4),z4=kn({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),q4=ui(z4),$4=kn({},af,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H4=ui($4),W4=[9,13,27,32],im=Bs&&"CompositionEvent"in window,Wc=null;Bs&&"documentMode"in document&&(Wc=document.documentMode);var V4=Bs&&"TextEvent"in window&&!Wc,Ey=Bs&&(!im||Wc&&8<Wc&&11>=Wc),r2=" ",i2=!1;function Ly(e,t){switch(e){case"keyup":return W4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ul=!1;function G4(e,t){switch(e){case"compositionend":return Cy(t);case"keypress":return t.which!==32?null:(i2=!0,r2);case"textInput":return e=t.data,e===r2&&i2?null:e;default:return null}}function K4(e,t){if(ul)return e==="compositionend"||!im&&Ly(e,t)?(e=Ay(),sh=tm=xa=null,ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ey&&t.locale!=="ko"?null:t.data;default:return null}}var J4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J4[e.type]:t==="textarea"}function Py(e,t,n,r){ly(r),t=Lh(t,"onChange"),0<t.length&&(n=new nm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vc=null,du=null;function Y4(e){qy(e,0)}function of(e){var t=fl(e);if(ty(t))return e}function Z4(e,t){if(e==="change")return t}var Ty=!1;if(Bs){var vp;if(Bs){var yp="oninput"in document;if(!yp){var a2=document.createElement("div");a2.setAttribute("oninput","return;"),yp=typeof a2.oninput=="function"}vp=yp}else vp=!1;Ty=vp&&(!document.documentMode||9<document.documentMode)}function o2(){Vc&&(Vc.detachEvent("onpropertychange",Iy),du=Vc=null)}function Iy(e){if(e.propertyName==="value"&&of(du)){var t=[];Py(t,du,e,Y1(e)),hy(Y4,t)}}function Q4(e,t,n){e==="focusin"?(o2(),Vc=t,du=n,Vc.attachEvent("onpropertychange",Iy)):e==="focusout"&&o2()}function X4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return of(du)}function e3(e,t){if(e==="click")return of(t)}function t3(e,t){if(e==="input"||e==="change")return of(t)}function n3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hi=typeof Object.is=="function"?Object.is:n3;function hu(e,t){if(Hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v0.call(t,i)||!Hi(e[i],t[i]))return!1}return!0}function l2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c2(e,t){var n=l2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=l2(n)}}function Ry(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ry(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Oy(){for(var e=window,t=_h();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_h(e.document)}return t}function sm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r3(e){var t=Oy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ry(n.ownerDocument.documentElement,n)){if(r!==null&&sm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=c2(n,s);var a=c2(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i3=Bs&&"documentMode"in document&&11>=document.documentMode,dl=null,F0=null,Gc=null,D0=!1;function u2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;D0||dl==null||dl!==_h(r)||(r=dl,"selectionStart"in r&&sm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&hu(Gc,r)||(Gc=r,r=Lh(F0,"onSelect"),0<r.length&&(t=new nm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dl)))}function Id(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hl={animationend:Id("Animation","AnimationEnd"),animationiteration:Id("Animation","AnimationIteration"),animationstart:Id("Animation","AnimationStart"),transitionend:Id("Transition","TransitionEnd")},xp={},Fy={};Bs&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function lf(e){if(xp[e])return xp[e];if(!hl[e])return e;var t=hl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fy)return xp[e]=t[n];return e}var Dy=lf("animationend"),My=lf("animationiteration"),Uy=lf("animationstart"),By=lf("transitionend"),zy=new Map,d2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){zy.set(e,t),Co(t,[e])}for(var wp=0;wp<d2.length;wp++){var bp=d2[wp],s3=bp.toLowerCase(),a3=bp[0].toUpperCase()+bp.slice(1);Ua(s3,"on"+a3)}Ua(Dy,"onAnimationEnd");Ua(My,"onAnimationIteration");Ua(Uy,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(By,"onTransitionEnd");Tl("onMouseEnter",["mouseout","mouseover"]);Tl("onMouseLeave",["mouseout","mouseover"]);Tl("onPointerEnter",["pointerout","pointerover"]);Tl("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uc));function h2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,s4(r,t,void 0,e),e.currentTarget=null}function qy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;h2(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;h2(i,o,c),s=l}}}if(kh)throw e=T0,kh=!1,T0=null,e}function fn(e,t){var n=t[q0];n===void 0&&(n=t[q0]=new Set);var r=e+"__bubble";n.has(r)||($y(t,e,2,!1),n.add(r))}function _p(e,t,n){var r=0;t&&(r|=4),$y(n,e,r,t)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function fu(e){if(!e[Rd]){e[Rd]=!0,Yv.forEach(function(n){n!=="selectionchange"&&(o3.has(n)||_p(n,!1,e),_p(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rd]||(t[Rd]=!0,_p("selectionchange",!1,t))}}function $y(e,t,n,r){switch(jy(t)){case 1:var i=b4;break;case 4:i=_4;break;default:i=em}n=i.bind(null,t,n,e),i=void 0,!P0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Np(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ho(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}hy(function(){var c=s,f=Y1(n),g=[];e:{var y=zy.get(e);if(y!==void 0){var p=nm,k=e;switch(e){case"keypress":if(ah(n)===0)break e;case"keydown":case"keyup":p=D4;break;case"focusin":k="focus",p=gp;break;case"focusout":k="blur",p=gp;break;case"beforeblur":case"afterblur":p=gp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=e2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=S4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=B4;break;case Dy:case My:case Uy:p=E4;break;case By:p=q4;break;case"scroll":p=N4;break;case"wheel":p=H4;break;case"copy":case"cut":case"paste":p=C4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=n2}var _=(t&4)!==0,A=!_&&e==="scroll",x=_?y!==null?y+"Capture":null:y;_=[];for(var b=c,N;b!==null;){N=b;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,x!==null&&(C=ou(b,x),C!=null&&_.push(pu(b,C,N)))),A)break;b=b.return}0<_.length&&(y=new p(y,k,null,n,f),g.push({event:y,listeners:_}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",y&&n!==L0&&(k=n.relatedTarget||n.fromElement)&&(ho(k)||k[zs]))break e;if((p||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,p?(k=n.relatedTarget||n.toElement,p=c,k=k?ho(k):null,k!==null&&(A=Po(k),k!==A||k.tag!==5&&k.tag!==6)&&(k=null)):(p=null,k=c),p!==k)){if(_=e2,C="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(_=n2,C="onPointerLeave",x="onPointerEnter",b="pointer"),A=p==null?y:fl(p),N=k==null?y:fl(k),y=new _(C,b+"leave",p,n,f),y.target=A,y.relatedTarget=N,C=null,ho(f)===c&&(_=new _(x,b+"enter",k,n,f),_.target=N,_.relatedTarget=A,C=_),A=C,p&&k)t:{for(_=p,x=k,b=0,N=_;N;N=Ko(N))b++;for(N=0,C=x;C;C=Ko(C))N++;for(;0<b-N;)_=Ko(_),b--;for(;0<N-b;)x=Ko(x),N--;for(;b--;){if(_===x||x!==null&&_===x.alternate)break t;_=Ko(_),x=Ko(x)}_=null}else _=null;p!==null&&f2(g,y,p,_,!1),k!==null&&A!==null&&f2(g,A,k,_,!0)}}e:{if(y=c?fl(c):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var K=Z4;else if(s2(y))if(Ty)K=t3;else{K=X4;var T=Q4}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(K=e3);if(K&&(K=K(e,c))){Py(g,K,n,f);break e}T&&T(e,y,c),e==="focusout"&&(T=y._wrapperState)&&T.controlled&&y.type==="number"&&k0(y,"number",y.value)}switch(T=c?fl(c):window,e){case"focusin":(s2(T)||T.contentEditable==="true")&&(dl=T,F0=c,Gc=null);break;case"focusout":Gc=F0=dl=null;break;case"mousedown":D0=!0;break;case"contextmenu":case"mouseup":case"dragend":D0=!1,u2(g,n,f);break;case"selectionchange":if(i3)break;case"keydown":case"keyup":u2(g,n,f)}var M;if(im)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ul?Ly(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Ey&&n.locale!=="ko"&&(ul||I!=="onCompositionStart"?I==="onCompositionEnd"&&ul&&(M=Ay()):(xa=f,tm="value"in xa?xa.value:xa.textContent,ul=!0)),T=Lh(c,I),0<T.length&&(I=new t2(I,e,null,n,f),g.push({event:I,listeners:T}),M?I.data=M:(M=Cy(n),M!==null&&(I.data=M)))),(M=V4?G4(e,n):K4(e,n))&&(c=Lh(c,"onBeforeInput"),0<c.length&&(f=new t2("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:c}),f.data=M))}qy(g,t)})}function pu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lh(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ou(e,n),s!=null&&r.unshift(pu(e,s,i)),s=ou(e,t),s!=null&&r.push(pu(e,s,i))),e=e.return}return r}function Ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f2(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=ou(n,s),l!=null&&a.unshift(pu(n,l,o))):i||(l=ou(n,s),l!=null&&a.push(pu(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var l3=/\r\n?/g,c3=/\u0000|\uFFFD/g;function p2(e){return(typeof e=="string"?e:""+e).replace(l3,`
`).replace(c3,"")}function Od(e,t,n){if(t=p2(t),p2(e)!==t&&n)throw Error(Fe(425))}function Ch(){}var M0=null,U0=null;function B0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z0=typeof setTimeout=="function"?setTimeout:void 0,u3=typeof clearTimeout=="function"?clearTimeout:void 0,m2=typeof Promise=="function"?Promise:void 0,d3=typeof queueMicrotask=="function"?queueMicrotask:typeof m2<"u"?function(e){return m2.resolve(null).then(e).catch(h3)}:z0;function h3(e){setTimeout(function(){throw e})}function kp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),uu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uu(t)}function ja(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function g2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wl=Math.random().toString(36).slice(2),ss="__reactFiber$"+Wl,mu="__reactProps$"+Wl,zs="__reactContainer$"+Wl,q0="__reactEvents$"+Wl,f3="__reactListeners$"+Wl,p3="__reactHandles$"+Wl;function ho(e){var t=e[ss];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zs]||n[ss]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=g2(e);e!==null;){if(n=e[ss])return n;e=g2(e)}return t}e=n,n=e.parentNode}return null}function Ou(e){return e=e[ss]||e[zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function cf(e){return e[mu]||null}var $0=[],pl=-1;function Ba(e){return{current:e}}function gn(e){0>pl||(e.current=$0[pl],$0[pl]=null,pl--)}function un(e,t){pl++,$0[pl]=e.current,e.current=t}var Fa={},_r=Ba(Fa),zr=Ba(!1),_o=Fa;function Il(e,t){var n=e.type.contextTypes;if(!n)return Fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function qr(e){return e=e.childContextTypes,e!=null}function Ph(){gn(zr),gn(_r)}function v2(e,t,n){if(_r.current!==Fa)throw Error(Fe(168));un(_r,t),un(zr,n)}function Hy(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Fe(108,Q_(e)||"Unknown",i));return kn({},n,r)}function Th(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fa,_o=_r.current,un(_r,e),un(zr,zr.current),!0}function y2(e,t,n){var r=e.stateNode;if(!r)throw Error(Fe(169));n?(e=Hy(e,t,_o),r.__reactInternalMemoizedMergedChildContext=e,gn(zr),gn(_r),un(_r,e)):gn(zr),un(zr,n)}var Rs=null,uf=!1,Sp=!1;function Wy(e){Rs===null?Rs=[e]:Rs.push(e)}function m3(e){uf=!0,Wy(e)}function za(){if(!Sp&&Rs!==null){Sp=!0;var e=0,t=Qt;try{var n=Rs;for(Qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rs=null,uf=!1}catch(i){throw Rs!==null&&(Rs=Rs.slice(e+1)),gy(Z1,za),i}finally{Qt=t,Sp=!1}}return null}var ml=[],gl=0,Ih=null,Rh=0,yi=[],xi=0,No=null,Ds=1,Ms="";function so(e,t){ml[gl++]=Rh,ml[gl++]=Ih,Ih=e,Rh=t}function Vy(e,t,n){yi[xi++]=Ds,yi[xi++]=Ms,yi[xi++]=No,No=e;var r=Ds;e=Ms;var i=32-qi(r)-1;r&=~(1<<i),n+=1;var s=32-qi(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ds=1<<32-qi(t)+i|n<<i|r,Ms=s+e}else Ds=1<<s|n<<i|r,Ms=e}function am(e){e.return!==null&&(so(e,1),Vy(e,1,0))}function om(e){for(;e===Ih;)Ih=ml[--gl],ml[gl]=null,Rh=ml[--gl],ml[gl]=null;for(;e===No;)No=yi[--xi],yi[xi]=null,Ms=yi[--xi],yi[xi]=null,Ds=yi[--xi],yi[xi]=null}var oi=null,ii=null,yn=!1,zi=null;function Gy(e,t){var n=_i(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function x2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,oi=e,ii=ja(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,oi=e,ii=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=No!==null?{id:Ds,overflow:Ms}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_i(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,oi=e,ii=null,!0):!1;default:return!1}}function H0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function W0(e){if(yn){var t=ii;if(t){var n=t;if(!x2(e,t)){if(H0(e))throw Error(Fe(418));t=ja(n.nextSibling);var r=oi;t&&x2(e,t)?Gy(r,n):(e.flags=e.flags&-4097|2,yn=!1,oi=e)}}else{if(H0(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,yn=!1,oi=e}}}function w2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;oi=e}function Fd(e){if(e!==oi)return!1;if(!yn)return w2(e),yn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!B0(e.type,e.memoizedProps)),t&&(t=ii)){if(H0(e))throw Ky(),Error(Fe(418));for(;t;)Gy(e,t),t=ja(t.nextSibling)}if(w2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ii=ja(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ii=null}}else ii=oi?ja(e.stateNode.nextSibling):null;return!0}function Ky(){for(var e=ii;e;)e=ja(e.nextSibling)}function Rl(){ii=oi=null,yn=!1}function lm(e){zi===null?zi=[e]:zi.push(e)}var g3=Hs.ReactCurrentBatchConfig;function Lc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,e))}return e}function Dd(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b2(e){var t=e._init;return t(e._payload)}function Jy(e){function t(x,b){if(e){var N=x.deletions;N===null?(x.deletions=[b],x.flags|=16):N.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=Ca(x,b),x.index=0,x.sibling=null,x}function s(x,b,N){return x.index=N,e?(N=x.alternate,N!==null?(N=N.index,N<b?(x.flags|=2,b):N):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,b,N,C){return b===null||b.tag!==6?(b=Tp(N,x.mode,C),b.return=x,b):(b=i(b,N),b.return=x,b)}function l(x,b,N,C){var K=N.type;return K===cl?f(x,b,N.props.children,C,N.key):b!==null&&(b.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===fa&&b2(K)===b.type)?(C=i(b,N.props),C.ref=Lc(x,b,N),C.return=x,C):(C=fh(N.type,N.key,N.props,null,x.mode,C),C.ref=Lc(x,b,N),C.return=x,C)}function c(x,b,N,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=Ip(N,x.mode,C),b.return=x,b):(b=i(b,N.children||[]),b.return=x,b)}function f(x,b,N,C,K){return b===null||b.tag!==7?(b=xo(N,x.mode,C,K),b.return=x,b):(b=i(b,N),b.return=x,b)}function g(x,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Tp(""+b,x.mode,N),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jd:return N=fh(b.type,b.key,b.props,null,x.mode,N),N.ref=Lc(x,null,b),N.return=x,N;case ll:return b=Ip(b,x.mode,N),b.return=x,b;case fa:var C=b._init;return g(x,C(b._payload),N)}if(Dc(b)||kc(b))return b=xo(b,x.mode,N,null),b.return=x,b;Dd(x,b)}return null}function y(x,b,N,C){var K=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return K!==null?null:o(x,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jd:return N.key===K?l(x,b,N,C):null;case ll:return N.key===K?c(x,b,N,C):null;case fa:return K=N._init,y(x,b,K(N._payload),C)}if(Dc(N)||kc(N))return K!==null?null:f(x,b,N,C,null);Dd(x,N)}return null}function p(x,b,N,C,K){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(N)||null,o(b,x,""+C,K);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case jd:return x=x.get(C.key===null?N:C.key)||null,l(b,x,C,K);case ll:return x=x.get(C.key===null?N:C.key)||null,c(b,x,C,K);case fa:var T=C._init;return p(x,b,N,T(C._payload),K)}if(Dc(C)||kc(C))return x=x.get(N)||null,f(b,x,C,K,null);Dd(b,C)}return null}function k(x,b,N,C){for(var K=null,T=null,M=b,I=b=0,S=null;M!==null&&I<N.length;I++){M.index>I?(S=M,M=null):S=M.sibling;var z=y(x,M,N[I],C);if(z===null){M===null&&(M=S);break}e&&M&&z.alternate===null&&t(x,M),b=s(z,b,I),T===null?K=z:T.sibling=z,T=z,M=S}if(I===N.length)return n(x,M),yn&&so(x,I),K;if(M===null){for(;I<N.length;I++)M=g(x,N[I],C),M!==null&&(b=s(M,b,I),T===null?K=M:T.sibling=M,T=M);return yn&&so(x,I),K}for(M=r(x,M);I<N.length;I++)S=p(M,x,I,N[I],C),S!==null&&(e&&S.alternate!==null&&M.delete(S.key===null?I:S.key),b=s(S,b,I),T===null?K=S:T.sibling=S,T=S);return e&&M.forEach(function(j){return t(x,j)}),yn&&so(x,I),K}function _(x,b,N,C){var K=kc(N);if(typeof K!="function")throw Error(Fe(150));if(N=K.call(N),N==null)throw Error(Fe(151));for(var T=K=null,M=b,I=b=0,S=null,z=N.next();M!==null&&!z.done;I++,z=N.next()){M.index>I?(S=M,M=null):S=M.sibling;var j=y(x,M,z.value,C);if(j===null){M===null&&(M=S);break}e&&M&&j.alternate===null&&t(x,M),b=s(j,b,I),T===null?K=j:T.sibling=j,T=j,M=S}if(z.done)return n(x,M),yn&&so(x,I),K;if(M===null){for(;!z.done;I++,z=N.next())z=g(x,z.value,C),z!==null&&(b=s(z,b,I),T===null?K=z:T.sibling=z,T=z);return yn&&so(x,I),K}for(M=r(x,M);!z.done;I++,z=N.next())z=p(M,x,I,z.value,C),z!==null&&(e&&z.alternate!==null&&M.delete(z.key===null?I:z.key),b=s(z,b,I),T===null?K=z:T.sibling=z,T=z);return e&&M.forEach(function(R){return t(x,R)}),yn&&so(x,I),K}function A(x,b,N,C){if(typeof N=="object"&&N!==null&&N.type===cl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case jd:e:{for(var K=N.key,T=b;T!==null;){if(T.key===K){if(K=N.type,K===cl){if(T.tag===7){n(x,T.sibling),b=i(T,N.props.children),b.return=x,x=b;break e}}else if(T.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===fa&&b2(K)===T.type){n(x,T.sibling),b=i(T,N.props),b.ref=Lc(x,T,N),b.return=x,x=b;break e}n(x,T);break}else t(x,T);T=T.sibling}N.type===cl?(b=xo(N.props.children,x.mode,C,N.key),b.return=x,x=b):(C=fh(N.type,N.key,N.props,null,x.mode,C),C.ref=Lc(x,b,N),C.return=x,x=C)}return a(x);case ll:e:{for(T=N.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){n(x,b.sibling),b=i(b,N.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=Ip(N,x.mode,C),b.return=x,x=b}return a(x);case fa:return T=N._init,A(x,b,T(N._payload),C)}if(Dc(N))return k(x,b,N,C);if(kc(N))return _(x,b,N,C);Dd(x,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(n(x,b.sibling),b=i(b,N),b.return=x,x=b):(n(x,b),b=Tp(N,x.mode,C),b.return=x,x=b),a(x)):n(x,b)}return A}var Ol=Jy(!0),Yy=Jy(!1),Oh=Ba(null),Fh=null,vl=null,cm=null;function um(){cm=vl=Fh=null}function dm(e){var t=Oh.current;gn(Oh),e._currentValue=t}function V0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sl(e,t){Fh=e,cm=vl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ur=!0),e.firstContext=null)}function Si(e){var t=e._currentValue;if(cm!==e)if(e={context:e,memoizedValue:t,next:null},vl===null){if(Fh===null)throw Error(Fe(308));vl=e,Fh.dependencies={lanes:0,firstContext:e}}else vl=vl.next=e;return t}var fo=null;function hm(e){fo===null?fo=[e]:fo.push(e)}function Zy(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,hm(t)):(n.next=i.next,i.next=n),t.interleaved=n,qs(e,r)}function qs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var pa=!1;function fm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Aa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qs(e,n)}return i=r.interleaved,i===null?(t.next=t,hm(r)):(t.next=i.next,i.next=t),r.interleaved=t,qs(e,n)}function oh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Q1(e,n)}}function _2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dh(e,t,n,r){var i=e.updateQueue;pa=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;a=0,f=c=l=null,o=s;do{var y=o.lane,p=o.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,_=o;switch(y=t,p=n,_.tag){case 1:if(k=_.payload,typeof k=="function"){g=k.call(p,g,y);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=_.payload,y=typeof k=="function"?k.call(p,g,y):k,y==null)break e;g=kn({},g,y);break e;case 2:pa=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[o]:y.push(o))}else p={eventTime:p,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=p,l=g):f=f.next=p,a|=y;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;y=o,o=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(l=g),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);So|=a,e.lanes=a,e.memoizedState=g}}function N2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var Fu={},cs=Ba(Fu),gu=Ba(Fu),vu=Ba(Fu);function po(e){if(e===Fu)throw Error(Fe(174));return e}function pm(e,t){switch(un(vu,t),un(gu,e),un(cs,Fu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:j0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=j0(t,e)}gn(cs),un(cs,t)}function Fl(){gn(cs),gn(gu),gn(vu)}function Xy(e){po(vu.current);var t=po(cs.current),n=j0(t,e.type);t!==n&&(un(gu,e),un(cs,n))}function mm(e){gu.current===e&&(gn(cs),gn(gu))}var _n=Ba(0);function Mh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jp=[];function gm(){for(var e=0;e<jp.length;e++)jp[e]._workInProgressVersionPrimary=null;jp.length=0}var lh=Hs.ReactCurrentDispatcher,Ap=Hs.ReactCurrentBatchConfig,ko=0,Nn=null,Zn=null,er=null,Uh=!1,Kc=!1,yu=0,v3=0;function mr(){throw Error(Fe(321))}function vm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hi(e[n],t[n]))return!1;return!0}function ym(e,t,n,r,i,s){if(ko=s,Nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lh.current=e===null||e.memoizedState===null?b3:_3,e=n(r,i),Kc){s=0;do{if(Kc=!1,yu=0,25<=s)throw Error(Fe(301));s+=1,er=Zn=null,t.updateQueue=null,lh.current=N3,e=n(r,i)}while(Kc)}if(lh.current=Bh,t=Zn!==null&&Zn.next!==null,ko=0,er=Zn=Nn=null,Uh=!1,t)throw Error(Fe(300));return e}function xm(){var e=yu!==0;return yu=0,e}function rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Nn.memoizedState=er=e:er=er.next=e,er}function ji(){if(Zn===null){var e=Nn.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=er===null?Nn.memoizedState:er.next;if(t!==null)er=t,Zn=e;else{if(e===null)throw Error(Fe(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},er===null?Nn.memoizedState=er=e:er=er.next=e}return er}function xu(e,t){return typeof t=="function"?t(e):t}function Ep(e){var t=ji(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=Zn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var f=c.lane;if((ko&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var g={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=g,a=r):l=l.next=g,Nn.lanes|=f,So|=f}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,Hi(r,t.memoizedState)||(Ur=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Nn.lanes|=s,So|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Lp(e){var t=ji(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Hi(s,t.memoizedState)||(Ur=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ex(){}function tx(e,t){var n=Nn,r=ji(),i=t(),s=!Hi(r.memoizedState,i);if(s&&(r.memoizedState=i,Ur=!0),r=r.queue,wm(ix.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,wu(9,rx.bind(null,n,r,i,t),void 0,null),nr===null)throw Error(Fe(349));ko&30||nx(n,t,i)}return i}function nx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rx(e,t,n,r){t.value=n,t.getSnapshot=r,sx(t)&&ax(e)}function ix(e,t,n){return n(function(){sx(t)&&ax(e)})}function sx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hi(e,n)}catch{return!0}}function ax(e){var t=qs(e,1);t!==null&&$i(t,e,1,-1)}function k2(e){var t=rs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:e},t.queue=e,e=e.dispatch=w3.bind(null,Nn,e),[t.memoizedState,e]}function wu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ox(){return ji().memoizedState}function ch(e,t,n,r){var i=rs();Nn.flags|=e,i.memoizedState=wu(1|t,n,void 0,r===void 0?null:r)}function df(e,t,n,r){var i=ji();r=r===void 0?null:r;var s=void 0;if(Zn!==null){var a=Zn.memoizedState;if(s=a.destroy,r!==null&&vm(r,a.deps)){i.memoizedState=wu(t,n,s,r);return}}Nn.flags|=e,i.memoizedState=wu(1|t,n,s,r)}function S2(e,t){return ch(8390656,8,e,t)}function wm(e,t){return df(2048,8,e,t)}function lx(e,t){return df(4,2,e,t)}function cx(e,t){return df(4,4,e,t)}function ux(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dx(e,t,n){return n=n!=null?n.concat([e]):null,df(4,4,ux.bind(null,t,e),n)}function bm(){}function hx(e,t){var n=ji();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fx(e,t){var n=ji();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function px(e,t,n){return ko&21?(Hi(n,t)||(n=xy(),Nn.lanes|=n,So|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ur=!0),e.memoizedState=n)}function y3(e,t){var n=Qt;Qt=n!==0&&4>n?n:4,e(!0);var r=Ap.transition;Ap.transition={};try{e(!1),t()}finally{Qt=n,Ap.transition=r}}function mx(){return ji().memoizedState}function x3(e,t,n){var r=La(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gx(e))vx(t,n);else if(n=Zy(e,t,n,r),n!==null){var i=Pr();$i(n,e,r,i),yx(n,t,r)}}function w3(e,t,n){var r=La(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gx(e))vx(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Hi(o,a)){var l=t.interleaved;l===null?(i.next=i,hm(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Zy(e,t,i,r),n!==null&&(i=Pr(),$i(n,e,r,i),yx(n,t,r))}}function gx(e){var t=e.alternate;return e===Nn||t!==null&&t===Nn}function vx(e,t){Kc=Uh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yx(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Q1(e,n)}}var Bh={readContext:Si,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},b3={readContext:Si,useCallback:function(e,t){return rs().memoizedState=[e,t===void 0?null:t],e},useContext:Si,useEffect:S2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ch(4194308,4,ux.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ch(4194308,4,e,t)},useInsertionEffect:function(e,t){return ch(4,2,e,t)},useMemo:function(e,t){var n=rs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=x3.bind(null,Nn,e),[r.memoizedState,e]},useRef:function(e){var t=rs();return e={current:e},t.memoizedState=e},useState:k2,useDebugValue:bm,useDeferredValue:function(e){return rs().memoizedState=e},useTransition:function(){var e=k2(!1),t=e[0];return e=y3.bind(null,e[1]),rs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Nn,i=rs();if(yn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=t(),nr===null)throw Error(Fe(349));ko&30||nx(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,S2(ix.bind(null,r,s,e),[e]),r.flags|=2048,wu(9,rx.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=rs(),t=nr.identifierPrefix;if(yn){var n=Ms,r=Ds;n=(r&~(1<<32-qi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=v3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_3={readContext:Si,useCallback:hx,useContext:Si,useEffect:wm,useImperativeHandle:dx,useInsertionEffect:lx,useLayoutEffect:cx,useMemo:fx,useReducer:Ep,useRef:ox,useState:function(){return Ep(xu)},useDebugValue:bm,useDeferredValue:function(e){var t=ji();return px(t,Zn.memoizedState,e)},useTransition:function(){var e=Ep(xu)[0],t=ji().memoizedState;return[e,t]},useMutableSource:ex,useSyncExternalStore:tx,useId:mx,unstable_isNewReconciler:!1},N3={readContext:Si,useCallback:hx,useContext:Si,useEffect:wm,useImperativeHandle:dx,useInsertionEffect:lx,useLayoutEffect:cx,useMemo:fx,useReducer:Lp,useRef:ox,useState:function(){return Lp(xu)},useDebugValue:bm,useDeferredValue:function(e){var t=ji();return Zn===null?t.memoizedState=e:px(t,Zn.memoizedState,e)},useTransition:function(){var e=Lp(xu)[0],t=ji().memoizedState;return[e,t]},useMutableSource:ex,useSyncExternalStore:tx,useId:mx,unstable_isNewReconciler:!1};function Mi(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function G0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hf={isMounted:function(e){return(e=e._reactInternals)?Po(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pr(),i=La(e),s=Us(r,i);s.payload=t,n!=null&&(s.callback=n),t=Aa(e,s,i),t!==null&&($i(t,e,i,r),oh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pr(),i=La(e),s=Us(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Aa(e,s,i),t!==null&&($i(t,e,i,r),oh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pr(),r=La(e),i=Us(n,r);i.tag=2,t!=null&&(i.callback=t),t=Aa(e,i,r),t!==null&&($i(t,e,r,n),oh(t,e,r))}};function j2(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!hu(n,r)||!hu(i,s):!0}function xx(e,t,n){var r=!1,i=Fa,s=t.contextType;return typeof s=="object"&&s!==null?s=Si(s):(i=qr(t)?_o:_r.current,r=t.contextTypes,s=(r=r!=null)?Il(e,i):Fa),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function A2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hf.enqueueReplaceState(t,t.state,null)}function K0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},fm(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Si(s):(s=qr(t)?_o:_r.current,i.context=Il(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(G0(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&hf.enqueueReplaceState(i,i.state,null),Dh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Dl(e,t){try{var n="",r=t;do n+=Z_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Cp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function J0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var k3=typeof WeakMap=="function"?WeakMap:Map;function wx(e,t,n){n=Us(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qh||(qh=!0,s1=r),J0(e,t)},n}function bx(e,t,n){n=Us(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){J0(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){J0(e,t),typeof r!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function E2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new k3;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=M3.bind(null,e,t,n),t.then(e,e))}function L2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function C2(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Us(-1,1),t.tag=2,Aa(n,t,1))),n.lanes|=1),e)}var S3=Hs.ReactCurrentOwner,Ur=!1;function Lr(e,t,n,r){t.child=e===null?Yy(t,null,n,r):Ol(t,e.child,n,r)}function P2(e,t,n,r,i){n=n.render;var s=t.ref;return Sl(t,i),r=ym(e,t,n,r,s,i),n=xm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$s(e,t,i)):(yn&&n&&am(t),t.flags|=1,Lr(e,t,r,i),t.child)}function T2(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Lm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,_x(e,t,s,r,i)):(e=fh(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:hu,n(a,r)&&e.ref===t.ref)return $s(e,t,i)}return t.flags|=1,e=Ca(s,r),e.ref=t.ref,e.return=t,t.child=e}function _x(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(hu(s,r)&&e.ref===t.ref)if(Ur=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ur=!0);else return t.lanes=e.lanes,$s(e,t,i)}return Y0(e,t,n,r,i)}function Nx(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(xl,ni),ni|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(xl,ni),ni|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,un(xl,ni),ni|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,un(xl,ni),ni|=r;return Lr(e,t,i,n),t.child}function kx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Y0(e,t,n,r,i){var s=qr(n)?_o:_r.current;return s=Il(t,s),Sl(t,i),n=ym(e,t,n,r,s,i),r=xm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$s(e,t,i)):(yn&&r&&am(t),t.flags|=1,Lr(e,t,n,i),t.child)}function I2(e,t,n,r,i){if(qr(n)){var s=!0;Th(t)}else s=!1;if(Sl(t,i),t.stateNode===null)uh(e,t),xx(t,n,r),K0(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Si(c):(c=qr(n)?_o:_r.current,c=Il(t,c));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&A2(t,a,r,c),pa=!1;var y=t.memoizedState;a.state=y,Dh(t,r,a,i),l=t.memoizedState,o!==r||y!==l||zr.current||pa?(typeof f=="function"&&(G0(t,n,f,r),l=t.memoizedState),(o=pa||j2(t,n,o,r,y,l,c))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qy(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Mi(t.type,o),a.props=c,g=t.pendingProps,y=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Si(l):(l=qr(n)?_o:_r.current,l=Il(t,l));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==g||y!==l)&&A2(t,a,r,l),pa=!1,y=t.memoizedState,a.state=y,Dh(t,r,a,i);var k=t.memoizedState;o!==g||y!==k||zr.current||pa?(typeof p=="function"&&(G0(t,n,p,r),k=t.memoizedState),(c=pa||j2(t,n,c,r,y,k,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),a.props=r,a.state=k,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Z0(e,t,n,r,s,i)}function Z0(e,t,n,r,i,s){kx(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&y2(t,n,!1),$s(e,t,s);r=t.stateNode,S3.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ol(t,e.child,null,s),t.child=Ol(t,null,o,s)):Lr(e,t,o,s),t.memoizedState=r.state,i&&y2(t,n,!0),t.child}function Sx(e){var t=e.stateNode;t.pendingContext?v2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&v2(e,t.context,!1),pm(e,t.containerInfo)}function R2(e,t,n,r,i){return Rl(),lm(i),t.flags|=256,Lr(e,t,n,r),t.child}var Q0={dehydrated:null,treeContext:null,retryLane:0};function X0(e){return{baseLanes:e,cachePool:null,transitions:null}}function jx(e,t,n){var r=t.pendingProps,i=_n.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),un(_n,i&1),e===null)return W0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=mf(a,r,0,null),e=xo(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=X0(n),t.memoizedState=Q0,e):_m(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return j3(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ca(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ca(o,s):(s=xo(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?X0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Q0,r}return s=e.child,e=s.sibling,r=Ca(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _m(e,t){return t=mf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Md(e,t,n,r){return r!==null&&lm(r),Ol(t,e.child,null,n),e=_m(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function j3(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Cp(Error(Fe(422))),Md(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=mf({mode:"visible",children:r.children},i,0,null),s=xo(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ol(t,e.child,null,a),t.child.memoizedState=X0(a),t.memoizedState=Q0,s);if(!(t.mode&1))return Md(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Fe(419)),r=Cp(s,r,void 0),Md(e,t,a,r)}if(o=(a&e.childLanes)!==0,Ur||o){if(r=nr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qs(e,i),$i(r,e,i,-1))}return Em(),r=Cp(Error(Fe(421))),Md(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=U3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ii=ja(i.nextSibling),oi=t,yn=!0,zi=null,e!==null&&(yi[xi++]=Ds,yi[xi++]=Ms,yi[xi++]=No,Ds=e.id,Ms=e.overflow,No=t),t=_m(t,r.children),t.flags|=4096,t)}function O2(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),V0(e.return,t,n)}function Pp(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ax(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Lr(e,t,r.children,n),r=_n.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O2(e,n,t);else if(e.tag===19)O2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(un(_n,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Mh(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Pp(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Mh(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Pp(t,!0,n,null,s);break;case"together":Pp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $s(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),So|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,n=Ca(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ca(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function A3(e,t,n){switch(t.tag){case 3:Sx(t),Rl();break;case 5:Xy(t);break;case 1:qr(t.type)&&Th(t);break;case 4:pm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;un(Oh,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(un(_n,_n.current&1),t.flags|=128,null):n&t.child.childLanes?jx(e,t,n):(un(_n,_n.current&1),e=$s(e,t,n),e!==null?e.sibling:null);un(_n,_n.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ax(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(_n,_n.current),r)break;return null;case 22:case 23:return t.lanes=0,Nx(e,t,n)}return $s(e,t,n)}var Ex,e1,Lx,Cx;Ex=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e1=function(){};Lx=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,po(cs.current);var s=null;switch(n){case"input":i=_0(e,i),r=_0(e,r),s=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),s=[];break;case"textarea":i=S0(e,i),r=S0(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ch)}A0(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(su.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(su.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&fn("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};Cx=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cc(e,t){if(!yn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function E3(e,t,n){var r=t.pendingProps;switch(om(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(t),null;case 1:return qr(t.type)&&Ph(),gr(t),null;case 3:return r=t.stateNode,Fl(),gn(zr),gn(_r),gm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zi!==null&&(l1(zi),zi=null))),e1(e,t),gr(t),null;case 5:mm(t);var i=po(vu.current);if(n=t.type,e!==null&&t.stateNode!=null)Lx(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Fe(166));return gr(t),null}if(e=po(cs.current),Fd(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ss]=t,r[mu]=s,e=(t.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<Uc.length;i++)fn(Uc[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":Hg(r,s),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fn("invalid",r);break;case"textarea":Vg(r,s),fn("invalid",r)}A0(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Od(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Od(r.textContent,o,e),i=["children",""+o]):su.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&fn("scroll",r)}switch(n){case"input":Ad(r),Wg(r,s,!0);break;case"textarea":Ad(r),Gg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ch)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[ss]=t,e[mu]=r,Ex(e,t,!1,!1),t.stateNode=e;e:{switch(a=E0(n,r),n){case"dialog":fn("cancel",e),fn("close",e),i=r;break;case"iframe":case"object":case"embed":fn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Uc.length;i++)fn(Uc[i],e);i=r;break;case"source":fn("error",e),i=r;break;case"img":case"image":case"link":fn("error",e),fn("load",e),i=r;break;case"details":fn("toggle",e),i=r;break;case"input":Hg(e,r),i=_0(e,r),fn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),fn("invalid",e);break;case"textarea":Vg(e,r),i=S0(e,r),fn("invalid",e);break;default:i=r}A0(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?oy(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sy(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&au(e,l):typeof l=="number"&&au(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(su.hasOwnProperty(s)?l!=null&&s==="onScroll"&&fn("scroll",e):l!=null&&V1(e,s,l,a))}switch(n){case"input":Ad(e),Wg(e,r,!1);break;case"textarea":Ad(e),Gg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Oa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?bl(e,!!r.multiple,s,!1):r.defaultValue!=null&&bl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gr(t),null;case 6:if(e&&t.stateNode!=null)Cx(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Fe(166));if(n=po(vu.current),po(cs.current),Fd(t)){if(r=t.stateNode,n=t.memoizedProps,r[ss]=t,(s=r.nodeValue!==n)&&(e=oi,e!==null))switch(e.tag){case 3:Od(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Od(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ss]=t,t.stateNode=r}return gr(t),null;case 13:if(gn(_n),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yn&&ii!==null&&t.mode&1&&!(t.flags&128))Ky(),Rl(),t.flags|=98560,s=!1;else if(s=Fd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Fe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[ss]=t}else Rl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gr(t),s=!1}else zi!==null&&(l1(zi),zi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_n.current&1?Qn===0&&(Qn=3):Em())),t.updateQueue!==null&&(t.flags|=4),gr(t),null);case 4:return Fl(),e1(e,t),e===null&&fu(t.stateNode.containerInfo),gr(t),null;case 10:return dm(t.type._context),gr(t),null;case 17:return qr(t.type)&&Ph(),gr(t),null;case 19:if(gn(_n),s=t.memoizedState,s===null)return gr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Cc(s,!1);else{if(Qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Mh(e),a!==null){for(t.flags|=128,Cc(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return un(_n,_n.current&1|2),t.child}e=e.sibling}s.tail!==null&&Rn()>Ml&&(t.flags|=128,r=!0,Cc(s,!1),t.lanes=4194304)}else{if(!r)if(e=Mh(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!yn)return gr(t),null}else 2*Rn()-s.renderingStartTime>Ml&&n!==1073741824&&(t.flags|=128,r=!0,Cc(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Rn(),t.sibling=null,n=_n.current,un(_n,r?n&1|2:n&1),t):(gr(t),null);case 22:case 23:return Am(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ni&1073741824&&(gr(t),t.subtreeFlags&6&&(t.flags|=8192)):gr(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function L3(e,t){switch(om(t),t.tag){case 1:return qr(t.type)&&Ph(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fl(),gn(zr),gn(_r),gm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mm(t),null;case 13:if(gn(_n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));Rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gn(_n),null;case 4:return Fl(),null;case 10:return dm(t.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var Ud=!1,br=!1,C3=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function yl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){En(e,t,r)}else n.current=null}function t1(e,t,n){try{n()}catch(r){En(e,t,r)}}var F2=!1;function P3(e,t){if(M0=Ah,e=Oy(),sm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,f=0,g=e,y=null;t:for(;;){for(var p;g!==n||i!==0&&g.nodeType!==3||(o=a+i),g!==s||r!==0&&g.nodeType!==3||(l=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(p=g.firstChild)!==null;)y=g,g=p;for(;;){if(g===e)break t;if(y===n&&++c===i&&(o=a),y===s&&++f===r&&(l=a),(p=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(U0={focusedElem:e,selectionRange:n},Ah=!1,Ge=t;Ge!==null;)if(t=Ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ge=e;else for(;Ge!==null;){t=Ge;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var _=k.memoizedProps,A=k.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?_:Mi(t.type,_),A);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(C){En(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ge=e;break}Ge=t.return}return k=F2,F2=!1,k}function Jc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&t1(t,n,s)}i=i.next}while(i!==r)}}function ff(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function n1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Px(e){var t=e.alternate;t!==null&&(e.alternate=null,Px(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ss],delete t[mu],delete t[q0],delete t[f3],delete t[p3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tx(e){return e.tag===5||e.tag===3||e.tag===4}function D2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function r1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ch));else if(r!==4&&(e=e.child,e!==null))for(r1(e,t,n),e=e.sibling;e!==null;)r1(e,t,n),e=e.sibling}function i1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(i1(e,t,n),e=e.sibling;e!==null;)i1(e,t,n),e=e.sibling}var lr=null,Ui=!1;function la(e,t,n){for(n=n.child;n!==null;)Ix(e,t,n),n=n.sibling}function Ix(e,t,n){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:br||yl(n,t);case 6:var r=lr,i=Ui;lr=null,la(e,t,n),lr=r,Ui=i,lr!==null&&(Ui?(e=lr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lr.removeChild(n.stateNode));break;case 18:lr!==null&&(Ui?(e=lr,n=n.stateNode,e.nodeType===8?kp(e.parentNode,n):e.nodeType===1&&kp(e,n),uu(e)):kp(lr,n.stateNode));break;case 4:r=lr,i=Ui,lr=n.stateNode.containerInfo,Ui=!0,la(e,t,n),lr=r,Ui=i;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&t1(n,t,a),i=i.next}while(i!==r)}la(e,t,n);break;case 1:if(!br&&(yl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){En(n,t,o)}la(e,t,n);break;case 21:la(e,t,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,la(e,t,n),br=r):la(e,t,n);break;default:la(e,t,n)}}function M2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new C3),t.forEach(function(r){var i=B3.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Oi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:lr=o.stateNode,Ui=!1;break e;case 3:lr=o.stateNode.containerInfo,Ui=!0;break e;case 4:lr=o.stateNode.containerInfo,Ui=!0;break e}o=o.return}if(lr===null)throw Error(Fe(160));Ix(s,a,i),lr=null,Ui=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){En(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rx(t,e),t=t.sibling}function Rx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oi(t,e),es(e),r&4){try{Jc(3,e,e.return),ff(3,e)}catch(_){En(e,e.return,_)}try{Jc(5,e,e.return)}catch(_){En(e,e.return,_)}}break;case 1:Oi(t,e),es(e),r&512&&n!==null&&yl(n,n.return);break;case 5:if(Oi(t,e),es(e),r&512&&n!==null&&yl(n,n.return),e.flags&32){var i=e.stateNode;try{au(i,"")}catch(_){En(e,e.return,_)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&ny(i,s),E0(o,a);var c=E0(o,s);for(a=0;a<l.length;a+=2){var f=l[a],g=l[a+1];f==="style"?oy(i,g):f==="dangerouslySetInnerHTML"?sy(i,g):f==="children"?au(i,g):V1(i,f,g,c)}switch(o){case"input":N0(i,s);break;case"textarea":ry(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?bl(i,!!s.multiple,p,!1):y!==!!s.multiple&&(s.defaultValue!=null?bl(i,!!s.multiple,s.defaultValue,!0):bl(i,!!s.multiple,s.multiple?[]:"",!1))}i[mu]=s}catch(_){En(e,e.return,_)}}break;case 6:if(Oi(t,e),es(e),r&4){if(e.stateNode===null)throw Error(Fe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(_){En(e,e.return,_)}}break;case 3:if(Oi(t,e),es(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uu(t.containerInfo)}catch(_){En(e,e.return,_)}break;case 4:Oi(t,e),es(e);break;case 13:Oi(t,e),es(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Sm=Rn())),r&4&&M2(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(br=(c=br)||f,Oi(t,e),br=c):Oi(t,e),es(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Ge=e,f=e.child;f!==null;){for(g=Ge=f;Ge!==null;){switch(y=Ge,p=y.child,y.tag){case 0:case 11:case 14:case 15:Jc(4,y,y.return);break;case 1:yl(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(_){En(r,n,_)}}break;case 5:yl(y,y.return);break;case 22:if(y.memoizedState!==null){B2(g);continue}}p!==null?(p.return=y,Ge=p):B2(g)}f=f.sibling}e:for(f=null,g=e;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=g.stateNode,l=g.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=ay("display",a))}catch(_){En(e,e.return,_)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(_){En(e,e.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Oi(t,e),es(e),r&4&&M2(e);break;case 21:break;default:Oi(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tx(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(au(i,""),r.flags&=-33);var s=D2(e);i1(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=D2(e);r1(e,o,a);break;default:throw Error(Fe(161))}}catch(l){En(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function T3(e,t,n){Ge=e,Ox(e)}function Ox(e,t,n){for(var r=(e.mode&1)!==0;Ge!==null;){var i=Ge,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ud;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||br;o=Ud;var c=br;if(Ud=a,(br=l)&&!c)for(Ge=i;Ge!==null;)a=Ge,l=a.child,a.tag===22&&a.memoizedState!==null?z2(i):l!==null?(l.return=a,Ge=l):z2(i);for(;s!==null;)Ge=s,Ox(s),s=s.sibling;Ge=i,Ud=o,br=c}U2(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ge=s):U2(e)}}function U2(e){for(;Ge!==null;){var t=Ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:br||ff(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!br)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Mi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&N2(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}N2(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&uu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}br||t.flags&512&&n1(t)}catch(y){En(t,t.return,y)}}if(t===e){Ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function B2(e){for(;Ge!==null;){var t=Ge;if(t===e){Ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function z2(e){for(;Ge!==null;){var t=Ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ff(4,t)}catch(l){En(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){En(t,i,l)}}var s=t.return;try{n1(t)}catch(l){En(t,s,l)}break;case 5:var a=t.return;try{n1(t)}catch(l){En(t,a,l)}}}catch(l){En(t,t.return,l)}if(t===e){Ge=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ge=o;break}Ge=t.return}}var I3=Math.ceil,zh=Hs.ReactCurrentDispatcher,Nm=Hs.ReactCurrentOwner,Ni=Hs.ReactCurrentBatchConfig,Ht=0,nr=null,qn=null,ur=0,ni=0,xl=Ba(0),Qn=0,bu=null,So=0,pf=0,km=0,Yc=null,Dr=null,Sm=0,Ml=1/0,Ts=null,qh=!1,s1=null,Ea=null,Bd=!1,wa=null,$h=0,Zc=0,a1=null,dh=-1,hh=0;function Pr(){return Ht&6?Rn():dh!==-1?dh:dh=Rn()}function La(e){return e.mode&1?Ht&2&&ur!==0?ur&-ur:g3.transition!==null?(hh===0&&(hh=xy()),hh):(e=Qt,e!==0||(e=window.event,e=e===void 0?16:jy(e.type)),e):1}function $i(e,t,n,r){if(50<Zc)throw Zc=0,a1=null,Error(Fe(185));Iu(e,n,r),(!(Ht&2)||e!==nr)&&(e===nr&&(!(Ht&2)&&(pf|=n),Qn===4&&ga(e,ur)),$r(e,r),n===1&&Ht===0&&!(t.mode&1)&&(Ml=Rn()+500,uf&&za()))}function $r(e,t){var n=e.callbackNode;g4(e,t);var r=jh(e,e===nr?ur:0);if(r===0)n!==null&&Yg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yg(n),t===1)e.tag===0?m3(q2.bind(null,e)):Wy(q2.bind(null,e)),d3(function(){!(Ht&6)&&za()}),n=null;else{switch(wy(r)){case 1:n=Z1;break;case 4:n=vy;break;case 16:n=Sh;break;case 536870912:n=yy;break;default:n=Sh}n=$x(n,Fx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fx(e,t){if(dh=-1,hh=0,Ht&6)throw Error(Fe(327));var n=e.callbackNode;if(jl()&&e.callbackNode!==n)return null;var r=jh(e,e===nr?ur:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Hh(e,r);else{t=r;var i=Ht;Ht|=2;var s=Mx();(nr!==e||ur!==t)&&(Ts=null,Ml=Rn()+500,yo(e,t));do try{F3();break}catch(o){Dx(e,o)}while(!0);um(),zh.current=s,Ht=i,qn!==null?t=0:(nr=null,ur=0,t=Qn)}if(t!==0){if(t===2&&(i=I0(e),i!==0&&(r=i,t=o1(e,i))),t===1)throw n=bu,yo(e,0),ga(e,r),$r(e,Rn()),n;if(t===6)ga(e,r);else{if(i=e.current.alternate,!(r&30)&&!R3(i)&&(t=Hh(e,r),t===2&&(s=I0(e),s!==0&&(r=s,t=o1(e,s))),t===1))throw n=bu,yo(e,0),ga(e,r),$r(e,Rn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Fe(345));case 2:ao(e,Dr,Ts);break;case 3:if(ga(e,r),(r&130023424)===r&&(t=Sm+500-Rn(),10<t)){if(jh(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Pr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=z0(ao.bind(null,e,Dr,Ts),t);break}ao(e,Dr,Ts);break;case 4:if(ga(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-qi(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I3(r/1960))-r,10<r){e.timeoutHandle=z0(ao.bind(null,e,Dr,Ts),r);break}ao(e,Dr,Ts);break;case 5:ao(e,Dr,Ts);break;default:throw Error(Fe(329))}}}return $r(e,Rn()),e.callbackNode===n?Fx.bind(null,e):null}function o1(e,t){var n=Yc;return e.current.memoizedState.isDehydrated&&(yo(e,t).flags|=256),e=Hh(e,t),e!==2&&(t=Dr,Dr=n,t!==null&&l1(t)),e}function l1(e){Dr===null?Dr=e:Dr.push.apply(Dr,e)}function R3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ga(e,t){for(t&=~km,t&=~pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qi(t),r=1<<n;e[n]=-1,t&=~r}}function q2(e){if(Ht&6)throw Error(Fe(327));jl();var t=jh(e,0);if(!(t&1))return $r(e,Rn()),null;var n=Hh(e,t);if(e.tag!==0&&n===2){var r=I0(e);r!==0&&(t=r,n=o1(e,r))}if(n===1)throw n=bu,yo(e,0),ga(e,t),$r(e,Rn()),n;if(n===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ao(e,Dr,Ts),$r(e,Rn()),null}function jm(e,t){var n=Ht;Ht|=1;try{return e(t)}finally{Ht=n,Ht===0&&(Ml=Rn()+500,uf&&za())}}function jo(e){wa!==null&&wa.tag===0&&!(Ht&6)&&jl();var t=Ht;Ht|=1;var n=Ni.transition,r=Qt;try{if(Ni.transition=null,Qt=1,e)return e()}finally{Qt=r,Ni.transition=n,Ht=t,!(Ht&6)&&za()}}function Am(){ni=xl.current,gn(xl)}function yo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,u3(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(om(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ph();break;case 3:Fl(),gn(zr),gn(_r),gm();break;case 5:mm(r);break;case 4:Fl();break;case 13:gn(_n);break;case 19:gn(_n);break;case 10:dm(r.type._context);break;case 22:case 23:Am()}n=n.return}if(nr=e,qn=e=Ca(e.current,null),ur=ni=t,Qn=0,bu=null,km=pf=So=0,Dr=Yc=null,fo!==null){for(t=0;t<fo.length;t++)if(n=fo[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}fo=null}return e}function Dx(e,t){do{var n=qn;try{if(um(),lh.current=Bh,Uh){for(var r=Nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uh=!1}if(ko=0,er=Zn=Nn=null,Kc=!1,yu=0,Nm.current=null,n===null||n.return===null){Qn=1,bu=t,qn=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=ur,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=o,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=L2(a);if(p!==null){p.flags&=-257,C2(p,a,o,s,t),p.mode&1&&E2(s,c,t),t=p,l=c;var k=t.updateQueue;if(k===null){var _=new Set;_.add(l),t.updateQueue=_}else k.add(l);break e}else{if(!(t&1)){E2(s,c,t),Em();break e}l=Error(Fe(426))}}else if(yn&&o.mode&1){var A=L2(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),C2(A,a,o,s,t),lm(Dl(l,o));break e}}s=l=Dl(l,o),Qn!==4&&(Qn=2),Yc===null?Yc=[s]:Yc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=wx(s,l,t);_2(s,x);break e;case 1:o=l;var b=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ea===null||!Ea.has(N)))){s.flags|=65536,t&=-t,s.lanes|=t;var C=bx(s,o,t);_2(s,C);break e}}s=s.return}while(s!==null)}Bx(n)}catch(K){t=K,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function Mx(){var e=zh.current;return zh.current=Bh,e===null?Bh:e}function Em(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),nr===null||!(So&268435455)&&!(pf&268435455)||ga(nr,ur)}function Hh(e,t){var n=Ht;Ht|=2;var r=Mx();(nr!==e||ur!==t)&&(Ts=null,yo(e,t));do try{O3();break}catch(i){Dx(e,i)}while(!0);if(um(),Ht=n,zh.current=r,qn!==null)throw Error(Fe(261));return nr=null,ur=0,Qn}function O3(){for(;qn!==null;)Ux(qn)}function F3(){for(;qn!==null&&!o4();)Ux(qn)}function Ux(e){var t=qx(e.alternate,e,ni);e.memoizedProps=e.pendingProps,t===null?Bx(e):qn=t,Nm.current=null}function Bx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=L3(n,t),n!==null){n.flags&=32767,qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qn=6,qn=null;return}}else if(n=E3(n,t,ni),n!==null){qn=n;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);Qn===0&&(Qn=5)}function ao(e,t,n){var r=Qt,i=Ni.transition;try{Ni.transition=null,Qt=1,D3(e,t,n,r)}finally{Ni.transition=i,Qt=r}return null}function D3(e,t,n,r){do jl();while(wa!==null);if(Ht&6)throw Error(Fe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(v4(e,s),e===nr&&(qn=nr=null,ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bd||(Bd=!0,$x(Sh,function(){return jl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ni.transition,Ni.transition=null;var a=Qt;Qt=1;var o=Ht;Ht|=4,Nm.current=null,P3(e,n),Rx(n,e),r3(U0),Ah=!!M0,U0=M0=null,e.current=n,T3(n),l4(),Ht=o,Qt=a,Ni.transition=s}else e.current=n;if(Bd&&(Bd=!1,wa=e,$h=i),s=e.pendingLanes,s===0&&(Ea=null),d4(n.stateNode),$r(e,Rn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qh)throw qh=!1,e=s1,s1=null,e;return $h&1&&e.tag!==0&&jl(),s=e.pendingLanes,s&1?e===a1?Zc++:(Zc=0,a1=e):Zc=0,za(),null}function jl(){if(wa!==null){var e=wy($h),t=Ni.transition,n=Qt;try{if(Ni.transition=null,Qt=16>e?16:e,wa===null)var r=!1;else{if(e=wa,wa=null,$h=0,Ht&6)throw Error(Fe(331));var i=Ht;for(Ht|=4,Ge=e.current;Ge!==null;){var s=Ge,a=s.child;if(Ge.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ge=c;Ge!==null;){var f=Ge;switch(f.tag){case 0:case 11:case 15:Jc(8,f,s)}var g=f.child;if(g!==null)g.return=f,Ge=g;else for(;Ge!==null;){f=Ge;var y=f.sibling,p=f.return;if(Px(f),f===c){Ge=null;break}if(y!==null){y.return=p,Ge=y;break}Ge=p}}}var k=s.alternate;if(k!==null){var _=k.child;if(_!==null){k.child=null;do{var A=_.sibling;_.sibling=null,_=A}while(_!==null)}}Ge=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ge=a;else e:for(;Ge!==null;){if(s=Ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jc(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ge=x;break e}Ge=s.return}}var b=e.current;for(Ge=b;Ge!==null;){a=Ge;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Ge=N;else e:for(a=b;Ge!==null;){if(o=Ge,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ff(9,o)}}catch(K){En(o,o.return,K)}if(o===a){Ge=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Ge=C;break e}Ge=o.return}}if(Ht=i,za(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(sf,e)}catch{}r=!0}return r}finally{Qt=n,Ni.transition=t}}return!1}function $2(e,t,n){t=Dl(n,t),t=wx(e,t,1),e=Aa(e,t,1),t=Pr(),e!==null&&(Iu(e,1,t),$r(e,t))}function En(e,t,n){if(e.tag===3)$2(e,e,n);else for(;t!==null;){if(t.tag===3){$2(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ea===null||!Ea.has(r))){e=Dl(n,e),e=bx(t,e,1),t=Aa(t,e,1),e=Pr(),t!==null&&(Iu(t,1,e),$r(t,e));break}}t=t.return}}function M3(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pr(),e.pingedLanes|=e.suspendedLanes&n,nr===e&&(ur&n)===n&&(Qn===4||Qn===3&&(ur&130023424)===ur&&500>Rn()-Sm?yo(e,0):km|=n),$r(e,t)}function zx(e,t){t===0&&(e.mode&1?(t=Cd,Cd<<=1,!(Cd&130023424)&&(Cd=4194304)):t=1);var n=Pr();e=qs(e,t),e!==null&&(Iu(e,t,n),$r(e,n))}function U3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zx(e,n)}function B3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(t),zx(e,n)}var qx;qx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Ur=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ur=!1,A3(e,t,n);Ur=!!(e.flags&131072)}else Ur=!1,yn&&t.flags&1048576&&Vy(t,Rh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;uh(e,t),e=t.pendingProps;var i=Il(t,_r.current);Sl(t,n),i=ym(null,t,r,e,i,n);var s=xm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qr(r)?(s=!0,Th(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fm(t),i.updater=hf,t.stateNode=i,i._reactInternals=t,K0(t,r,e,n),t=Z0(null,t,r,!0,s,n)):(t.tag=0,yn&&s&&am(t),Lr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(uh(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=q3(r),e=Mi(r,e),i){case 0:t=Y0(null,t,r,e,n);break e;case 1:t=I2(null,t,r,e,n);break e;case 11:t=P2(null,t,r,e,n);break e;case 14:t=T2(null,t,r,Mi(r.type,e),n);break e}throw Error(Fe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),Y0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),I2(e,t,r,i,n);case 3:e:{if(Sx(t),e===null)throw Error(Fe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Qy(e,t),Dh(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Dl(Error(Fe(423)),t),t=R2(e,t,r,n,i);break e}else if(r!==i){i=Dl(Error(Fe(424)),t),t=R2(e,t,r,n,i);break e}else for(ii=ja(t.stateNode.containerInfo.firstChild),oi=t,yn=!0,zi=null,n=Yy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),r===i){t=$s(e,t,n);break e}Lr(e,t,r,n)}t=t.child}return t;case 5:return Xy(t),e===null&&W0(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,B0(r,i)?a=null:s!==null&&B0(r,s)&&(t.flags|=32),kx(e,t),Lr(e,t,a,n),t.child;case 6:return e===null&&W0(t),null;case 13:return jx(e,t,n);case 4:return pm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ol(t,null,r,n):Lr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),P2(e,t,r,i,n);case 7:return Lr(e,t,t.pendingProps,n),t.child;case 8:return Lr(e,t,t.pendingProps.children,n),t.child;case 12:return Lr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,un(Oh,r._currentValue),r._currentValue=a,s!==null)if(Hi(s.value,a)){if(s.children===i.children&&!zr.current){t=$s(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Us(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),V0(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Fe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),V0(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Lr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sl(t,n),i=Si(i),r=r(i),t.flags|=1,Lr(e,t,r,n),t.child;case 14:return r=t.type,i=Mi(r,t.pendingProps),i=Mi(r.type,i),T2(e,t,r,i,n);case 15:return _x(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),uh(e,t),t.tag=1,qr(r)?(e=!0,Th(t)):e=!1,Sl(t,n),xx(t,r,i),K0(t,r,i,n),Z0(null,t,r,!0,e,n);case 19:return Ax(e,t,n);case 22:return Nx(e,t,n)}throw Error(Fe(156,t.tag))};function $x(e,t){return gy(e,t)}function z3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,r){return new z3(e,t,n,r)}function Lm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q3(e){if(typeof e=="function")return Lm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===K1)return 11;if(e===J1)return 14}return 2}function Ca(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fh(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Lm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case cl:return xo(n.children,i,s,t);case G1:a=8,i|=8;break;case y0:return e=_i(12,n,t,i|2),e.elementType=y0,e.lanes=s,e;case x0:return e=_i(13,n,t,i),e.elementType=x0,e.lanes=s,e;case w0:return e=_i(19,n,t,i),e.elementType=w0,e.lanes=s,e;case Xv:return mf(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zv:a=10;break e;case Qv:a=9;break e;case K1:a=11;break e;case J1:a=14;break e;case fa:a=16,r=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=_i(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function xo(e,t,n,r){return e=_i(7,e,r,t),e.lanes=n,e}function mf(e,t,n,r){return e=_i(22,e,r,t),e.elementType=Xv,e.lanes=n,e.stateNode={isHidden:!1},e}function Tp(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function Ip(e,t,n){return t=_i(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $3(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fp(0),this.expirationTimes=fp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cm(e,t,n,r,i,s,a,o,l){return e=new $3(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_i(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(s),e}function H3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hx(e){if(!e)return Fa;e=e._reactInternals;e:{if(Po(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var n=e.type;if(qr(n))return Hy(e,n,t)}return t}function Wx(e,t,n,r,i,s,a,o,l){return e=Cm(n,r,!0,e,i,s,a,o,l),e.context=Hx(null),n=e.current,r=Pr(),i=La(n),s=Us(r,i),s.callback=t??null,Aa(n,s,i),e.current.lanes=i,Iu(e,i,r),$r(e,r),e}function gf(e,t,n,r){var i=t.current,s=Pr(),a=La(i);return n=Hx(n),t.context===null?t.context=n:t.pendingContext=n,t=Us(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Aa(i,t,a),e!==null&&($i(e,i,a,s),oh(e,i,a)),a}function Wh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function H2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pm(e,t){H2(e,t),(e=e.alternate)&&H2(e,t)}function W3(){return null}var Vx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tm(e){this._internalRoot=e}vf.prototype.render=Tm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));gf(e,t,null,null)};vf.prototype.unmount=Tm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jo(function(){gf(null,e,null,null)}),t[zs]=null}};function vf(e){this._internalRoot=e}vf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ny();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ma.length&&t!==0&&t<ma[n].priority;n++);ma.splice(n,0,e),n===0&&Sy(e)}};function Im(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W2(){}function V3(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Wh(a);s.call(c)}}var a=Wx(t,r,e,0,null,!1,!1,"",W2);return e._reactRootContainer=a,e[zs]=a.current,fu(e.nodeType===8?e.parentNode:e),jo(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Wh(l);o.call(c)}}var l=Cm(e,0,!1,null,null,!1,!1,"",W2);return e._reactRootContainer=l,e[zs]=l.current,fu(e.nodeType===8?e.parentNode:e),jo(function(){gf(t,l,n,r)}),l}function xf(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Wh(a);o.call(l)}}gf(t,a,e,i)}else a=V3(n,t,e,i,r);return Wh(a)}by=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mc(t.pendingLanes);n!==0&&(Q1(t,n|1),$r(t,Rn()),!(Ht&6)&&(Ml=Rn()+500,za()))}break;case 13:jo(function(){var r=qs(e,1);if(r!==null){var i=Pr();$i(r,e,1,i)}}),Pm(e,1)}};X1=function(e){if(e.tag===13){var t=qs(e,134217728);if(t!==null){var n=Pr();$i(t,e,134217728,n)}Pm(e,134217728)}};_y=function(e){if(e.tag===13){var t=La(e),n=qs(e,t);if(n!==null){var r=Pr();$i(n,e,t,r)}Pm(e,t)}};Ny=function(){return Qt};ky=function(e,t){var n=Qt;try{return Qt=e,t()}finally{Qt=n}};C0=function(e,t,n){switch(t){case"input":if(N0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=cf(r);if(!i)throw Error(Fe(90));ty(r),N0(r,i)}}}break;case"textarea":ry(e,n);break;case"select":t=n.value,t!=null&&bl(e,!!n.multiple,t,!1)}};uy=jm;dy=jo;var G3={usingClientEntryPoint:!1,Events:[Ou,fl,cf,ly,cy,jm]},Pc={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K3={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=py(e),e===null?null:e.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||W3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{sf=zd.inject(K3),ls=zd}catch{}}ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G3;ci.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(t))throw Error(Fe(200));return H3(e,t,null,n)};ci.createRoot=function(e,t){if(!Im(e))throw Error(Fe(299));var n=!1,r="",i=Vx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Cm(e,1,!1,null,null,n,!1,r,i),e[zs]=t.current,fu(e.nodeType===8?e.parentNode:e),new Tm(t)};ci.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=py(t),e=e===null?null:e.stateNode,e};ci.flushSync=function(e){return jo(e)};ci.hydrate=function(e,t,n){if(!yf(t))throw Error(Fe(200));return xf(null,e,t,!0,n)};ci.hydrateRoot=function(e,t,n){if(!Im(e))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Vx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Wx(t,null,e,1,n??null,i,!1,s,a),e[zs]=t.current,fu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new vf(t)};ci.render=function(e,t,n){if(!yf(t))throw Error(Fe(200));return xf(null,e,t,!1,n)};ci.unmountComponentAtNode=function(e){if(!yf(e))throw Error(Fe(40));return e._reactRootContainer?(jo(function(){xf(null,null,e,!1,function(){e._reactRootContainer=null,e[zs]=null})}),!0):!1};ci.unstable_batchedUpdates=jm;ci.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yf(n))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return xf(e,t,n,!1,r)};ci.version="18.3.1-next-f1338f8080-20240426";function Gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gx)}catch(e){console.error(e)}}Gx(),Gv.exports=ci;var J3=Gv.exports,Kx,V2=J3;Kx=V2.createRoot,V2.hydrateRoot;var yt=(e=>(e.DRAFT="Draft",e.SENT="Sent",e.APPROVED="Approved",e.PAID="Paid",e))(yt||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Mt=(e,t)=>{const n=me.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...c},f)=>me.createElement("svg",{ref:f,...Y3,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Z3(e)}`,o].join(" "),...c},[...t.map(([g,y])=>me.createElement(g,y)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=Mt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Mt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=Mt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Mt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Mt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Mt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=Mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Mt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Mt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Mt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=Mt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=Mt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Mt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=Mt("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Mt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Mt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Mt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Mt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hr=({children:e,showNav:t=!0,activeTab:n="estimates",onTabChange:r,className:i="",fab:s})=>d.jsx("div",{className:"min-h-screen w-full flex justify-center bg-slate-100 font-sans text-slate-900 antialiased",children:d.jsxs("div",{className:"w-full max-w-[390px] h-[100dvh] bg-[#FAFAFA] flex flex-col shadow-2xl relative isolate overflow-hidden",children:[d.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar flex flex-col",children:d.jsx("main",{className:`flex-1 ${i}`,children:e})}),s&&d.jsx("div",{className:"absolute bottom-[100px] right-5 z-40 animate-in fade-in zoom-in duration-500",children:s}),t&&d.jsxs("nav",{className:"h-[88px] bg-white/95 backdrop-blur-xl border-t border-slate-100 flex items-start pt-4 justify-center gap-10 shrink-0 z-50 absolute bottom-0 w-full left-0 rounded-t-[28px] shadow-[0_-5px_25px_rgba(0,0,0,0.02)]",children:[d.jsxs("button",{onClick:()=>r==null?void 0:r("estimates"),className:`group flex flex-col items-center gap-1.5 w-16 transition-all duration-300 ${n==="estimates"?"text-slate-900":"text-slate-300 hover:text-slate-500"}`,children:[d.jsx("div",{className:`transition-transform duration-300 ${n==="estimates"?"-translate-y-0.5":""}`,children:d.jsx(rN,{size:24,strokeWidth:n==="estimates"?2.5:2})}),d.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider transition-colors ${n==="estimates"?"text-slate-900":"text-slate-300"}`,children:"Estimates"})]}),d.jsxs("button",{onClick:()=>r==null?void 0:r("invoices"),className:`group flex flex-col items-center gap-1.5 w-16 transition-all duration-300 ${n==="invoices"?"text-slate-900":"text-slate-300 hover:text-slate-500"}`,children:[d.jsx("div",{className:`transition-transform duration-300 ${n==="invoices"?"-translate-y-0.5":""}`,children:d.jsx(Zx,{size:24,strokeWidth:n==="invoices"?2.5:2})}),d.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider transition-colors ${n==="invoices"?"text-slate-900":"text-slate-300"}`,children:"Invoices"})]}),d.jsxs("button",{onClick:()=>r==null?void 0:r("customers"),className:`group flex flex-col items-center gap-1.5 w-16 transition-all duration-300 ${n==="customers"?"text-slate-900":"text-slate-300 hover:text-slate-500"}`,children:[d.jsx("div",{className:`transition-transform duration-300 ${n==="customers"?"-translate-y-0.5":""}`,children:d.jsx(Xx,{size:24,strokeWidth:n==="customers"?2.5:2})}),d.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider transition-colors ${n==="customers"?"text-slate-900":"text-slate-300"}`,children:"Customers"})]})]})]})}),Tr=({title:e,left:t,right:n,transparent:r,variant:i="light"})=>{const s=(e||"").trim().toUpperCase()==="SMASH";return d.jsxs("header",{className:`h-[64px] flex items-center justify-between px-5 shrink-0 z-20 transition-all duration-300
      ${r?"bg-transparent":"bg-[#FAFAFA]/80 backdrop-blur-md sticky top-0"}
    `,children:[d.jsx("div",{className:"w-10 flex justify-start",children:t}),d.jsx("div",{className:"flex-1 text-center",children:e&&d.jsx("h1",{className:`text-[17px] font-bold tracking-tight ${i==="dark"?"text-white":"text-slate-900"}`,children:s?d.jsxs("span",{className:"flex items-center justify-center gap-[2px]",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-[5px] h-[5px] rounded-full bg-accent mt-1.5 shadow-[0_0_10px_rgba(212,255,0,0.4)]"})]}):e})}),d.jsx("div",{className:"w-10 flex justify-end",children:n})]})},ri=({title:e,children:t,className:n=""})=>d.jsxs("div",{className:`flex flex-col gap-3 mb-8 px-5 ${n}`,children:[d.jsx("h2",{className:"text-[12px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:e}),t]}),jt=({label:e,className:t="",...n})=>d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e&&d.jsx("label",{className:"text-[12px] font-bold text-slate-400 ml-1 uppercase tracking-wider",children:e}),d.jsx("input",{className:`h-[54px] px-4 rounded-[14px] border border-slate-100 bg-slate-50/50 text-slate-900 text-[16px] font-medium placeholder:text-slate-300 focus:outline-none focus:bg-white focus:border-slate-900 focus:ring-0 transition-all duration-300 ${t}`,...n})]}),ph=({label:e,options:t,className:n="",value:r,...i})=>d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e&&d.jsx("label",{className:"text-[12px] font-bold text-slate-400 ml-1 uppercase tracking-wider",children:e}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{className:`h-[54px] w-full px-4 rounded-[14px] border border-slate-100 bg-slate-50/50 text-slate-900 text-[16px] font-medium appearance-none focus:outline-none focus:bg-white focus:border-slate-900 focus:ring-0 transition-all duration-300 ${n}`,value:r,...i,children:[r===""&&d.jsx("option",{value:"",disabled:!0,children:"Select..."}),t.map(s=>d.jsx("option",{value:s,children:s},s))]}),d.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-300",children:d.jsx("svg",{width:"10",height:"6",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),Et=({variant:e="primary",fullWidth:t=!1,className:n="",children:r,disabled:i,...s})=>{const a="h-[54px] px-6 rounded-[16px] font-bold text-[15px] tracking-tight transition-all duration-200 flex items-center justify-center active:scale-[0.97] disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100",o={primary:"bg-slate-900 text-white hover:bg-slate-800 shadow-md active:shadow-sm",secondary:"bg-white text-slate-900 border border-slate-100 hover:bg-slate-50 active:bg-slate-100",outline:"bg-transparent text-slate-900 border-2 border-slate-100 hover:border-slate-200 active:bg-slate-50",accent:"bg-accent text-accentText shadow-md shadow-accent/10 active:shadow-sm",success:"bg-accent text-accentText shadow-md shadow-accent/10 active:shadow-sm",danger:"bg-red-500 text-white shadow-md active:shadow-sm"},l=t?"w-full":"";return d.jsx("button",{className:`${a} ${o[e]} ${l} ${n}`,disabled:i,...s,children:r})},pN="modulepreload",mN=function(e){return"/"+e},K2={},Pa=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=mN(l),l in K2)return;K2[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":pN,c||(g.as="script"),g.crossOrigin="",g.href=l,o&&g.setAttribute("nonce",o),document.head.appendChild(g),c)return new Promise((y,p)=>{g.addEventListener("load",y),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},gN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Fm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class vN extends Fm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class J2 extends Fm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Y2 extends Fm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var d1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(d1||(d1={}));var yN=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};class xN{constructor(t,{headers:n={},customFetch:r,region:i=d1.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=gN(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return yN(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let o={},{region:l}=n;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(o["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(o["Content-Type"]="application/json",f=JSON.stringify(a)));const g=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:f}).catch(_=>{throw new vN(_)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new J2(g);if(!g.ok)throw new Y2(g);let p=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return p==="application/json"?k=yield g.json():p==="application/octet-stream"?k=yield g.blob():p==="text/event-stream"?k=g:p==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(i){return{data:null,error:i,response:i instanceof Y2||i instanceof J2?i.context:void 0}}})}}var Mr={},Dm={},bf={},Du={},_f={},Nf={},wN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ul=wN();const bN=Ul.fetch,ew=Ul.fetch.bind(Ul),tw=Ul.Headers,_N=Ul.Request,NN=Ul.Response,Vl=Object.freeze(Object.defineProperty({__proto__:null,Headers:tw,Request:_N,Response:NN,default:ew,fetch:bN},Symbol.toStringTag,{value:"Module"})),kN=N_(Vl);var kf={};Object.defineProperty(kf,"__esModule",{value:!0});let SN=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};kf.default=SN;var nw=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nf,"__esModule",{value:!0});const jN=nw(kN),AN=nw(kf);let EN=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l,c;let f=null,g=null,y=null,p=s.status,k=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?g=b:g=JSON.parse(b))}const A=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");A&&x&&x.length>1&&(y=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,k="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const A=await s.text();try{f=JSON.parse(A),Array.isArray(f)&&s.status===404&&(g=[],f=null,p=200,k="OK")}catch{s.status===404&&A===""?(p=204,k="No Content"):f={message:A}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,p=200,k="OK"),f&&this.shouldThrowOnError)throw new AN.default(f)}return{error:f,data:g,count:y,status:p,statusText:k}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};Nf.default=EN;var LN=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});const CN=LN(Nf);let PN=class extends CN.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};_f.default=PN;var TN=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Du,"__esModule",{value:!0});const IN=TN(_f);let RN=class extends IN.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Du.default=RN;var ON=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bf,"__esModule",{value:!0});const Tc=ON(Du);let FN=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Tc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Tc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){const c=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new Tc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Tc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Tc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};bf.default=FN;var rw=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dm,"__esModule",{value:!0});const DN=rw(bf),MN=rw(Du);let UN=class iw{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new DN.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new iw(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{l.searchParams.append(g,y)})):(o="POST",c=n);const f=new Headers(this.headers);return s&&f.set("Prefer",`count=${s}`),new MN.default({method:o,url:l,headers:f,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Dm.default=UN;var Gl=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.PostgrestError=Mr.PostgrestBuilder=Mr.PostgrestTransformBuilder=Mr.PostgrestFilterBuilder=Mr.PostgrestQueryBuilder=Mr.PostgrestClient=void 0;const sw=Gl(Dm);Mr.PostgrestClient=sw.default;const aw=Gl(bf);Mr.PostgrestQueryBuilder=aw.default;const ow=Gl(Du);Mr.PostgrestFilterBuilder=ow.default;const lw=Gl(_f);Mr.PostgrestTransformBuilder=lw.default;const cw=Gl(Nf);Mr.PostgrestBuilder=cw.default;const uw=Gl(kf);Mr.PostgrestError=uw.default;var BN=Mr.default={PostgrestClient:sw.default,PostgrestQueryBuilder:aw.default,PostgrestFilterBuilder:ow.default,PostgrestTransformBuilder:lw.default,PostgrestBuilder:cw.default,PostgrestError:uw.default};const{PostgrestClient:zN,PostgrestQueryBuilder:pE,PostgrestFilterBuilder:mE,PostgrestTransformBuilder:gE,PostgrestBuilder:vE,PostgrestError:yE}=BN;class qN{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $N="2.15.5",HN=`realtime-js/${$N}`,WN="1.0.0",h1=1e4,VN=1e3,GN=100;var Qc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qc||(Qc={}));var Jn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Jn||(Jn={}));var Bi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bi||(Bi={}));var f1;(function(e){e.websocket="websocket"})(f1||(f1={}));var co;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(co||(co={}));class KN{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const l=r.decode(t.slice(a,a+s));a=a+s;const c=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class dw{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(cn||(cn={}));const Z2=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=JN(a,e,t,i),s),{})},JN=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?hw(s,a):p1(a)},hw=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return XN(t,n)}switch(e){case cn.bool:return YN(t);case cn.float4:case cn.float8:case cn.int2:case cn.int4:case cn.int8:case cn.numeric:case cn.oid:return ZN(t);case cn.json:case cn.jsonb:return QN(t);case cn.timestamp:return ek(t);case cn.abstime:case cn.date:case cn.daterange:case cn.int4range:case cn.int8range:case cn.money:case cn.reltime:case cn.text:case cn.time:case cn.timestamptz:case cn.timetz:case cn.tsrange:case cn.tstzrange:return p1(t);default:return p1(t)}},p1=e=>e,YN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ZN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},XN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>hw(t,o))}return e},ek=e=>typeof e=="string"?e.replace(" ","T"):e,fw=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Op{constructor(t,n,r={},i=h1){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Q2;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Q2||(Q2={}));class Xc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xc.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Xc.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xc.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(c,f)=>{a[c]||(l[c]=f)}),this.map(a,(c,f)=>{const g=s[c];if(g){const y=f.map(A=>A.presence_ref),p=g.map(A=>A.presence_ref),k=f.filter(A=>p.indexOf(A.presence_ref)<0),_=g.filter(A=>y.indexOf(A.presence_ref)<0);k.length>0&&(o[c]=k),_.length>0&&(l[c]=_)}else o[c]=f}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const f=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),f.length>0){const g=t[o].map(p=>p.presence_ref),y=f.filter(p=>g.indexOf(p.presence_ref)<0);t[o].unshift(...y)}r(o,f,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const f=l.map(g=>g.presence_ref);c=c.filter(g=>f.indexOf(g.presence_ref)<0),t[o]=c,i(o,c,l),c.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var X2;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(X2||(X2={}));var eu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(eu||(eu={}));var Is;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Is||(Is={}));class Mm{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Op(this,Bi.join,this.params,this.timeout),this.rejoinTimer=new dw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bi.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Xc(this),this.broadcastEndpointURL=fw(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Jn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[eu.PRESENCE]&&this.bindings[eu.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},y={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Is.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Is.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var k;if(this.socket.setAuth(),p===void 0){t==null||t(Is.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,A=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,x=[];for(let b=0;b<A;b++){const N=_[b],{filter:{event:C,schema:K,table:T,filter:M}}=N,I=p&&p[b];if(I&&I.event===C&&I.schema===K&&I.table===T&&I.filter===M)x.push(Object.assign(Object.assign({},N),{id:I.id}));else{this.unsubscribe(),this.state=Jn.errored,t==null||t(Is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Is.SUBSCRIBED);return}}).receive("error",p=>{this.state=Jn.errored,t==null||t(Is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Jn.joined&&t===eu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Jn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Op(this,Bi.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Op(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>GN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:f}=Bi;if(r&&[o,l,c,f].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var k,_,A;return((k=p.filter)===null||k===void 0?void 0:k.event)==="*"||((A=(_=p.filter)===null||_===void 0?void 0:_.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===a}).map(p=>p.callback(y,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var k,_,A,x,b,N;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const C=p.id,K=(k=p.filter)===null||k===void 0?void 0:k.event;return C&&((_=n.ids)===null||_===void 0?void 0:_.includes(C))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const C=(b=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:_,table:A,commit_timestamp:x,type:b,errors:N}=k;y=Object.assign(Object.assign({},{schema:_,table:A,commit_timestamp:x,eventType:b,new:{},old:{},errors:N}),this._getPayloadRecords(k))}p.callback(y,r)})}_isClosed(){return this.state===Jn.closed}_isJoined(){return this.state===Jn.joined}_isJoining(){return this.state===Jn.joining}_isLeaving(){return this.state===Jn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Mm.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bi.close,{},t)}_onError(t){this._on(Bi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Z2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Z2(t.columns,t.old_record)),n}}const Fp=()=>{},qd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tk=[1e3,2e3,5e3,1e4],nk=1e4,rk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ik{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=h1,this.transport=null,this.heartbeatIntervalMs=qd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fp,this.ref=0,this.reconnectTimer=null,this.logger=Fp,this.conn=null,this.sendBuffer=[],this.serializer=new KN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Pa(async()=>{const{default:o}=await Promise.resolve().then(()=>Vl);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${f1.websocket}`,this.httpEndpoint=fw(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:WN}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qc.connecting:return co.Connecting;case Qc.open:return co.Open;case Qc.closing:return co.Closing;default:return co.Closed}}isConnected(){return this.connectionState()===co.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Mm(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([rk],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:HN};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Bi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new dw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,l,c,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:h1,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:qd.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Fp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:g=>tk[g-1]||nk,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(g,y)=>y(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Um extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Yn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sk extends Um{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m1 extends Um{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var ak=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};const pw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},ok=()=>ak(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pa(()=>Promise.resolve().then(()=>Vl),void 0)).Response:Response}),g1=e=>{if(Array.isArray(e))return e.map(n=>g1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=g1(r)}),t},lk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Io=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};const Dp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ck=(e,t,n)=>Io(void 0,void 0,void 0,function*(){const r=yield ok();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new sk(Dp(i),s,a))}).catch(i=>{t(new m1(Dp(i),i))}):t(new m1(Dp(e),e))}),uk=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(lk(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Mu(e,t,n,r,i,s){return Io(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,uk(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>ck(l,o,r))})})}function Jh(e,t,n,r){return Io(this,void 0,void 0,function*(){return Mu(e,"GET",t,n,r)})}function is(e,t,n,r,i){return Io(this,void 0,void 0,function*(){return Mu(e,"POST",t,r,i,n)})}function v1(e,t,n,r,i){return Io(this,void 0,void 0,function*(){return Mu(e,"PUT",t,r,i,n)})}function dk(e,t,n,r){return Io(this,void 0,void 0,function*(){return Mu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function mw(e,t,n,r,i){return Io(this,void 0,void 0,function*(){return Mu(e,"DELETE",t,r,i,n)})}var Er=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};const hk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fk{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=pw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Er(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},e5),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(n),f=this._getFinalPath(c),g=yield(t=="PUT"?v1:is)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yn(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Er(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:e5.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType);const g=yield v1(this.fetch,o.toString(),l,{headers:f});return{data:{path:s,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Yn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Er(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield is(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Um("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Er(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Er(this,void 0,void 0,function*(){try{return{data:{path:(yield is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Er(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield is(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Er(this,void 0,void 0,function*(){try{const i=yield is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yn(i))return{data:null,error:i};throw i}})}download(t,n){return Er(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Jh(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yn(o))return{data:null,error:o};throw o}})}info(t){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Jh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:g1(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}exists(t){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield dk(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r)&&r instanceof m1){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(t){return Er(this,void 0,void 0,function*(){try{return{data:yield mw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Er(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},hk),n),{prefix:t||""});return{data:yield is(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Er(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield is(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const pk="2.12.1",mk={"X-Client-Info":`storage-js/${pk}`};var Jo=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};class gk{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},mk),n),this.fetch=pw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Jo(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yn(t))return{data:null,error:t};throw t}})}getBucket(t){return Jo(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Jo(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Jo(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Jo(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Jo(this,void 0,void 0,function*(){try{return{data:yield mw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yn(n))return{data:null,error:n};throw n}})}}class vk extends gk{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new fk(this.url,this.headers,t,this.fetch)}}const yk="2.57.4";let Bc="";typeof Deno<"u"?Bc="deno":typeof document<"u"?Bc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bc="react-native":Bc="node";const xk={"X-Client-Info":`supabase-js-${Bc}/${yk}`},wk={headers:xk},bk={schema:"public"},_k={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nk={};var kk=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};const Sk=e=>{let t;return e?t=e:typeof fetch>"u"?t=ew:t=fetch,(...n)=>t(...n)},jk=()=>typeof Headers>"u"?tw:Headers,Ak=(e,t,n)=>{const r=Sk(n),i=jk();return(s,a)=>kk(void 0,void 0,void 0,function*(){var o;const l=(o=yield t())!==null&&o!==void 0?o:e;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:c}))})};var Ek=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};function Lk(e){return e.endsWith("/")?e:e+"/"}function Ck(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:f,global:g}=t,y={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),o),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ek(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Pk(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Lk(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const gw="2.71.1",il=30*1e3,y1=3,Mp=y1*il,Tk="http://localhost:9999",Ik="supabase.auth.token",Rk={"X-Client-Info":`gotrue-js/${gw}`},x1="X-Supabase-Api-Version",vw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ok=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Fk=10*60*1e3;class Bm extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function bt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Dk extends Bm{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Mk(e){return bt(e)&&e.name==="AuthApiError"}class yw extends Bm{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class qa extends Bm{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ha extends qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Uk(e){return bt(e)&&e.name==="AuthSessionMissingError"}class $d extends qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hd extends qa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wd extends qa{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bk(e){return bt(e)&&e.name==="AuthImplicitGrantRedirectError"}class t5 extends qa{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class w1 extends qa{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Up(e){return bt(e)&&e.name==="AuthRetryableFetchError"}class n5 extends qa{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class b1 extends qa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r5=` 	
\r=`.split(""),zk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<r5.length;t+=1)e[r5[t].charCodeAt(0)]=-2;for(let t=0;t<Yh.length;t+=1)e[Yh[t].charCodeAt(0)]=t;return e})();function i5(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Yh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Yh[r]),t.queuedBits-=6}}function xw(e,t,n){const r=zk[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function s5(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{Hk(a,r,n)};for(let a=0;a<e.length;a+=1)xw(e.charCodeAt(a),i,s);return t.join("")}function qk(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $k(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}qk(r,t)}}function Hk(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Wk(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)xw(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Vk(e){const t=[];return $k(e,n=>t.push(n)),new Uint8Array(t)}function Gk(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>i5(i,n,r)),i5(null,n,r),t.join("")}function Kk(e){return Math.round(Date.now()/1e3)+e}function Jk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Di=()=>typeof window<"u"&&typeof document<"u",ro={tested:!1,writable:!1},ww=()=>{if(!Di())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ro.tested)return ro.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ro.tested=!0,ro.writable=!0}catch{ro.tested=!0,ro.writable=!1}return ro.writable};function Yk(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const bw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Zk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",sl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},io=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ca=async(e,t)=>{await e.removeItem(t)};class Sf{constructor(){this.promise=new Sf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Sf.promiseConstructor=Promise;function Bp(e){const t=e.split(".");if(t.length!==3)throw new b1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Ok.test(t[r]))throw new b1("JWT not in base64url format");return{header:JSON.parse(s5(t[0])),payload:JSON.parse(s5(t[1])),signature:Wk(t[2]),raw:{header:t[0],payload:t[1]}}}async function Qk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Xk(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function eS(e){return("0"+e.toString(16)).substr(-2)}function tS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,eS).join("")}async function nS(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function rS(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await nS(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yo(e,t,n=!1){const r=tS();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await sl(e,`${t}-code-verifier`,i);const s=await rS(r);return[s,r===s?"plain":"s256"]}const iS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sS(e){const t=e.headers.get(x1);if(!t||!t.match(iS))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function aS(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function oS(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zo(e){if(!lS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function a5(e){return JSON.parse(JSON.stringify(e))}var cS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const oo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uS=[502,503,504];async function o5(e){var t;if(!Zk(e))throw new w1(oo(e),0);if(uS.includes(e.status))throw new w1(oo(e),e.status);let n;try{n=await e.json()}catch(s){throw new yw(oo(s),s)}let r;const i=sS(e);if(i&&i.getTime()>=vw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new n5(oo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ha}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new n5(oo(n),e.status,n.weak_password.reasons);throw new Dk(oo(n),e.status||500,r)}const dS=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Pt(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[x1]||(s[x1]=vw["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await hS(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function hS(e,t,n,r,i,s){const a=dS(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new w1(oo(l),0)}if(o.ok||await o5(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await o5(l)}}function Ps(e){var t;let n=null;gS(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Kk(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function l5(e){const t=Ps(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function va(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fS(e){return{data:e,error:null}}function pS(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=cS(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function mS(e){return e}function gS(e){return e.access_token&&e.refresh_token&&e.expires_in}const qp=["global","local","others"];var vS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class yS{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=bw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=qp[0]){if(qp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qp.join(", ")}`);try{return await Pt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:va})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=vS(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:pS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Pt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:va})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},f=await Pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:mS});if(f.error)throw f.error;const g=await f.json(),y=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(k.split(";")[1].split("=")[1]);c[`${A}Page`]=_}),c.total=parseInt(y)),{data:Object.assign(Object.assign({},g),c),error:null}}catch(c){if(bt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Zo(t);try{return await Pt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:va})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Zo(t);try{return await Pt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:va})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Zo(t);try{return await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:va})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Zo(t.userId);try{const{data:n,error:r}=await Pt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Zo(t.userId),Zo(t.id);try{return{data:await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}}function c5(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function xS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qo={debug:!!(globalThis&&ww()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _w extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wS extends _w{}async function bS(e,t,n){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wS(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}xS();const _S={url:Tk,storageKey:Ik,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function u5(e,t,n){return await n()}const Xo={};class Nu{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nu.nextInstanceID,Nu.nextInstanceID+=1,this.instanceID>0&&Di()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},_S),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new yS({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bw(i.fetch),this.lock=i.lock||u5,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Di()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=bS:this.lock=u5,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ww()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c5(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=c5(this.memoryStorage)),Di()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gw}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Yk(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Di()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Bk(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return bt(n)?{error:n}:{error:new yw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ps}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:f,password:g,options:y}=t;let p=null,k=null;this.flowType==="pkce"&&([p,k]=await Yo(this.storage,this.storageKey)),s=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:p,code_challenge_method:k},xform:Ps})}else if("phone"in t){const{phone:f,password:g,options:y}=t;s=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ps})}else throw new Hd("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:l5})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:l5})}else throw new Hd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new $d}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,s,a,o,l,c,f,g,y,p;let k,_;if("message"in t)k=t.message,_=t.signature;else{const{chain:A,wallet:x,statement:b,options:N}=t;let C;if(Di())if(typeof x=="object")C=x;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))C=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=x}const K=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const T=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),b?{statement:b}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)k=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${K.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((g=(f=N==null?void 0:N.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||g===void 0)&&g.length?["Resources",...N.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await C.signMessage(new TextEncoder().encode(k),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:A,error:x}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Gk(_)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ps});if(x)throw x;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new $d}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:x})}catch(A){if(bt(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const n=await io(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ps});if(await ca(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new $d}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(bt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ps}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new $d}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,f=null;this.flowType==="pkce"&&([c,f]=await Yo(this.storage,this.storageKey));const{error:g}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:f},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:f}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f}}throw new Hd("You must provide either an email or phone number.")}catch(o){if(bt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await Pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ps});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Yo(this.storage,this.storageKey)),await Pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:fS})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ha;const{error:i}=await Pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(bt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await Pt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await Pt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Hd("You must provide either an email or phone number and a type")}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Mp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await io(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=zp()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,f)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,f))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:va}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ha}:await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:va})})}catch(n){if(bt(n))return Uk(n)&&(await this._removeSession(),await ca(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ha;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Yo(this.storage,this.storageKey));const{data:c,error:f}=await Pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:va});if(f)throw f;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ha;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=Bp(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(bt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ha;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Di())throw new Wd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new t5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new t5("No code detected.");const{data:b,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new Wd("No session defined in URL");const f=Math.round(Date.now()/1e3),g=parseInt(o);let y=f+g;l&&(y=parseInt(l));const p=y-f;p*1e3<=il&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${g}s`);const k=y-g;f-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,f):f-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,f);const{data:_,error:A}=await this._getUser(s);if(A)throw A;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:y,refresh_token:a,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await io(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(Mk(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await ca(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Jk(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Yo(this.storage,this.storageKey,!0));try{return await Pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,f;const{data:g,error:y}=s;if(y)throw y;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Pt(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(c=g.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Di()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(bt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await Pt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Xk(async i=>(i>0&&await Qk(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ps})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Up(s)&&Date.now()+a-r<il})}catch(r){if(this._debug(n,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Di()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await io(this.storage,this.storageKey);if(i&&this.userStorage){let a=await io(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await sl(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:zp()}else if(i&&!i.user&&!i.user){const a=await io(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await ca(this.storage,this.storageKey+"-user"),await sl(this.storage,this.storageKey,i)):i.user=zp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mp;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Mp}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Up(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Sf;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new ha;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),bt(s)){const a={session:null,error:s};return Up(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await sl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=a5(i);await sl(this.storage,this.storageKey,s)}else{const i=a5(n);await sl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ca(this.storage,this.storageKey),await ca(this.storage,this.storageKey+"-code-verifier"),await ca(this.storage,this.storageKey+"-user"),this.userStorage&&await ca(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Di()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),il);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/il);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${il}ms, refresh threshold is ${y1} ticks`),i<=y1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _w)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Di()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Yo(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Pt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await Pt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:o}=await Pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Bp(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const f=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+Fk>i)return r;const{data:s,error:a}=await Pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:k}=await this.getSession();if(k||!p.session)return{data:null,error:k};r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=Bp(r);n!=null&&n.allowExpired||aS(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const f=oS(i.alg),g=await crypto.subtle.importKey("jwk",c,f,!0,["verify"]);if(!await crypto.subtle.verify(f,g,a,Vk(`${o}.${l}`)))throw new b1("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}Nu.nextInstanceID=0;const NS=Nu;class kS extends NS{constructor(t){super(t)}}var SS=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{c(r.next(f))}catch(g){a(g)}}function l(f){try{c(r.throw(f))}catch(g){a(g)}}function c(f){f.done?s(f.value):i(f.value).then(o,l)}c((r=r.apply(e,t||[])).next())})};class jS{constructor(t,n,r){var i,s,a;this.supabaseUrl=t,this.supabaseKey=n;const o=Pk(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:bk,realtime:Nk,auth:Object.assign(Object.assign({},_k),{storageKey:l}),global:wk},f=Ck(r??{},c);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=Ak(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new zN(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new vk(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new xN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return SS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c},f,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kS({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:o,lock:l,debug:c,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ik(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const AS=(e,t,n)=>new jS(e,t,n);function ES(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ES()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nw="https://rhijyaoguokspapkwtrt.supabase.co",LS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJoaWp5YW9ndW9rc3BhcGt3dHJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2OTMxMjEsImV4cCI6MjA4MTI2OTEyMX0.zCdmURwjFvIEN4nYHLD6Rh2fIq9zl5LTocgM07VC7EM",Ee=AS(Nw,LS);if(typeof window<"u"){const e=window;if(e.supabase=Ee,!Ee.auth||typeof Ee.auth.getSession!="function")throw new Error("[SUPABASE] auth client not initialized correctly");const t=Nw,n=(()=>{try{return new URL(t).hostname.split(".")[0]}catch{return null}})();e.__SUPABASE_URL=t,e.__SUPABASE_PROJECT_REF=n,console.log("[DEV] __SUPABASE_URL",t),console.log("[DEV] __SUPABASE_PROJECT_REF",n),console.log("[DEV] Supabase client exposed:",Ee),console.log("[DEV] Auth object:",Ee.auth),console.log("[DEV] Has getSession?",typeof Ee.auth.getSession)}const kw=async(e,t)=>{const n=t.name.split(".").pop(),r=`${e}/logo.${n}`,{error:i}=await Ee.storage.from("profile-logos").upload(r,t,{upsert:!0,contentType:t.type});if(i)throw i;const{data:s}=Ee.storage.from("profile-logos").getPublicUrl(r);return s.publicUrl},CS=({onLogin:e,onSignupClick:t})=>{const[n,r]=me.useState(""),[i,s]=me.useState(""),[a,o]=me.useState(!1),[l,c]=me.useState(""),f=n.length>0&&i.length>0,g=async()=>{if(f){o(!0),c("");try{await Ee.auth.signOut({scope:"global"}),await new Promise(k=>setTimeout(k,100));const{data:y,error:p}=await Ee.auth.signInWithPassword({email:n,password:i});if(p)throw p;y.user&&e(y.user.id,y.user.email||n)}catch(y){console.error("Login error:",y),c(y instanceof Error?y.message:"Login failed")}finally{o(!1)}}};return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] flex flex-col h-[100dvh]",children:[d.jsx(Tr,{title:"SMASH",transparent:!0}),d.jsxs("div",{className:"px-6 mt-10 flex flex-col gap-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-[32px] font-bold text-slate-900 mb-2 tracking-tight leading-tight",children:"Welcome back"}),d.jsx("p",{className:"text-[15px] text-slate-400 font-bold uppercase tracking-wider",children:"Sign in to manage jobs"})]}),l&&d.jsx("div",{className:"px-4 py-3 bg-red-50 border border-red-100 rounded-[14px] animate-in slide-in-from-top-2 duration-300",children:d.jsx("p",{className:"text-[13px] text-red-600 font-bold leading-relaxed",children:l})}),d.jsxs("div",{className:"flex flex-col gap-5",children:[d.jsx(jt,{label:"Email",type:"email",placeholder:"your@email.com",value:n,onChange:y=>r(y.target.value),autoFocus:!0,disabled:a}),d.jsx(jt,{label:"Password",type:"password",placeholder:"",value:i,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&g(),disabled:a})]})]}),d.jsxs("div",{className:"px-6 py-8 mt-auto",children:[d.jsx(Et,{fullWidth:!0,variant:"primary",disabled:!f||a,onClick:g,children:a?"Authenticating...":"Sign In"}),d.jsxs("button",{onClick:t,disabled:a,className:"w-full mt-6 text-[13px] text-slate-400 font-bold uppercase tracking-widest hover:text-slate-900 transition-colors disabled:opacity-50",children:["New user? ",d.jsx("span",{className:"text-slate-900 underline underline-offset-4",children:"Sign up"})]})]})]})},PS=({onSignup:e,onBack:t})=>{const[n,r]=me.useState(""),[i,s]=me.useState(""),[a,o]=me.useState(""),[l,c]=me.useState(!1),[f,g]=me.useState(""),y=i===a&&i.length>0,p=n.length>0&&i.length>=6&&y,k=async()=>{if(p){c(!0),g("");try{await Ee.auth.signOut({scope:"global"}),await new Promise(x=>setTimeout(x,100));const{data:_,error:A}=await Ee.auth.signUp({email:n,password:i});if(A)throw A;_.user&&e(_.user.id,_.user.email||n)}catch(_){console.error("Signup error:",_),g(_ instanceof Error?_.message:"Signup failed")}finally{c(!1)}}};return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] flex flex-col h-[100dvh]",children:[d.jsx(Tr,{left:d.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center -ml-2 text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})}),title:"Create Account"}),d.jsxs("div",{className:"px-8 mt-10 flex flex-col gap-10",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-[40px] font-black text-slate-900 mb-3 tracking-tighter leading-none",children:"Get Started"}),d.jsx("p",{className:"text-[16px] text-slate-400 font-bold uppercase tracking-wider",children:"Join SMASH to automate your quotes"})]}),f&&d.jsx("div",{className:"px-5 py-4 bg-red-50 border border-red-100 rounded-[20px] animate-in slide-in-from-top-2 duration-300",children:d.jsx("p",{className:"text-[14px] text-red-600 font-bold leading-relaxed",children:f})}),d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsx(jt,{label:"Email",type:"email",placeholder:"your@email.com",value:n,onChange:_=>r(_.target.value),autoFocus:!0,disabled:l}),d.jsx(jt,{label:"Password",type:"password",placeholder:"6+ characters",value:i,onChange:_=>s(_.target.value),disabled:l}),d.jsx(jt,{label:"Confirm Password",type:"password",placeholder:"Re-enter password",value:a,onChange:_=>o(_.target.value),onKeyDown:_=>_.key==="Enter"&&k(),disabled:l}),a.length>0&&!y&&d.jsx("p",{className:"text-[13px] text-red-500 font-bold uppercase tracking-wider ml-1 -mt-4 animate-pulse",children:"Passwords do not match"})]})]}),d.jsx("div",{className:"px-8 py-10 mt-auto",children:d.jsx(Et,{fullWidth:!0,variant:"primary",disabled:!p||l,onClick:k,className:"shadow-2xl shadow-slate-900/20",children:l?"Creating Account...":"Sign Up"})})]})},TS=["Carpenter","Painter","Electrician","Plumber","Gardener","Cleaner","Handyman","Builder","Tiler","Roofer","Other"],IS=["AUD","USD","GBP","EUR","NZD"],RS=["Due on receipt","Net 7","Net 14","Net 30","Net 60","Net 90"],OS=({onComplete:e})=>{const[t,n]=me.useState(1),[r,i]=me.useState(!1),[s,a]=me.useState(!1),o=me.useRef(null),[l,c]=me.useState(""),[f,g]=me.useState(""),[y,p]=me.useState(""),[k,_]=me.useState(null),[A,x]=me.useState("AUD"),[b,N]=me.useState("85"),[C,K]=me.useState(""),[T,M]=me.useState("10"),[I,S]=me.useState("0"),[z,j]=me.useState(""),[R,$]=me.useState(""),[J,X]=me.useState(""),[le,de]=me.useState("Net 30"),[Z,se]=me.useState(""),[ve,fe]=me.useState(""),[P,q]=me.useState(""),[G,Y]=me.useState(""),Q=l.length>0&&f.length>0,ae=parseFloat(b)>0,te=z.length>0,ge=()=>{var F;(F=o.current)==null||F.click()},xe=async F=>{var Ie;const re=(Ie=F.target.files)==null?void 0:Ie[0];if(re){if(!re.type.startsWith("image/")){alert("Please select an image file");return}if(re.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{a(!0);const{data:{user:ze}}=await Ee.auth.getUser();if(!ze)return;const we=await kw(ze.id,re);_(we)}catch(ze){console.error("Error uploading logo:",ze),alert("Failed to upload logo. Please try again.")}finally{a(!1)}}},je=()=>{t===1&&Q?n(2):t===2&&ae?n(3):t===3&&te&&We()},Ue=()=>{t>1&&n(t-1)},Te=async()=>{try{i(!0);const{data:{user:F}}=await Ee.auth.getUser();if(!F)return;const{data:re}=await Ee.from("users").select("org_id").eq("id",F.id).maybeSingle();if(!(re!=null&&re.org_id))return;const{error:Ie}=await Ee.from("organizations").update({name:F.email||"My Business",trade_type:"General"}).eq("id",re.org_id);if(Ie)throw Ie;e()}catch(F){console.error("Failed to skip onboarding:",F),e()}finally{i(!1)}},We=async()=>{try{i(!0);const{data:{user:F}}=await Ee.auth.getUser();if(!F)return;const{data:re}=await Ee.from("users").select("org_id").eq("id",F.id).maybeSingle();if(!(re!=null&&re.org_id))return;const{error:Ie}=await Ee.from("organizations").update({name:l,trade_type:f,phone:y||null,logo_url:k,business_address:z||null,abn:R||null,website:J||null,default_payment_terms:le,bank_name:Z||null,account_name:ve||null,bsb_routing:P||null,account_number:G||null}).eq("id",re.org_id);if(Ie)throw Ie;const{data:ze}=await Ee.from("user_pricing_profiles").select("id").eq("user_id",F.id).maybeSingle();if(ze){const{error:we}=await Ee.from("user_pricing_profiles").update({hourly_rate_cents:Math.round(parseFloat(b)*100),callout_fee_cents:C?Math.round(parseFloat(C)*100):0,travel_rate_cents:null,travel_is_time:!0,materials_markup_percent:parseFloat(I),default_tax_rate:parseFloat(T),default_currency:A,default_unit_preference:"metric",bunnings_run_enabled:!0,bunnings_run_minutes_default:60,workday_hours_default:8}).eq("id",ze.id);if(we)throw we}else{const{error:we}=await Ee.from("user_pricing_profiles").insert({org_id:re.org_id,user_id:F.id,hourly_rate_cents:Math.round(parseFloat(b)*100),callout_fee_cents:C?Math.round(parseFloat(C)*100):0,travel_rate_cents:null,travel_is_time:!0,materials_markup_percent:parseFloat(I),default_tax_rate:parseFloat(T),default_currency:A,default_unit_preference:"metric",bunnings_run_enabled:!0,bunnings_run_minutes_default:60,workday_hours_default:8});if(we)throw we}e()}catch(F){console.error("Failed to save onboarding data:",F),alert("Failed to save your information. Please try again.")}finally{i(!1)}};return d.jsxs(hr,{showNav:!1,className:"bg-surface flex flex-col",children:[d.jsx(Tr,{title:`Step ${t} of 3`,left:t>1?d.jsx("button",{onClick:Ue,className:"p-2 -ml-2 text-primary",children:d.jsx(hs,{size:24})}):void 0,right:d.jsx("button",{onClick:Te,disabled:r,className:"text-[14px] font-medium text-secondary hover:text-primary transition-colors disabled:opacity-50",children:"Skip"}),transparent:!0}),d.jsxs("div",{className:"px-6 mt-8 flex flex-col gap-6 flex-1",children:[d.jsx("div",{className:"flex gap-2 mb-4",children:[1,2,3].map(F=>d.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${F<=t?"bg-brand":"bg-border"}`},F))}),t===1&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-2",children:[d.jsx("h1",{className:"text-[32px] font-bold text-primary mb-2 tracking-tight",children:"Your Business"}),d.jsx("p",{className:"text-[15px] text-secondary",children:"Set up your business details so we can create professional quotes instantly"})]}),d.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:xe,className:"hidden"}),d.jsxs("div",{className:"flex flex-col items-center py-4",children:[d.jsxs("button",{onClick:ge,disabled:s,className:"relative w-24 h-24 rounded-full bg-brand/10 flex items-center justify-center cursor-pointer hover:bg-brand/20 transition-colors group disabled:cursor-wait disabled:opacity-50",children:[k?d.jsx("img",{src:k,alt:"Business logo",className:"w-full h-full rounded-full object-cover"}):d.jsx(To,{size:40,className:"text-brand"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Yx,{size:28,className:"text-white"})})]}),d.jsx("p",{className:"text-[13px] text-tertiary mt-2",children:"Upload logo (optional)"})]}),d.jsx(jt,{label:"Business Name",placeholder:"e.g. Smith Carpentry",value:l,onChange:F=>c(F.target.value),autoFocus:!0}),d.jsx(ph,{label:"What trade are you in?",options:TS,value:f,onChange:F=>g(F.target.value)}),d.jsx(jt,{label:"Phone Number",type:"tel",placeholder:"e.g. 0400 000 000",value:y,onChange:F=>p(F.target.value),onKeyDown:F=>F.key==="Enter"&&je()})]}),t===2&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-2",children:[d.jsx("h1",{className:"text-[32px] font-bold text-primary mb-2 tracking-tight",children:"Your Rates"}),d.jsx("p",{className:"text-[15px] text-secondary",children:"We'll use these rates to calculate quotes automatically for every job"})]}),d.jsx(ph,{label:"Currency",options:IS,value:A,onChange:F=>x(F.target.value)}),d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-[13px] text-blue-800",children:[d.jsx("strong",{children:"Note:"})," All rates are tax-exclusive. Tax will be calculated and shown separately on quotes."]}),d.jsx(jt,{label:"Your Hourly Rate",type:"text",inputMode:"decimal",placeholder:"85",value:b,onChange:F=>N(F.target.value),autoFocus:!0}),d.jsx(jt,{label:"Callout Fee (optional)",type:"text",inputMode:"decimal",placeholder:"0",value:C,onChange:F=>K(F.target.value)}),d.jsx(jt,{label:"Tax Rate %",type:"number",step:"0.1",placeholder:"10",value:T,onChange:F=>M(F.target.value)}),d.jsx(jt,{label:"Materials Markup %",type:"number",step:"0.1",placeholder:"0",value:I,onChange:F=>S(F.target.value),onKeyDown:F=>F.key==="Enter"&&je()})]}),t===3&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-2",children:[d.jsx("h1",{className:"text-[32px] font-bold text-primary mb-2 tracking-tight",children:"Invoice Details"}),d.jsx("p",{className:"text-[15px] text-secondary",children:"Final step! Add your business and payment details for professional invoices"})]}),d.jsx(jt,{label:"Business Address",placeholder:"123 Main St, City, State",value:z,onChange:F=>j(F.target.value),autoFocus:!0}),d.jsx(jt,{label:"ABN / Business Number (optional)",placeholder:"12 345 678 901",value:R,onChange:F=>$(F.target.value)}),d.jsx(jt,{label:"Website (optional)",type:"url",placeholder:"https://example.com",value:J,onChange:F=>X(F.target.value)}),d.jsx(ph,{label:"Payment Terms",options:RS,value:le,onChange:F=>de(F.target.value)}),d.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-[13px] text-amber-800 mb-2",children:[d.jsx("strong",{children:"Optional:"})," Add bank details to get paid faster"]}),d.jsx(jt,{label:"Bank Name (optional)",placeholder:"e.g., Commonwealth Bank",value:Z,onChange:F=>se(F.target.value)}),d.jsx(jt,{label:"Account Name (optional)",placeholder:"e.g., John Smith Trading",value:ve,onChange:F=>fe(F.target.value)}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(jt,{label:"BSB (optional)",placeholder:"123-456",value:P,onChange:F=>q(F.target.value)}),d.jsx(jt,{label:"Account # (optional)",placeholder:"12345678",value:G,onChange:F=>Y(F.target.value),onKeyDown:F=>F.key==="Enter"&&je()})]})]})]}),d.jsx("div",{className:"p-6 mt-auto bg-surface",children:d.jsx(Et,{fullWidth:!0,variant:"primary",disabled:t===1&&!Q||t===2&&!ae||t===3&&!te||r,onClick:je,children:r?"Saving...":t===3?"Start Creating Quotes":"Continue"})})]})},jf=({onClick:e})=>d.jsx("button",{onClick:e,className:"w-[64px] h-[64px] rounded-full bg-brand text-white shadow-float flex items-center justify-center hover:bg-brandHover hover:scale-105 active:scale-95 transition-all duration-300",children:d.jsx(Kh,{size:30,strokeWidth:2.5})});function wi(e){return e==null||isNaN(e)?0:e}function gt(e,t){const n=wi(e);return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0}).format(n)}function Da(e){var f,g;if(!e)return{materialsTotal:0,labourTotal:0,feesTotal:0,subtotal:0,gst:0,total:0};const t=Array.isArray(e.materials)?e.materials.reduce((y,p)=>{const k=wi(p==null?void 0:p.quantity),_=wi(p==null?void 0:p.rate);return y+k*_},0):0,n=wi((f=e.labour)==null?void 0:f.hours),r=wi((g=e.labour)==null?void 0:g.rate),i=n*r,s=Array.isArray(e.additionalFees)?e.additionalFees.reduce((y,p)=>y+wi(p==null?void 0:p.amount),0):0,a=t+i+s,o=wi(e.gstRate),l=a*o,c=a+l;return{materialsTotal:t,labourTotal:i,feesTotal:s,subtotal:a,gst:l,total:c}}function _1(e){var c,f;if(!e)return{materialsTotal:0,labourTotal:0,subtotal:0,gst:0,total:0};const t=Array.isArray(e.materials)?e.materials.reduce((g,y)=>{const p=wi(y==null?void 0:y.quantity),k=wi(y==null?void 0:y.rate);return g+p*k},0):0,n=wi((c=e.labour)==null?void 0:c.hours),r=wi((f=e.labour)==null?void 0:f.rate),i=n*r,s=t+i,a=wi(e.gstRate),o=s*a,l=s+o;return{materialsTotal:t,labourTotal:i,subtotal:s,gst:o,total:l}}function Uu(e){return!e||typeof e!="string"||e.trim()===""?"??":e.trim().split(" ").map(t=>t[0]).filter(Boolean).slice(0,2).join("").toUpperCase()||"??"}const FS=({status:e})=>d.jsx("div",{className:"bg-gray-50 px-2 py-1 rounded-full",children:d.jsx("span",{className:"text-[11px] font-semibold text-secondary",children:e})}),DS=({estimates:e,onNewEstimate:t,onSelectEstimate:n,activeTab:r,onTabChange:i,onProfileClick:s,onQuickRecord:a})=>{const[o,l]=me.useState(""),[c,f]=me.useState("all"),[g,y]=me.useState(!1);me.useEffect(()=>{f("all"),y(!1)},[r]);let p=r==="estimates"?e.filter(A=>A.status===yt.DRAFT||A.status===yt.SENT):e.filter(A=>A.status===yt.APPROVED||A.status===yt.PAID);if(c!=="all"&&(p=p.filter(A=>A.status===c)),o.trim()){const A=o.toLowerCase();p=p.filter(x=>x.clientName.toLowerCase().includes(A)||x.jobTitle.toLowerCase().includes(A)||x.clientAddress&&x.clientAddress.toLowerCase().includes(A))}const k=A=>{const x=r==="estimates"?e.filter(b=>b.status===yt.DRAFT||b.status===yt.SENT):e.filter(b=>b.status===yt.APPROVED||b.status===yt.PAID);return A==="all"?x.length:x.filter(b=>b.status===A).length},_=()=>r==="estimates"?["all",yt.DRAFT,yt.SENT]:["all",yt.APPROVED,yt.PAID];return d.jsxs(hr,{activeTab:r,onTabChange:i,className:"bg-[#FAFAFA] relative pb-32",fab:d.jsx(jf,{onClick:a||t}),children:[d.jsx(Tr,{title:"SMASH",right:s&&d.jsx("button",{onClick:s,className:"w-10 h-10 flex items-center justify-center text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(To,{size:22})})}),d.jsx("div",{className:"px-5 mt-4",children:d.jsxs("div",{className:"flex gap-2 relative",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(Rm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{type:"text",placeholder:"Search by name, job, or address...",value:o,onChange:A=>l(A.target.value),className:"w-full pl-11 pr-4 py-3 rounded-full bg-white shadow-sm border border-gray-100 text-[15px] text-primary placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-accent/20"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>y(!g),className:`w-12 h-12 flex items-center justify-center rounded-full transition-all ${c!=="all"?"bg-accent text-white shadow-md":"bg-white text-secondary border border-gray-100"}`,children:d.jsx(Qx,{size:20})}),g&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),d.jsx("div",{className:"absolute right-0 top-14 w-56 bg-white rounded-2xl shadow-xl border border-gray-100 py-2 z-50",children:_().map(A=>{const x=k(A),b=c===A,N=A==="all"?"All":A;return d.jsxs("button",{onClick:()=>{f(A),y(!1)},className:`
                          w-full flex items-center justify-between px-4 py-3 text-[14px] font-medium transition-all
                          ${b?"bg-accent/10 text-accent":"text-secondary hover:bg-gray-50"}
                        `,children:[d.jsx("span",{children:N}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-[12px] font-bold ${b?"text-accent":"text-tertiary"}`,children:x}),b&&d.jsx(_u,{size:16,className:"text-accent"})]})]},A)})})]})]})]})}),d.jsx("div",{className:"px-5 flex flex-col gap-3 mt-4",children:p.length===0?d.jsx("div",{className:"flex flex-col items-center justify-center h-[60vh] text-secondary opacity-60",children:d.jsx("p",{className:"font-medium tracking-tight",children:o.trim()?"No matches found":`No ${r==="estimates"?"estimates":"invoices"} yet`})}):p.map(A=>d.jsxs("div",{onClick:()=>n(A.id),className:"bg-white rounded-[20px] p-5 shadow-sm border border-slate-100/50 active:scale-[0.98] active:bg-slate-50/50 transition-all duration-200 cursor-pointer flex flex-col gap-3",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-3.5 flex-1 min-w-0 pr-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-[12px] font-bold text-slate-900 tracking-tight flex-shrink-0 border border-slate-100",children:Uu(A.clientName)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-[15px] font-bold text-slate-900 tracking-tight leading-tight mb-0.5 truncate",children:A.jobTitle}),d.jsx("p",{className:"text-[13px] text-slate-500 truncate font-medium",children:A.clientName}),d.jsxs("p",{className:"text-[11px] text-tertiary mt-0.5",children:["Estimate #",A.id.substring(0,6).toUpperCase()]})]})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx(FS,{status:A.status})})]}),d.jsx("div",{className:"h-px bg-slate-50 w-full"}),d.jsxs("div",{className:"flex justify-between items-center px-0.5",children:[d.jsx("span",{className:"text-[12px] font-semibold text-slate-400",children:A.date}),d.jsx("span",{className:"text-[16px] font-extrabold text-slate-900 tracking-tight",children:gt(Da(A).total)})]})]},A.id))})]})},MS=({status:e})=>{const t={draft:"Draft",issued:"Issued",sent:"Sent",paid:"Paid",overdue:"Overdue"};return d.jsx("div",{className:"bg-gray-50 px-2 py-1 rounded-full",children:d.jsx("span",{className:"text-[11px] font-semibold text-secondary",children:t[e]})})},US=({invoices:e,onNewEstimate:t,onSelectInvoice:n,activeTab:r,onTabChange:i,onProfileClick:s,onQuickRecord:a})=>{const[o,l]=me.useState(""),[c,f]=me.useState("all"),[g,y]=me.useState(!1);let p=e;if(c!=="all"&&(p=p.filter(_=>(_.status==="issued"?"sent":_.status)===c)),o.trim()){const _=o.toLowerCase();p=p.filter(A=>A.clientName.toLowerCase().includes(_)||A.jobTitle.toLowerCase().includes(_)||A.invoiceNumber.toLowerCase().includes(_)||A.clientAddress&&A.clientAddress.toLowerCase().includes(_))}const k=_=>_==="all"?e.length:e.filter(A=>(A.status==="issued"?"sent":A.status)===_).length;return d.jsxs(hr,{activeTab:r,onTabChange:i,className:"bg-[#FAFAFA] relative pb-32",fab:d.jsx(jf,{onClick:a||t}),children:[d.jsx(Tr,{title:"SMASH",right:s&&d.jsx("button",{onClick:s,className:"w-10 h-10 flex items-center justify-center text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(To,{size:22})})}),d.jsx("div",{className:"px-5 mt-4",children:d.jsxs("div",{className:"flex gap-2 relative",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(Rm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{type:"text",placeholder:"Search by name, job, invoice #...",value:o,onChange:_=>l(_.target.value),className:"w-full pl-11 pr-4 py-3 rounded-full bg-white shadow-sm border border-gray-100 text-[15px] text-primary placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-accent/20"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>y(!g),className:`w-12 h-12 flex items-center justify-center rounded-full transition-all ${c!=="all"?"bg-accent text-white shadow-md":"bg-white text-secondary border border-gray-100"}`,children:d.jsx(Qx,{size:20})}),g&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)}),d.jsx("div",{className:"absolute right-0 top-14 w-56 bg-white rounded-2xl shadow-xl border border-gray-100 py-2 z-50",children:["all","draft","sent","paid","overdue"].map(_=>{const A=k(_),x=c===_,b={all:"All Invoices",draft:"Draft",sent:"Sent",paid:"Paid",overdue:"Overdue"};return d.jsxs("button",{onClick:()=>{f(_),y(!1)},className:`
                          w-full flex items-center justify-between px-4 py-3 text-[14px] font-medium transition-all
                          ${x?"bg-accent/10 text-accent":"text-secondary hover:bg-gray-50"}
                        `,children:[d.jsx("span",{children:b[_]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-[12px] font-bold ${x?"text-accent":"text-tertiary"}`,children:A}),x&&d.jsx(_u,{size:16,className:"text-accent"})]})]},_)})})]})]})]})}),d.jsx("div",{className:"px-5 flex flex-col gap-3 mt-4",children:p.length===0?d.jsx("div",{className:"flex flex-col items-center justify-center h-[60vh] text-secondary opacity-60",children:d.jsx("p",{className:"font-medium tracking-tight",children:o.trim()?"No matches found":"No invoices yet"})}):p.map(_=>d.jsxs("div",{onClick:()=>n(_.id),className:"bg-white rounded-[20px] p-5 shadow-card hover:scale-[0.99] transition-transform duration-200 cursor-pointer flex flex-col gap-3",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 pr-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-[12px] font-bold text-gray-900 tracking-tight flex-shrink-0",children:Uu(_.clientName)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-[15px] font-bold text-primary tracking-tight leading-none mb-1 truncate",children:_.jobTitle}),d.jsx("p",{className:"text-[13px] text-secondary truncate",children:_.clientName}),d.jsxs("p",{className:"text-[11px] text-tertiary mt-0.5",children:["Invoice #",_.invoiceNumber]})]})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx(MS,{status:_.status})})]}),d.jsx("div",{className:"h-px bg-gray-50 w-full"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[12px] font-medium text-tertiary",children:_.date}),d.jsx("span",{className:"text-[15px] font-bold text-primary tracking-tight",children:gt(_1(_).total)})]})]},_.id))})]})},BS=({customers:e,onNewEstimate:t,onSelectCustomer:n,activeTab:r,onTabChange:i,onProfileClick:s})=>{const[a,o]=me.useState("");let l=e;if(a.trim()){const c=a.toLowerCase();l=l.filter(f=>f.name.toLowerCase().includes(c)||f.email&&f.email.toLowerCase().includes(c)||f.phone&&f.phone.toLowerCase().includes(c)||f.company_name&&f.company_name.toLowerCase().includes(c))}return d.jsxs(hr,{activeTab:r,onTabChange:i,className:"bg-[#FAFAFA] relative pb-32",fab:d.jsx(jf,{onClick:t}),children:[d.jsx(Tr,{title:"SMASH",right:s&&d.jsx("button",{onClick:s,className:"w-10 h-10 flex items-center justify-center text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(To,{size:22})})}),d.jsx("div",{className:"px-5 mt-4",children:d.jsxs("div",{className:"relative",children:[d.jsx(Rm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{type:"text",placeholder:"Search customers...",value:a,onChange:c=>o(c.target.value),className:"w-full pl-11 pr-4 py-3 rounded-full bg-white shadow-sm border border-gray-100 text-[15px] text-primary placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-accent/20"})]})}),d.jsx("div",{className:"px-5 mt-4 mb-2",children:d.jsxs("p",{className:"text-[12px] text-tertiary font-semibold uppercase tracking-wider",children:[l.length," ",l.length===1?"Customer":"Customers"]})}),d.jsx("div",{className:"px-5 flex flex-col gap-2.5",children:l.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh]",children:[d.jsx("div",{className:"w-20 h-20 rounded-[24px] bg-slate-50 flex items-center justify-center mb-4 border border-slate-100",children:d.jsx(Xx,{size:32,className:"text-slate-300"})}),d.jsx("p",{className:"text-[16px] text-slate-900 font-bold",children:a.trim()?"No customers found":"No customers yet"}),d.jsx("p",{className:"text-[14px] text-slate-400 mt-1",children:a.trim()?"Try a different search term":"Customers will appear here as you create quotes"})]}):l.map(c=>{const f=c.company_name||c.email||c.phone;return d.jsxs("div",{onClick:()=>n(c.id),className:"bg-white rounded-[20px] p-4 shadow-sm border border-slate-100/50 active:scale-[0.98] active:bg-slate-50/50 transition-all duration-200 cursor-pointer flex items-center gap-4",children:[d.jsx("div",{className:"w-11 h-11 rounded-full bg-slate-50 flex items-center justify-center text-[14px] font-bold text-slate-900 tracking-tight flex-shrink-0 border border-slate-100",children:Uu(c.name)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-[15px] font-bold text-slate-900 tracking-tight leading-tight mb-0.5",children:c.name}),f&&d.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.company_name&&d.jsx("p",{className:"text-[13px] text-slate-500 font-medium truncate",children:c.company_name}),c.email&&d.jsx("p",{className:"text-[12px] text-slate-400 truncate font-medium",children:c.email}),c.phone&&!c.email&&d.jsx("p",{className:"text-[12px] text-slate-400 font-medium",children:c.phone})]})]})]},c.id)})})]})},zS=({customer:e,quotes:t,invoices:n,onBack:r,onNewQuote:i,onSelectQuote:s,onSelectInvoice:a,onDeleteCustomer:o})=>{var T;const[l,c]=me.useState(!1),[f,g]=me.useState(!1),y=t.filter(M=>M.clientName===e.name),p=n.filter(M=>M.clientName===e.name),k=y.length,_=[...y.map(M=>Da(M).total),...p.map(M=>_1(M).total)].reduce((M,I)=>M+I,0),A=[...y,...p].sort((M,I)=>new Date(I.date).getTime()-new Date(M.date).getTime()),x=(T=A[0])==null?void 0:T.date,b=()=>{if(g(!1),k>0){alert("Cannot delete customer with existing quotes or invoices");return}c(!0)},N=()=>{o==null||o(e.id),c(!1)},C=({status:M})=>{const I={Draft:"bg-gray-100 text-gray-600",Sent:"bg-blue-50 text-blue-600",Approved:"bg-green-50 text-green-600",Paid:"bg-green-50 text-green-600",draft:"bg-gray-100 text-gray-600",issued:"bg-blue-50 text-blue-600",sent:"bg-blue-50 text-blue-600",paid:"bg-green-50 text-green-600",overdue:"bg-red-50 text-red-600"},S=typeof M=="string"?M.charAt(0).toUpperCase()+M.slice(1):M;return d.jsx("div",{className:`px-2.5 py-1 rounded-full ${I[M]}`,children:d.jsx("span",{className:"text-[11px] font-semibold",children:S})})},K=e.email||e.phone;return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] relative pb-32",children:[d.jsx(Tr,{left:d.jsx("button",{onClick:r,className:"w-10 h-10 flex items-center justify-center -ml-2 text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})}),right:d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>g(!f),className:"w-10 h-10 flex items-center justify-center text-secondary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(lN,{size:20})}),f&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),d.jsx("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-1 z-50",children:d.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-4 py-3 text-[14px] font-medium text-red-600 hover:bg-red-50 transition-colors",children:[d.jsx(Om,{size:16}),"Delete Customer"]})})]})]})}),d.jsxs("div",{className:"px-6 flex flex-col gap-6 pb-6",children:[d.jsxs("div",{className:"flex flex-col items-center pt-2",children:[d.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center shrink-0 text-[28px] font-bold tracking-tight mb-5 bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-700 shadow-sm",children:Uu(e.name)}),d.jsx("h1",{className:"text-[28px] font-bold text-primary tracking-tight leading-none mb-2 w-full px-4 text-center line-clamp-2",children:e.name}),e.company_name&&d.jsx("p",{className:"text-[15px] text-secondary font-medium w-full px-4 text-center line-clamp-1",children:e.company_name}),K&&d.jsxs("div",{className:"flex flex-col items-center gap-1 mt-3 w-full px-4",children:[e.email&&d.jsx("p",{className:"text-[13px] text-tertiary text-center line-clamp-1 w-full",children:e.email}),e.phone&&d.jsx("p",{className:"text-[13px] text-tertiary text-center",children:e.phone})]})]}),d.jsx("div",{className:"bg-white rounded-[20px] p-5 shadow-sm",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-[13px] text-secondary font-semibold uppercase tracking-wide",children:"Jobs"}),d.jsx("span",{className:"text-[24px] font-bold text-primary tracking-tight",children:k})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-[13px] text-secondary font-semibold uppercase tracking-wide",children:"Revenue"}),d.jsx("span",{className:"text-[20px] font-bold text-primary tracking-tight",children:gt(_)})]}),d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsx("span",{className:"text-[13px] text-secondary font-semibold uppercase tracking-wide",children:"Last Job"}),d.jsx("span",{className:"text-[15px] font-bold text-primary tracking-tight",children:x||""})]})]})}),d.jsxs(Et,{variant:"primary",fullWidth:!0,onClick:()=>i(e.id),className:"shadow-md",children:[d.jsx(wo,{size:20,className:"mr-2"}),"New Quote"]}),k===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:d.jsx(wo,{size:28,className:"text-gray-400"})}),d.jsx("p",{className:"text-[15px] text-secondary font-medium",children:"No quotes or invoices yet"}),d.jsx("p",{className:"text-[13px] text-tertiary mt-1",children:"Create your first quote to get started"})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-[13px] font-bold text-secondary uppercase tracking-wider",children:"Recent Activity"}),d.jsxs("span",{className:"text-[12px] text-tertiary font-medium",children:[k," total"]})]}),d.jsx("div",{className:"flex flex-col gap-2",children:A.map(M=>{if("jobTitle"in M&&"status"in M&&typeof M.status!="string"){const S=M;return d.jsxs("div",{onClick:()=>s(S.id),className:"bg-white rounded-[16px] p-4 shadow-sm hover:shadow-md hover:scale-[1.01] transition-all duration-200 cursor-pointer border border-gray-50",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[d.jsx("h3",{className:"text-[15px] font-bold text-primary tracking-tight leading-tight mb-1 truncate",children:S.jobTitle}),d.jsx("p",{className:"text-[12px] text-tertiary font-medium",children:"Quote"})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx(C,{status:S.status})})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[13px] text-tertiary font-medium",children:S.date}),d.jsx("span",{className:"text-[17px] font-bold text-primary tracking-tight",children:gt(Da(S).total)})]})]},S.id)}else{const S=M;return d.jsxs("div",{onClick:()=>a(S.id),className:"bg-white rounded-[16px] p-4 shadow-sm hover:shadow-md hover:scale-[1.01] transition-all duration-200 cursor-pointer border border-gray-50",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[d.jsx("h3",{className:"text-[15px] font-bold text-primary tracking-tight leading-tight mb-1 truncate",children:S.jobTitle}),d.jsxs("p",{className:"text-[12px] text-tertiary font-medium",children:["Invoice #",S.invoiceNumber]})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx(C,{status:S.status})})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[13px] text-tertiary font-medium",children:S.date}),d.jsx("span",{className:"text-[17px] font-bold text-primary tracking-tight",children:gt(_1(S).total)})]})]},S.id)}})})]})]}),l&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm",onClick:()=>c(!1)}),d.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-[32px] p-6 shadow-2xl max-w-[390px] mx-auto",children:[d.jsx("h3",{className:"text-[20px] font-bold text-primary mb-2",children:"Delete Customer?"}),d.jsxs("p",{className:"text-[15px] text-secondary leading-relaxed mb-6",children:["This will permanently delete ",d.jsx("span",{className:"font-semibold",children:e.name}),". This action cannot be undone."]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Et,{variant:"secondary",fullWidth:!0,onClick:()=>c(!1),children:"Cancel"}),d.jsx(Et,{variant:"danger",fullWidth:!0,onClick:N,children:"Delete"})]})]})]})]})},pn=({children:e,className:t="",onClick:n,noPadding:r=!1})=>d.jsx("div",{className:`bg-white rounded-[20px] shadow-sm border border-slate-100/50 ${r?"":"p-5"} ${t} ${n?"active:scale-[0.98] active:bg-slate-50/50 transition-all duration-200 cursor-pointer":""}`,onClick:n,children:e}),qS=({estimate:e,onBack:t,onSave:n,onSend:r})=>{const[i,s]=me.useState(e.jobTitle),[a,o]=me.useState(e.clientName),[l,c]=me.useState(e.clientAddress||""),[f,g]=me.useState(e.clientEmail||""),[y,p]=me.useState(e.clientPhone||""),[k,_]=me.useState(e.timeline),[A,x]=me.useState(e.scopeOfWork),[b,N]=me.useState(""),[C,K]=me.useState(e.materials),[T,M]=me.useState(null),[I,S]=me.useState(null),[z,j]=me.useState(null),[R,$]=me.useState({});me.useEffect(()=>{(async()=>{try{const{data:{user:re}}=await Ee.auth.getUser();if(!re)return;S(re.id);const{data:Ie}=await Ee.from("users").select("org_id").eq("id",re.id).maybeSingle();Ie!=null&&Ie.org_id&&M(Ie.org_id)}catch(re){console.warn("[EditEstimate] Failed to load org/user for catalog save (non-fatal):",re)}})()},[]);const[J,X]=me.useState(e.labour.hours.toString()),[le,de]=me.useState(e.labour.rate.toString()),[Z,se]=me.useState(e.additionalFees||[]),ve=e.gstRate||.1,fe=me.useMemo(()=>{const re=C.reduce((Ye,et)=>Ye+et.quantity*et.rate,0),Ie=(parseFloat(J)||0)*(parseFloat(le)||0),ze=Z.reduce((Ye,et)=>Ye+(et.amount||0),0),we=re+Ie+ze,Xe=we*ve,$e=we+Xe;return{materialsTotal:re,labourTotal:Ie,feesTotal:ze,subtotal:we,gst:Xe,total:$e}},[C,J,le,Z,ve]),P=()=>{b.trim()&&(x([...A,b.trim()]),N(""))},q=re=>{x(A.filter((Ie,ze)=>ze!==re))},G=()=>{K([...C,{id:Date.now().toString(),name:"",quantity:1,unit:"unit",rate:0}])},Y=(re,Ie,ze)=>{K(C.map(we=>we.id===re?{...we,[Ie]:ze}:we)),Ie==="rate"&&$(we=>({...we,[re]:!0}))},Q=re=>{K(C.filter(Ie=>Ie.id!==re))},ae=async re=>{if(!T||!I){alert("Unable to save to catalog yet (missing org/user). Try again in a moment.");return}if(!re.name||re.name.trim().length===0){alert("Please enter a material name before saving.");return}const Ie=Math.round((re.rate||0)*100);if(!Number.isFinite(Ie)||Ie<=0){alert("Please enter a non-zero price before saving.");return}try{j(re.id);const{data:ze,error:we}=await Ee.from("material_catalog_items").insert({org_id:T,created_by_user_id:I,name:re.name.trim(),category:"other",unit:(re.unit||"unit").trim()||"unit",unit_price_cents:Ie,notes:"Saved from quote (user correction)"}).select("id").single();if(we){console.error("[EditEstimate] Save to catalog failed:",we),alert(`Failed to save to catalog: ${we.message}`);return}K(Xe=>Xe.map($e=>$e.id===re.id?{...$e,catalogItemId:(ze==null?void 0:ze.id)??null,pricingSource:"catalog",pricingNotes:"Saved to your catalog.",needsReview:!1}:$e)),$(Xe=>({...Xe,[re.id]:!1}))}catch(ze){console.error("[EditEstimate] Exception saving to catalog:",ze),alert("Failed to save to catalog. Please try again.")}finally{j(null)}},te=re=>{const Ie=re.pricingSource||(typeof re.pricingNotes=="string"&&re.pricingNotes.toLowerCase().startsWith("ai estimated")?"ai":typeof re.pricingNotes=="string"&&re.pricingNotes.toLowerCase().startsWith("default price")?"fallback":re.catalogItemId?"catalog":void 0);return Ie==="catalog"?d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-primary/[0.08] text-primary text-[11px] font-bold",children:[d.jsx(_u,{size:14}),"Catalog"]}):Ie==="ai"?d.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-slate-900/[0.06] text-slate-700 text-[11px] font-bold",children:"[?] AI estimated"}):Ie==="fallback"?d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-amber-500/[0.12] text-amber-700 text-[11px] font-bold",children:[d.jsx(G2,{size:14}),"Default"]}):re.needsReview?d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-amber-500/[0.12] text-amber-700 text-[11px] font-bold",children:[d.jsx(G2,{size:14}),"Needs review"]}):null},ge=(re="")=>{se([...Z,{id:Date.now().toString(),description:re||"",amount:0}])},xe=(re,Ie,ze)=>{se(Z.map(we=>we.id===re?{...we,[Ie]:ze}:we))},je=re=>{se(Z.filter(Ie=>Ie.id!==re))},Ue=[{label:"Bunnings Run",description:"Bunnings run / materials pickup"},{label:"Travel",description:"Travel fee"},{label:"Callout",description:"Callout fee"},{label:"Waste",description:"Waste disposal"}],Te=()=>({...e,jobTitle:i,clientName:a,clientAddress:l,clientEmail:f,clientPhone:y,timeline:k,scopeOfWork:A,materials:C,labour:{hours:parseFloat(J)||0,rate:parseFloat(le)||0},additionalFees:Z}),We=()=>{n(Te())},F=()=>{r?r(Te()):n(Te())};return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] pb-40",children:[d.jsx(Tr,{title:"Edit Quote",left:d.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center -ml-2 text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})})}),d.jsx("div",{className:"px-5 pt-1 pb-1",children:d.jsx("p",{className:"text-[11px] text-slate-400 font-bold text-center uppercase tracking-[0.15em]",children:"Draft Review"})}),d.jsxs("div",{className:"flex flex-col mt-4",children:[d.jsx(ri,{title:"Job Details",children:d.jsxs(pn,{className:"flex flex-col gap-5",children:[d.jsx(jt,{label:"Job Title",value:i,onChange:re=>s(re.target.value),placeholder:"e.g. Deck Replacement"}),d.jsx(jt,{label:"Client Name",value:a,onChange:re=>o(re.target.value),placeholder:"Customer name"}),d.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[d.jsx(jt,{label:"Client Email",type:"email",value:f,onChange:re=>g(re.target.value),placeholder:"customer@email.com"}),d.jsx(jt,{label:"Client Phone",type:"tel",value:y,onChange:re=>p(re.target.value),placeholder:"0400 000 000"})]}),d.jsx(jt,{label:"Site Address",value:l,onChange:re=>c(re.target.value),placeholder:"Job site address"}),d.jsx(jt,{label:"Timeline",placeholder:"e.g. 2-3 days",value:k,onChange:re=>_(re.target.value)})]})}),d.jsx(ri,{title:"Scope of Work",children:d.jsxs(pn,{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-3",children:[A.length===0&&d.jsx("p",{className:"text-sm text-slate-400 italic font-medium ml-1",children:"No scope items yet."}),A.map((re,Ie)=>d.jsxs("div",{className:"flex gap-3 items-center bg-slate-50/50 p-3.5 rounded-[14px] border border-slate-100",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accentDark shrink-0"}),d.jsx("span",{className:"flex-1 text-[14px] text-slate-900 font-bold leading-tight",children:re}),d.jsx("button",{onClick:()=>q(Ie),className:"p-1.5 text-slate-300 hover:text-red-500 transition-colors",children:d.jsx(Rp,{size:16})})]},Ie))]}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(jt,{placeholder:"Add scope item...",value:b,onChange:re=>N(re.target.value),onKeyPress:re=>re.key==="Enter"&&P(),className:"!bg-white"}),d.jsx("button",{onClick:P,className:"w-12 h-[54px] rounded-[14px] bg-slate-900 text-white flex items-center justify-center shrink-0 active:scale-95 transition-transform",children:d.jsx(wo,{size:20})})]})]})}),d.jsx(ri,{title:"Materials",children:d.jsxs(pn,{className:"flex flex-col gap-5",children:[C.length===0&&d.jsx("p",{className:"text-sm text-slate-400 italic font-medium ml-1",children:"No materials added yet."}),d.jsx("div",{className:"flex flex-col gap-6",children:C.map(re=>d.jsxs("div",{className:"flex flex-col gap-4 pb-6 border-b border-slate-50 last:border-0 last:pb-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx(jt,{label:"Item Name",value:re.name,onChange:Ie=>Y(re.id,"name",Ie.target.value),placeholder:"e.g. Merbau Decking"})}),d.jsx("button",{onClick:()=>Q(re.id),className:"mt-9 p-1.5 text-slate-300 hover:text-red-500 transition-colors",children:d.jsx(Rp,{size:18})})]}),d.jsxs("div",{className:"flex items-center justify-between px-0.5",children:[d.jsx("div",{className:"flex items-center gap-2",children:te(re)}),(re.pricingSource==="ai"||re.pricingSource==="fallback"||re.needsReview)&&d.jsx("button",{disabled:z===re.id,onClick:()=>ae(re),className:"text-[11px] font-bold uppercase tracking-wider text-slate-500 hover:text-slate-900 disabled:opacity-50",children:z===re.id?"Saving":"Save to catalog"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsx(jt,{label:"Qty",type:"number",value:re.quantity,onChange:Ie=>Y(re.id,"quantity",parseFloat(Ie.target.value)||0)}),d.jsx(jt,{label:"Unit",value:re.unit,onChange:Ie=>Y(re.id,"unit",Ie.target.value),placeholder:"m, ea"}),d.jsx(jt,{label:"Rate ($)",type:"number",value:re.rate,onChange:Ie=>Y(re.id,"rate",parseFloat(Ie.target.value)||0)})]}),(re.pricingNotes||R[re.id]&&(re.pricingSource==="ai"||re.pricingSource==="fallback"))&&d.jsx("div",{className:"px-1",children:d.jsx("p",{className:"text-[12px] text-slate-500 leading-relaxed",children:re.pricingNotes||"Price edited. Consider saving this to your catalog for next time."})}),d.jsxs("div",{className:"text-right px-1",children:[d.jsx("span",{className:"text-[12px] font-bold text-slate-400 uppercase tracking-widest mr-2",children:"Line Total:"}),d.jsx("span",{className:"text-[15px] font-bold text-slate-900",children:gt(re.quantity*re.rate)})]})]},re.id))}),d.jsxs(Et,{variant:"outline",onClick:G,className:"mt-1 border-dashed h-[50px]",children:[d.jsx(wo,{size:18,className:"mr-2"}),"Add Material"]})]})}),d.jsx(ri,{title:"Labour",children:d.jsxs(pn,{className:"flex flex-col gap-5",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[d.jsx(jt,{label:"Hours",type:"number",value:J,onChange:re=>X(re.target.value),placeholder:"0"}),d.jsx(jt,{label:"Rate ($/hr)",type:"number",value:le,onChange:re=>de(re.target.value),placeholder:"85"})]}),d.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3.5 rounded-[14px] border border-slate-100",children:[d.jsx("span",{className:"text-[12px] font-bold text-slate-400 uppercase tracking-widest",children:"Labour Total"}),d.jsx("span",{className:"text-[16px] font-bold text-slate-900",children:gt(fe.labourTotal)})]})]})}),d.jsx(ri,{title:"Additional Fees",children:d.jsxs(pn,{className:"flex flex-col gap-5",children:[Z.length===0&&d.jsx("p",{className:"text-sm text-slate-400 italic font-medium ml-1",children:"No additional fees added."}),d.jsx("div",{className:"flex flex-col gap-5",children:Z.map(re=>d.jsxs("div",{className:"flex items-end gap-3 bg-slate-50/50 p-3.5 rounded-[16px] border border-slate-100 relative",children:[d.jsx("div",{className:"flex-1",children:d.jsx(jt,{label:"Description",value:re.description,onChange:Ie=>xe(re.id,"description",Ie.target.value),placeholder:"e.g. Travel fee",className:"!bg-white h-[48px]"})}),d.jsx("div",{className:"w-24",children:d.jsx(jt,{label:"Amount",type:"number",value:re.amount,onChange:Ie=>xe(re.id,"amount",parseFloat(Ie.target.value)||0),className:"!bg-white h-[48px]"})}),d.jsx("button",{onClick:()=>je(re.id),className:"p-1.5 text-slate-300 hover:text-red-500 transition-colors mb-1",children:d.jsx(Rp,{size:18})})]},re.id))}),d.jsx("div",{className:"flex flex-wrap gap-2 px-0.5",children:Ue.map(re=>d.jsxs("button",{onClick:()=>ge(re.description),className:"px-3.5 py-2 text-[11px] font-bold uppercase tracking-wider bg-slate-50 hover:bg-slate-100 text-slate-500 rounded-full border border-slate-100 transition-all active:scale-95",children:["+ ",re.label]},re.label))}),d.jsxs(Et,{variant:"outline",onClick:()=>ge(),className:"mt-1 border-dashed h-[50px]",children:[d.jsx(wo,{size:18,className:"mr-2"}),"Add Custom Fee"]})]})}),d.jsx(ri,{title:"Final Quote",children:d.jsxs(pn,{className:"!p-0 overflow-hidden border border-slate-200 shadow-lg",children:[d.jsxs("div",{className:"p-6 flex flex-col gap-3 bg-white",children:[d.jsxs("div",{className:"flex justify-between text-[14px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:[d.jsx("span",{children:"Summary"}),d.jsx("span",{children:"Amount"})]}),d.jsxs("div",{className:"flex justify-between text-[15px] font-medium text-slate-600",children:[d.jsx("span",{children:"Materials"}),d.jsx("span",{className:"text-slate-900",children:gt(fe.materialsTotal)})]}),d.jsxs("div",{className:"flex justify-between text-[15px] font-medium text-slate-600",children:[d.jsx("span",{children:"Labour"}),d.jsx("span",{className:"text-slate-900",children:gt(fe.labourTotal)})]}),fe.feesTotal>0&&d.jsxs("div",{className:"flex justify-between text-[15px] font-medium text-slate-600",children:[d.jsx("span",{children:"Fees"}),d.jsx("span",{className:"text-slate-900",children:gt(fe.feesTotal)})]}),d.jsx("div",{className:"h-px bg-slate-50 w-full my-1"}),d.jsxs("div",{className:"flex justify-between text-[15px] font-bold text-slate-900",children:[d.jsx("span",{children:"Subtotal"}),d.jsx("span",{children:gt(fe.subtotal)})]}),d.jsxs("div",{className:"flex justify-between text-[15px] font-medium text-slate-500",children:[d.jsx("span",{children:"GST (10%)"}),d.jsx("span",{children:gt(fe.gst)})]})]}),d.jsxs("div",{className:"bg-slate-900 p-6 flex justify-between items-center",children:[d.jsx("span",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-[0.2em]",children:"Total"}),d.jsx("span",{className:"text-[28px] font-bold text-white tracking-tight",children:gt(fe.total)})]})]})})]}),d.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] p-5 bg-white/95 backdrop-blur-xl border-t border-slate-100 z-50 pb-safe",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Et,{variant:"secondary",className:"flex-1 font-bold uppercase tracking-widest text-[12px]",onClick:We,children:"Draft"}),d.jsxs(Et,{variant:"primary",className:"flex-[2] font-bold uppercase tracking-widest text-[12px]",onClick:F,children:[d.jsx(tN,{size:16,className:"mr-1.5"}),"Send Quote"]})]})})]})};function Zt(e){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(e)}var Wi=Uint8Array,si=Uint16Array,zm=Int32Array,qm=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$m=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d5=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sw=function(e,t){for(var n=new si(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new zm(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},jw=Sw(qm,2),$S=jw.b,N1=jw.r;$S[28]=258,N1[258]=28;var HS=Sw($m,0),h5=HS.r,k1=new si(32768);for(var mn=0;mn<32768;++mn){var ua=(mn&43690)>>1|(mn&21845)<<1;ua=(ua&52428)>>2|(ua&13107)<<2,ua=(ua&61680)>>4|(ua&3855)<<4,k1[mn]=((ua&65280)>>8|(ua&255)<<8)>>1}var tu=function(e,t,n){for(var r=e.length,i=0,s=new si(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new si(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new si(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],f=t-e[i],g=a[e[i]-1]++<<f,y=g|(1<<f)-1;g<=y;++g)o[k1[g]>>l]=c}else for(o=new si(r),i=0;i<r;++i)e[i]&&(o[i]=k1[a[e[i]-1]++]>>15-e[i]);return o},Ao=new Wi(288);for(var mn=0;mn<144;++mn)Ao[mn]=8;for(var mn=144;mn<256;++mn)Ao[mn]=9;for(var mn=256;mn<280;++mn)Ao[mn]=7;for(var mn=280;mn<288;++mn)Ao[mn]=8;var Zh=new Wi(32);for(var mn=0;mn<32;++mn)Zh[mn]=5;var WS=tu(Ao,9,0),VS=tu(Zh,5,0),Aw=function(e){return(e+7)/8|0},GS=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Wi(e.subarray(t,n))},Ls=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Ic=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},$p=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:Lw,l:0};if(i==1){var a=new Wi(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(K,T){return K.f-T.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,f=1,g=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};f!=i-1;)o=n[n[c].f<n[g].f?c++:g++],l=n[c!=f&&n[c].f<n[g].f?c++:g++],n[f++]={s:-1,f:o.f+l.f,l:o,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var p=new si(y+1),k=S1(n[f-1],p,0);if(k>t){var r=0,_=0,A=k-t,x=1<<A;for(s.sort(function(T,M){return p[M.s]-p[T.s]||T.f-M.f});r<i;++r){var b=s[r].s;if(p[b]>t)_+=x-(1<<k-p[b]),p[b]=t;else break}for(_>>=A;_>0;){var N=s[r].s;p[N]<t?_-=1<<t-p[N]++-1:++r}for(;r>=0&&_;--r){var C=s[r].s;p[C]==t&&(--p[C],++_)}k=t}return{t:new Wi(p),l:k}},S1=function(e,t,n){return e.s==-1?Math.max(S1(e.l,t,n+1),S1(e.r,t,n+1)):t[e.s]=n},f5=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new si(++t),r=0,i=e[0],s=1,a=function(l){n[r++]=l},o=1;o<=t;++o)if(e[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[o]}return{c:n.subarray(0,r),n:t}},Rc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Ew=function(e,t,n){var r=n.length,i=Aw(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},p5=function(e,t,n,r,i,s,a,o,l,c,f){Ls(t,f++,n),++i[256];for(var g=$p(i,15),y=g.t,p=g.l,k=$p(s,15),_=k.t,A=k.l,x=f5(y),b=x.c,N=x.n,C=f5(_),K=C.c,T=C.n,M=new si(19),I=0;I<b.length;++I)++M[b[I]&31];for(var I=0;I<K.length;++I)++M[K[I]&31];for(var S=$p(M,7),z=S.t,j=S.l,R=19;R>4&&!z[d5[R-1]];--R);var $=c+5<<3,J=Rc(i,Ao)+Rc(s,Zh)+a,X=Rc(i,y)+Rc(s,_)+a+14+3*R+Rc(M,z)+2*M[16]+3*M[17]+7*M[18];if(l>=0&&$<=J&&$<=X)return Ew(t,f,e.subarray(l,l+c));var le,de,Z,se;if(Ls(t,f,1+(X<J)),f+=2,X<J){le=tu(y,p,0),de=y,Z=tu(_,A,0),se=_;var ve=tu(z,j,0);Ls(t,f,N-257),Ls(t,f+5,T-1),Ls(t,f+10,R-4),f+=14;for(var I=0;I<R;++I)Ls(t,f+3*I,z[d5[I]]);f+=3*R;for(var fe=[b,K],P=0;P<2;++P)for(var q=fe[P],I=0;I<q.length;++I){var G=q[I]&31;Ls(t,f,ve[G]),f+=z[G],G>15&&(Ls(t,f,q[I]>>5&127),f+=q[I]>>12)}}else le=WS,de=Ao,Z=VS,se=Zh;for(var I=0;I<o;++I){var Y=r[I];if(Y>255){var G=Y>>18&31;Ic(t,f,le[G+257]),f+=de[G+257],G>7&&(Ls(t,f,Y>>23&31),f+=qm[G]);var Q=Y&31;Ic(t,f,Z[Q]),f+=se[Q],Q>3&&(Ic(t,f,Y>>5&8191),f+=$m[Q])}else Ic(t,f,le[Y]),f+=de[Y]}return Ic(t,f,le[256]),f+de[256]},KS=new zm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lw=new Wi(0),JS=function(e,t,n,r,i,s){var a=s.z||e.length,o=new Wi(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),c=s.l,f=(s.r||0)&7;if(t){f&&(l[0]=s.r>>3);for(var g=KS[t-1],y=g>>13,p=g&8191,k=(1<<n)-1,_=s.p||new si(32768),A=s.h||new si(k+1),x=Math.ceil(n/3),b=2*x,N=function(We){return(e[We]^e[We+1]<<x^e[We+2]<<b)&k},C=new zm(25e3),K=new si(288),T=new si(32),M=0,I=0,S=s.i||0,z=0,j=s.w||0,R=0;S+2<a;++S){var $=N(S),J=S&32767,X=A[$];if(_[J]=X,A[$]=J,j<=S){var le=a-S;if((M>7e3||z>24576)&&(le>423||!c)){f=p5(e,l,0,C,K,T,I,z,R,S-R,f),z=M=I=0,R=S;for(var de=0;de<286;++de)K[de]=0;for(var de=0;de<30;++de)T[de]=0}var Z=2,se=0,ve=p,fe=J-X&32767;if(le>2&&$==N(S-fe))for(var P=Math.min(y,le)-1,q=Math.min(32767,S),G=Math.min(258,le);fe<=q&&--ve&&J!=X;){if(e[S+Z]==e[S+Z-fe]){for(var Y=0;Y<G&&e[S+Y]==e[S+Y-fe];++Y);if(Y>Z){if(Z=Y,se=fe,Y>P)break;for(var Q=Math.min(fe,Y-2),ae=0,de=0;de<Q;++de){var te=S-fe+de&32767,ge=_[te],xe=te-ge&32767;xe>ae&&(ae=xe,X=te)}}}J=X,X=_[J],fe+=J-X&32767}if(se){C[z++]=268435456|N1[Z]<<18|h5[se];var je=N1[Z]&31,Ue=h5[se]&31;I+=qm[je]+$m[Ue],++K[257+je],++T[Ue],j=S+Z,++M}else C[z++]=e[S],++K[e[S]]}}for(S=Math.max(S,j);S<a;++S)C[z++]=e[S],++K[e[S]];f=p5(e,l,c,C,K,T,I,z,R,S-R,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=A,s.p=_,s.i=S,s.w=j)}else{for(var S=s.w||0;S<a+c;S+=65535){var Te=S+65535;Te>=a&&(l[f/8|0]=c,Te=a),f=Ew(l,f+1,e.subarray(S,Te))}s.i=a}return GS(o,0,r+Aw(f)+i)},Cw=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},YS=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Wi(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return JS(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},Pw=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ZS=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Cw();i.p(t.dictionary),Pw(e,2,i.d())}};function j1(e,t){t||(t={});var n=Cw();n.p(e);var r=YS(e,t,t.dictionary?6:2,4);return ZS(r,t),Pw(r,r.length-4,n.d()),r}var QS=typeof TextDecoder<"u"&&new TextDecoder,XS=0;try{QS.decode(Lw,{stream:!0}),XS=1}catch{}function e6(e){if(Array.isArray(e))return e}function t6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function m5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n6(e,t){if(e){if(typeof e=="string")return m5(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m5(e,t):void 0}}function r6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g5(e,t){return e6(e)||t6(e,t)||n6(e,t)||r6()}function v5(e,t="utf8"){return new TextDecoder(t).decode(e)}const i6=new TextEncoder;function s6(e){return i6.encode(e)}const a6=1024*8,o6=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Hp={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Hm{constructor(t=a6,n={}){Yt(this,"buffer");Yt(this,"byteLength");Yt(this,"byteOffset");Yt(this,"length");Yt(this,"offset");Yt(this,"lastWrittenByte");Yt(this,"littleEndian");Yt(this,"_data");Yt(this,"_mark");Yt(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,s=t.byteLength-i;let a=i;(ArrayBuffer.isView(t)||t instanceof Hm)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=Hp[n].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===o6&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new Hp[n](o.buffer);return this.offset+=r,l.reverse(),l}const a=new Hp[n](s);return this.offset+=r,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return v5(this.readBytes(t))}decodeText(t=1,n="utf8"){return v5(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(s6(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const l6=4,y5=0,x5=1,c6=2;function Kl(e){let t=e.length;for(;--t>=0;)e[t]=0}const u6=0,Tw=1,d6=2,h6=3,f6=258,Wm=29,Bu=256,ku=Bu+1+Wm,Al=30,Vm=19,Iw=2*ku+1,mo=15,Wp=16,p6=7,Gm=256,Rw=16,Ow=17,Fw=18,A1=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),mh=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),m6=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Dw=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g6=512,Os=new Array((ku+2)*2);Kl(Os);const nu=new Array(Al*2);Kl(nu);const Su=new Array(g6);Kl(Su);const ju=new Array(f6-h6+1);Kl(ju);const Km=new Array(Wm);Kl(Km);const Qh=new Array(Al);Kl(Qh);function Vp(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Mw,Uw,Bw;function Gp(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const zw=e=>e<256?Su[e]:Su[256+(e>>>7)],Au=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Br=(e,t,n)=>{e.bi_valid>Wp-n?(e.bi_buf|=t<<e.bi_valid&65535,Au(e,e.bi_buf),e.bi_buf=t>>Wp-e.bi_valid,e.bi_valid+=n-Wp):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},as=(e,t,n)=>{Br(e,n[t*2],n[t*2+1])},qw=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},v6=e=>{e.bi_valid===16?(Au(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},y6=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,f,g,y,p,k,_=0;for(y=0;y<=mo;y++)e.bl_count[y]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Iw;c++)f=e.heap[c],y=n[n[f*2+1]*2+1]+1,y>l&&(y=l,_++),n[f*2+1]=y,!(f>r)&&(e.bl_count[y]++,p=0,f>=o&&(p=a[f-o]),k=n[f*2],e.opt_len+=k*(y+p),s&&(e.static_len+=k*(i[f*2+1]+p)));if(_!==0){do{for(y=l-1;e.bl_count[y]===0;)y--;e.bl_count[y]--,e.bl_count[y+1]+=2,e.bl_count[l]--,_-=2}while(_>0);for(y=l;y!==0;y--)for(f=e.bl_count[y];f!==0;)g=e.heap[--c],!(g>r)&&(n[g*2+1]!==y&&(e.opt_len+=(y-n[g*2+1])*n[g*2],n[g*2+1]=y),f--)}},$w=(e,t,n)=>{const r=new Array(mo+1);let i=0,s,a;for(s=1;s<=mo;s++)i=i+n[s-1]<<1,r[s]=i;for(a=0;a<=t;a++){let o=e[a*2+1];o!==0&&(e[a*2]=qw(r[o]++,o))}},x6=()=>{let e,t,n,r,i;const s=new Array(mo+1);for(n=0,r=0;r<Wm-1;r++)for(Km[r]=n,e=0;e<1<<A1[r];e++)ju[n++]=r;for(ju[n-1]=r,i=0,r=0;r<16;r++)for(Qh[r]=i,e=0;e<1<<mh[r];e++)Su[i++]=r;for(i>>=7;r<Al;r++)for(Qh[r]=i<<7,e=0;e<1<<mh[r]-7;e++)Su[256+i++]=r;for(t=0;t<=mo;t++)s[t]=0;for(e=0;e<=143;)Os[e*2+1]=8,e++,s[8]++;for(;e<=255;)Os[e*2+1]=9,e++,s[9]++;for(;e<=279;)Os[e*2+1]=7,e++,s[7]++;for(;e<=287;)Os[e*2+1]=8,e++,s[8]++;for($w(Os,ku+1,s),e=0;e<Al;e++)nu[e*2+1]=5,nu[e*2]=qw(e,5);Mw=new Vp(Os,A1,Bu+1,ku,mo),Uw=new Vp(nu,mh,0,Al,mo),Bw=new Vp(new Array(0),m6,0,Vm,p6)},Hw=e=>{let t;for(t=0;t<ku;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Al;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Vm;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Gm*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ww=e=>{e.bi_valid>8?Au(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},w5=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},Kp=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&w5(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!w5(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},b5=(e,t,n)=>{let r,i,s=0,a,o;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+s++]&255,r+=(e.pending_buf[e.sym_buf+s++]&255)<<8,i=e.pending_buf[e.sym_buf+s++],r===0?as(e,i,t):(a=ju[i],as(e,a+Bu+1,t),o=A1[a],o!==0&&(i-=Km[a],Br(e,i,o)),r--,a=zw(r),as(e,a,n),o=mh[a],o!==0&&(r-=Qh[a],Br(e,r,o)));while(s<e.sym_next);as(e,Gm,t)},E1=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,o,l=-1,c;for(e.heap_len=0,e.heap_max=Iw,a=0;a<s;a++)n[a*2]!==0?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)Kp(e,n,a);c=s;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Kp(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,n[c*2]=n[a*2]+n[o*2],e.depth[c]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,n[a*2+1]=n[o*2+1]=c,e.heap[1]=c++,Kp(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],y6(e,t),$w(n,l,e.bl_count)},_5=(e,t,n)=>{let r,i=-1,s,a=t[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=a,a=t[(r+1)*2+1],!(++o<l&&s===a)&&(o<c?e.bl_tree[s*2]+=o:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[Rw*2]++):o<=10?e.bl_tree[Ow*2]++:e.bl_tree[Fw*2]++,o=0,i=s,a===0?(l=138,c=3):s===a?(l=6,c=3):(l=7,c=4))},N5=(e,t,n)=>{let r,i=-1,s,a=t[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),r=0;r<=n;r++)if(s=a,a=t[(r+1)*2+1],!(++o<l&&s===a)){if(o<c)do as(e,s,e.bl_tree);while(--o!==0);else s!==0?(s!==i&&(as(e,s,e.bl_tree),o--),as(e,Rw,e.bl_tree),Br(e,o-3,2)):o<=10?(as(e,Ow,e.bl_tree),Br(e,o-3,3)):(as(e,Fw,e.bl_tree),Br(e,o-11,7));o=0,i=s,a===0?(l=138,c=3):s===a?(l=6,c=3):(l=7,c=4)}},w6=e=>{let t;for(_5(e,e.dyn_ltree,e.l_desc.max_code),_5(e,e.dyn_dtree,e.d_desc.max_code),E1(e,e.bl_desc),t=Vm-1;t>=3&&e.bl_tree[Dw[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},b6=(e,t,n,r)=>{let i;for(Br(e,t-257,5),Br(e,n-1,5),Br(e,r-4,4),i=0;i<r;i++)Br(e,e.bl_tree[Dw[i]*2+1],3);N5(e,e.dyn_ltree,t-1),N5(e,e.dyn_dtree,n-1)},_6=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return y5;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return x5;for(n=32;n<Bu;n++)if(e.dyn_ltree[n*2]!==0)return x5;return y5};let k5=!1;const N6=e=>{k5||(x6(),k5=!0),e.l_desc=new Gp(e.dyn_ltree,Mw),e.d_desc=new Gp(e.dyn_dtree,Uw),e.bl_desc=new Gp(e.bl_tree,Bw),e.bi_buf=0,e.bi_valid=0,Hw(e)},Vw=(e,t,n,r)=>{Br(e,(u6<<1)+(r?1:0),3),Ww(e),Au(e,n),Au(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},k6=e=>{Br(e,Tw<<1,3),as(e,Gm,Os),v6(e)},S6=(e,t,n,r)=>{let i,s,a=0;e.level>0?(e.strm.data_type===c6&&(e.strm.data_type=_6(e)),E1(e,e.l_desc),E1(e,e.d_desc),a=w6(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?Vw(e,t,n,r):e.strategy===l6||s===i?(Br(e,(Tw<<1)+(r?1:0),3),b5(e,Os,nu)):(Br(e,(d6<<1)+(r?1:0),3),b6(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b5(e,e.dyn_ltree,e.dyn_dtree)),Hw(e),r&&Ww(e)},j6=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ju[n]+Bu+1)*2]++,e.dyn_dtree[zw(t)*2]++),e.sym_next===e.sym_end);var A6=N6,E6=Vw,L6=S6,C6=j6,P6=k6,T6={_tr_init:A6,_tr_stored_block:E6,_tr_flush_block:L6,_tr_tally:C6,_tr_align:P6};const I6=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var Eu=I6;const R6=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},O6=new Uint32Array(R6()),F6=(e,t,n,r)=>{const i=O6,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[(e^t[a])&255];return e^-1};var Xn=F6,Bl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:D6,_tr_stored_block:L1,_tr_flush_block:M6,_tr_tally:Ta,_tr_align:U6}=T6,{Z_NO_FLUSH:Ia,Z_PARTIAL_FLUSH:B6,Z_FULL_FLUSH:z6,Z_FINISH:bi,Z_BLOCK:S5,Z_OK:cr,Z_STREAM_END:j5,Z_STREAM_ERROR:us,Z_DATA_ERROR:q6,Z_BUF_ERROR:Jp,Z_DEFAULT_COMPRESSION:$6,Z_FILTERED:H6,Z_HUFFMAN_ONLY:Vd,Z_RLE:W6,Z_FIXED:V6,Z_DEFAULT_STRATEGY:G6,Z_UNKNOWN:K6,Z_DEFLATED:Af}=zu,J6=9,Y6=15,Z6=8,Q6=29,X6=256,C1=X6+1+Q6,ej=30,tj=19,nj=2*C1+1,rj=15,Dt=3,ba=258,ds=ba+Dt+1,ij=32,zl=42,Jm=57,P1=69,T1=73,I1=91,R1=103,go=113,zc=666,Cr=1,Jl=2,Eo=3,Yl=4,sj=3,vo=(e,t)=>(e.msg=Bl[t],t),A5=e=>e*2-(e>4?9:0),ya=e=>{let t=e.length;for(;--t>=0;)e[t]=0},aj=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let oj=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Ra=oj;const ti=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},ai=(e,t)=>{M6(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ti(e.strm)},Vt=(e,t)=>{e.pending_buf[e.pending++]=t},Oc=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},O1=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=Eu(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Xn(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Gw=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,a=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-ds?e.strstart-(e.w_size-ds):0,c=e.window,f=e.w_mask,g=e.prev,y=e.strstart+ba;let p=c[r+a-1],k=c[r+a];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do if(i=t,!(c[i+a]!==k||c[i+a-1]!==p||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<y);if(s=ba-(y-r),r=y-ba,s>a){if(e.match_start=t,a=s,s>=o)break;p=c[r+a-1],k=c[r+a]}}while((t=g[t&f])>l&&--n!==0);return a<=e.lookahead?a:e.lookahead},ql=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ds)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),aj(e),r+=t),e.strm.avail_in===0)break;if(n=O1(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=Dt)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ra(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ra(e,e.ins_h,e.window[i+Dt-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Dt)););}while(e.lookahead<ds&&e.strm.avail_in!==0)},Kw=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,s,a=0,o=e.strm.avail_in;do{if(r=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>s&&(r=s),r<n&&(r===0&&t!==bi||t===Ia||r!==i+e.strm.avail_in)))break;a=t===bi&&r===i+e.strm.avail_in?1:0,L1(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ti(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(O1(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Yl:t!==Ia&&t!==bi&&e.strm.avail_in===0&&e.strstart===e.block_start?Jl:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(O1(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,n=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=n||(i||t===bi)&&t!==Ia&&e.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,a=t===bi&&e.strm.avail_in===0&&r===i?1:0,L1(e,e.block_start,r,a),e.block_start+=r,ti(e.strm)),a?Eo:Cr)},Yp=(e,t)=>{let n,r;for(;;){if(e.lookahead<ds){if(ql(e),e.lookahead<ds&&t===Ia)return Cr;if(e.lookahead===0)break}if(n=0,e.lookahead>=Dt&&(e.ins_h=Ra(e,e.ins_h,e.window[e.strstart+Dt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ds&&(e.match_length=Gw(e,n)),e.match_length>=Dt)if(r=Ta(e,e.strstart-e.match_start,e.match_length-Dt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Dt){e.match_length--;do e.strstart++,e.ins_h=Ra(e,e.ins_h,e.window[e.strstart+Dt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ra(e,e.ins_h,e.window[e.strstart+1]);else r=Ta(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ai(e,!1),e.strm.avail_out===0))return Cr}return e.insert=e.strstart<Dt-1?e.strstart:Dt-1,t===bi?(ai(e,!0),e.strm.avail_out===0?Eo:Yl):e.sym_next&&(ai(e,!1),e.strm.avail_out===0)?Cr:Jl},el=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ds){if(ql(e),e.lookahead<ds&&t===Ia)return Cr;if(e.lookahead===0)break}if(n=0,e.lookahead>=Dt&&(e.ins_h=Ra(e,e.ins_h,e.window[e.strstart+Dt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Dt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ds&&(e.match_length=Gw(e,n),e.match_length<=5&&(e.strategy===H6||e.match_length===Dt&&e.strstart-e.match_start>4096)&&(e.match_length=Dt-1)),e.prev_length>=Dt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Dt,r=Ta(e,e.strstart-1-e.prev_match,e.prev_length-Dt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Ra(e,e.ins_h,e.window[e.strstart+Dt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Dt-1,e.strstart++,r&&(ai(e,!1),e.strm.avail_out===0))return Cr}else if(e.match_available){if(r=Ta(e,0,e.window[e.strstart-1]),r&&ai(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Cr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ta(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Dt-1?e.strstart:Dt-1,t===bi?(ai(e,!0),e.strm.avail_out===0?Eo:Yl):e.sym_next&&(ai(e,!1),e.strm.avail_out===0)?Cr:Jl},lj=(e,t)=>{let n,r,i,s;const a=e.window;for(;;){if(e.lookahead<=ba){if(ql(e),e.lookahead<=ba&&t===Ia)return Cr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Dt&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=e.strstart+ba;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=ba-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Dt?(n=Ta(e,1,e.match_length-Dt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ta(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ai(e,!1),e.strm.avail_out===0))return Cr}return e.insert=0,t===bi?(ai(e,!0),e.strm.avail_out===0?Eo:Yl):e.sym_next&&(ai(e,!1),e.strm.avail_out===0)?Cr:Jl},cj=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(ql(e),e.lookahead===0)){if(t===Ia)return Cr;break}if(e.match_length=0,n=Ta(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ai(e,!1),e.strm.avail_out===0))return Cr}return e.insert=0,t===bi?(ai(e,!0),e.strm.avail_out===0?Eo:Yl):e.sym_next&&(ai(e,!1),e.strm.avail_out===0)?Cr:Jl};function ts(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const qc=[new ts(0,0,0,0,Kw),new ts(4,4,8,4,Yp),new ts(4,5,16,8,Yp),new ts(4,6,32,32,Yp),new ts(4,4,16,16,el),new ts(8,16,32,32,el),new ts(8,16,128,128,el),new ts(8,32,128,256,el),new ts(32,128,258,1024,el),new ts(32,258,258,4096,el)],uj=e=>{e.window_size=2*e.w_size,ya(e.head),e.max_lazy_match=qc[e.level].max_lazy,e.good_match=qc[e.level].good_length,e.nice_match=qc[e.level].nice_length,e.max_chain_length=qc[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Dt-1,e.match_available=0,e.ins_h=0};function dj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Af,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(nj*2),this.dyn_dtree=new Uint16Array((2*ej+1)*2),this.bl_tree=new Uint16Array((2*tj+1)*2),ya(this.dyn_ltree),ya(this.dyn_dtree),ya(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(rj+1),this.heap=new Uint16Array(2*C1+1),ya(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*C1+1),ya(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==zl&&t.status!==Jm&&t.status!==P1&&t.status!==T1&&t.status!==I1&&t.status!==R1&&t.status!==go&&t.status!==zc?1:0},Jw=e=>{if(qu(e))return vo(e,us);e.total_in=e.total_out=0,e.data_type=K6;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Jm:t.wrap?zl:go,e.adler=t.wrap===2?0:1,t.last_flush=-2,D6(t),cr},Yw=e=>{const t=Jw(e);return t===cr&&uj(e.state),t},hj=(e,t)=>qu(e)||e.state.wrap!==2?us:(e.state.gzhead=t,cr),Zw=(e,t,n,r,i,s)=>{if(!e)return us;let a=1;if(t===$6&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>J6||n!==Af||r<8||r>15||t<0||t>9||s<0||s>V6||r===8&&a!==1)return vo(e,us);r===8&&(r=9);const o=new dj;return e.state=o,o.strm=e,o.status=zl,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Dt-1)/Dt),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=s,o.method=n,Yw(e)},fj=(e,t)=>Zw(e,t,Af,Y6,Z6,G6),pj=(e,t)=>{if(qu(e)||t>S5||t<0)return e?vo(e,us):us;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===zc&&t!==bi)return vo(e,e.avail_out===0?Jp:us);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(ti(e),e.avail_out===0)return n.last_flush=-1,cr}else if(e.avail_in===0&&A5(t)<=A5(r)&&t!==bi)return vo(e,Jp);if(n.status===zc&&e.avail_in!==0)return vo(e,Jp);if(n.status===zl&&n.wrap===0&&(n.status=go),n.status===zl){let i=Af+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=Vd||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,i|=s<<6,n.strstart!==0&&(i|=ij),i+=31-i%31,Oc(n,i),n.strstart!==0&&(Oc(n,e.adler>>>16),Oc(n,e.adler&65535)),e.adler=1,n.status=go,ti(e),n.pending!==0)return n.last_flush=-1,cr}if(n.status===Jm){if(e.adler=0,Vt(n,31),Vt(n,139),Vt(n,8),n.gzhead)Vt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Vt(n,n.gzhead.time&255),Vt(n,n.gzhead.time>>8&255),Vt(n,n.gzhead.time>>16&255),Vt(n,n.gzhead.time>>24&255),Vt(n,n.level===9?2:n.strategy>=Vd||n.level<2?4:0),Vt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Vt(n,n.gzhead.extra.length&255),Vt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Xn(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=P1;else if(Vt(n,0),Vt(n,0),Vt(n,0),Vt(n,0),Vt(n,0),Vt(n,n.level===9?2:n.strategy>=Vd||n.level<2?4:0),Vt(n,sj),n.status=go,ti(e),n.pending!==0)return n.last_flush=-1,cr}if(n.status===P1){if(n.gzhead.extra){let i=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=o,ti(e),n.pending!==0)return n.last_flush=-1,cr;i=0,s-=o}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=T1}if(n.status===T1){if(n.gzhead.name){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i)),ti(e),n.pending!==0)return n.last_flush=-1,cr;i=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,Vt(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=I1}if(n.status===I1){if(n.gzhead.comment){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i)),ti(e),n.pending!==0)return n.last_flush=-1,cr;i=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,Vt(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Xn(e.adler,n.pending_buf,n.pending-i,i))}n.status=R1}if(n.status===R1){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ti(e),n.pending!==0))return n.last_flush=-1,cr;Vt(n,e.adler&255),Vt(n,e.adler>>8&255),e.adler=0}if(n.status=go,ti(e),n.pending!==0)return n.last_flush=-1,cr}if(e.avail_in!==0||n.lookahead!==0||t!==Ia&&n.status!==zc){let i=n.level===0?Kw(n,t):n.strategy===Vd?cj(n,t):n.strategy===W6?lj(n,t):qc[n.level].func(n,t);if((i===Eo||i===Yl)&&(n.status=zc),i===Cr||i===Eo)return e.avail_out===0&&(n.last_flush=-1),cr;if(i===Jl&&(t===B6?U6(n):t!==S5&&(L1(n,0,0,!1),t===z6&&(ya(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ti(e),e.avail_out===0))return n.last_flush=-1,cr}return t!==bi?cr:n.wrap<=0?j5:(n.wrap===2?(Vt(n,e.adler&255),Vt(n,e.adler>>8&255),Vt(n,e.adler>>16&255),Vt(n,e.adler>>24&255),Vt(n,e.total_in&255),Vt(n,e.total_in>>8&255),Vt(n,e.total_in>>16&255),Vt(n,e.total_in>>24&255)):(Oc(n,e.adler>>>16),Oc(n,e.adler&65535)),ti(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?cr:j5)},mj=e=>{if(qu(e))return us;const t=e.state.status;return e.state=null,t===go?vo(e,q6):cr},gj=(e,t)=>{let n=t.length;if(qu(e))return us;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==zl||r.lookahead)return us;if(i===1&&(e.adler=Eu(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(ya(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ql(r);r.lookahead>=Dt;){let l=r.strstart,c=r.lookahead-(Dt-1);do r.ins_h=Ra(r,r.ins_h,r.window[l+Dt-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=Dt-1,ql(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Dt-1,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,r.wrap=i,cr};var vj=fj,yj=Zw,xj=Yw,wj=Jw,bj=hj,_j=pj,Nj=mj,kj=gj,Sj="pako deflate (from Nodeca project)",ru={deflateInit:vj,deflateInit2:yj,deflateReset:xj,deflateResetKeep:wj,deflateSetHeader:bj,deflate:_j,deflateEnd:Nj,deflateSetDictionary:kj,deflateInfo:Sj};const jj=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Aj=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)jj(n,r)&&(e[r]=n[r])}}return e},Ej=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let a=e[r];n.set(a,i),i+=a.length}return n},Ef={assign:Aj,flattenChunks:Ej};let Qw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Qw=!1}const Lu=new Uint8Array(256);for(let e=0;e<256;e++)Lu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Lu[254]=Lu[254]=1;var Lj=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const Cj=(e,t)=>{if(t<65534&&e.subarray&&Qw)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Pj=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){s[i++]=a;continue}let o=Lu[a];if(o>4){s[i++]=65533,r+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&r<n;)a=a<<6|e[r++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return Cj(s,i)},Tj=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Lu[e[n]]>t?n:t},Cu={string2buf:Lj,buf2string:Pj,utf8border:Tj};function Ij(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xw=Ij;const eb=Object.prototype.toString,{Z_NO_FLUSH:Rj,Z_SYNC_FLUSH:Oj,Z_FULL_FLUSH:Fj,Z_FINISH:Dj,Z_OK:Xh,Z_STREAM_END:Mj,Z_DEFAULT_COMPRESSION:Uj,Z_DEFAULT_STRATEGY:Bj,Z_DEFLATED:zj}=zu;function Ym(e){this.options=Ef.assign({level:Uj,method:zj,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bj},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xw,this.strm.avail_out=0;let n=ru.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Xh)throw new Error(Bl[n]);if(t.header&&ru.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=Cu.string2buf(t.dictionary):eb.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=ru.deflateSetDictionary(this.strm,r),n!==Xh)throw new Error(Bl[n]);this._dict_set=!0}}Ym.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Dj:Rj,typeof e=="string"?n.input=Cu.string2buf(e):eb.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Oj||s===Fj)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=ru.deflate(n,s),i===Mj)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=ru.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Xh;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Ym.prototype.onData=function(e){this.chunks.push(e)};Ym.prototype.onEnd=function(e){e===Xh&&(this.result=Ef.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const Gd=16209,qj=16191;var $j=function(t,n){let r,i,s,a,o,l,c,f,g,y,p,k,_,A,x,b,N,C,K,T,M,I,S,z;const j=t.state;r=t.next_in,S=t.input,i=r+(t.avail_in-5),s=t.next_out,z=t.output,a=s-(n-t.avail_out),o=s+(t.avail_out-257),l=j.dmax,c=j.wsize,f=j.whave,g=j.wnext,y=j.window,p=j.hold,k=j.bits,_=j.lencode,A=j.distcode,x=(1<<j.lenbits)-1,b=(1<<j.distbits)-1;e:do{k<15&&(p+=S[r++]<<k,k+=8,p+=S[r++]<<k,k+=8),N=_[p&x];t:for(;;){if(C=N>>>24,p>>>=C,k-=C,C=N>>>16&255,C===0)z[s++]=N&65535;else if(C&16){K=N&65535,C&=15,C&&(k<C&&(p+=S[r++]<<k,k+=8),K+=p&(1<<C)-1,p>>>=C,k-=C),k<15&&(p+=S[r++]<<k,k+=8,p+=S[r++]<<k,k+=8),N=A[p&b];n:for(;;){if(C=N>>>24,p>>>=C,k-=C,C=N>>>16&255,C&16){if(T=N&65535,C&=15,k<C&&(p+=S[r++]<<k,k+=8,k<C&&(p+=S[r++]<<k,k+=8)),T+=p&(1<<C)-1,T>l){t.msg="invalid distance too far back",j.mode=Gd;break e}if(p>>>=C,k-=C,C=s-a,T>C){if(C=T-C,C>f&&j.sane){t.msg="invalid distance too far back",j.mode=Gd;break e}if(M=0,I=y,g===0){if(M+=c-C,C<K){K-=C;do z[s++]=y[M++];while(--C);M=s-T,I=z}}else if(g<C){if(M+=c+g-C,C-=g,C<K){K-=C;do z[s++]=y[M++];while(--C);if(M=0,g<K){C=g,K-=C;do z[s++]=y[M++];while(--C);M=s-T,I=z}}}else if(M+=g-C,C<K){K-=C;do z[s++]=y[M++];while(--C);M=s-T,I=z}for(;K>2;)z[s++]=I[M++],z[s++]=I[M++],z[s++]=I[M++],K-=3;K&&(z[s++]=I[M++],K>1&&(z[s++]=I[M++]))}else{M=s-T;do z[s++]=z[M++],z[s++]=z[M++],z[s++]=z[M++],K-=3;while(K>2);K&&(z[s++]=z[M++],K>1&&(z[s++]=z[M++]))}}else if(C&64){t.msg="invalid distance code",j.mode=Gd;break e}else{N=A[(N&65535)+(p&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){j.mode=qj;break e}else{t.msg="invalid literal/length code",j.mode=Gd;break e}else{N=_[(N&65535)+(p&(1<<C)-1)];continue t}break}}while(r<i&&s<o);K=k>>3,r-=K,k-=K<<3,p&=(1<<k)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<o?257+(o-s):257-(s-o),j.hold=p,j.bits=k};const tl=15,E5=852,L5=592,C5=0,Zp=1,P5=2,Hj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Wj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Vj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Gj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Kj=(e,t,n,r,i,s,a,o)=>{const l=o.bits;let c=0,f=0,g=0,y=0,p=0,k=0,_=0,A=0,x=0,b=0,N,C,K,T,M,I=null,S;const z=new Uint16Array(tl+1),j=new Uint16Array(tl+1);let R=null,$,J,X;for(c=0;c<=tl;c++)z[c]=0;for(f=0;f<r;f++)z[t[n+f]]++;for(p=l,y=tl;y>=1&&z[y]===0;y--);if(p>y&&(p=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(g=1;g<y&&z[g]===0;g++);for(p<g&&(p=g),A=1,c=1;c<=tl;c++)if(A<<=1,A-=z[c],A<0)return-1;if(A>0&&(e===C5||y!==1))return-1;for(j[1]=0,c=1;c<tl;c++)j[c+1]=j[c]+z[c];for(f=0;f<r;f++)t[n+f]!==0&&(a[j[t[n+f]]++]=f);if(e===C5?(I=R=a,S=20):e===Zp?(I=Hj,R=Wj,S=257):(I=Vj,R=Gj,S=0),b=0,f=0,c=g,M=s,k=p,_=0,K=-1,x=1<<p,T=x-1,e===Zp&&x>E5||e===P5&&x>L5)return 1;for(;;){$=c-_,a[f]+1<S?(J=0,X=a[f]):a[f]>=S?(J=R[a[f]-S],X=I[a[f]-S]):(J=96,X=0),N=1<<c-_,C=1<<k,g=C;do C-=N,i[M+(b>>_)+C]=$<<24|J<<16|X|0;while(C!==0);for(N=1<<c-1;b&N;)N>>=1;if(N!==0?(b&=N-1,b+=N):b=0,f++,--z[c]===0){if(c===y)break;c=t[n+a[f]]}if(c>p&&(b&T)!==K){for(_===0&&(_=p),M+=g,k=c-_,A=1<<k;k+_<y&&(A-=z[k+_],!(A<=0));)k++,A<<=1;if(x+=1<<k,e===Zp&&x>E5||e===P5&&x>L5)return 1;K=b&T,i[K]=p<<24|k<<16|M-s|0}}return b!==0&&(i[M+b]=c-_<<24|64<<16|0),o.bits=p,0};var iu=Kj;const Jj=0,tb=1,nb=2,{Z_FINISH:T5,Z_BLOCK:Yj,Z_TREES:Kd,Z_OK:Lo,Z_STREAM_END:Zj,Z_NEED_DICT:Qj,Z_STREAM_ERROR:Ai,Z_DATA_ERROR:rb,Z_MEM_ERROR:ib,Z_BUF_ERROR:Xj,Z_DEFLATED:I5}=zu,Lf=16180,R5=16181,O5=16182,F5=16183,D5=16184,M5=16185,U5=16186,B5=16187,z5=16188,q5=16189,ef=16190,Cs=16191,Qp=16192,$5=16193,Xp=16194,H5=16195,W5=16196,V5=16197,G5=16198,Jd=16199,Yd=16200,K5=16201,J5=16202,Y5=16203,Z5=16204,Q5=16205,e0=16206,X5=16207,ev=16208,vn=16209,sb=16210,ab=16211,e8=852,t8=592,n8=15,r8=n8,tv=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function i8(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ro=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Lf||t.mode>ab?1:0},ob=e=>{if(Ro(e))return Ai;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Lf,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(e8),t.distcode=t.distdyn=new Int32Array(t8),t.sane=1,t.back=-1,Lo},lb=e=>{if(Ro(e))return Ai;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ob(e)},cb=(e,t)=>{let n;if(Ro(e))return Ai;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ai:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,lb(e))},ub=(e,t)=>{if(!e)return Ai;const n=new i8;e.state=n,n.strm=e,n.window=null,n.mode=Lf;const r=cb(e,t);return r!==Lo&&(e.state=null),r},s8=e=>ub(e,r8);let nv=!0,t0,n0;const a8=e=>{if(nv){t0=new Int32Array(512),n0=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(iu(tb,e.lens,0,288,t0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;iu(nb,e.lens,0,32,n0,0,e.work,{bits:5}),nv=!1}e.lencode=t0,e.lenbits=9,e.distcode=n0,e.distbits=5},db=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},o8=(e,t)=>{let n,r,i,s,a,o,l,c,f,g,y,p,k,_,A=0,x,b,N,C,K,T,M,I;const S=new Uint8Array(4);let z,j;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ro(e)||!e.output||!e.input&&e.avail_in!==0)return Ai;n=e.state,n.mode===Cs&&(n.mode=Qp),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,f=n.bits,g=o,y=l,I=Lo;e:for(;;)switch(n.mode){case Lf:if(n.wrap===0){n.mode=Qp;break}for(;f<16;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,S[0]=c&255,S[1]=c>>>8&255,n.check=Xn(n.check,S,2,0),c=0,f=0,n.mode=R5;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=vn;break}if((c&15)!==I5){e.msg="unknown compression method",n.mode=vn;break}if(c>>>=4,f-=4,M=(c&15)+8,n.wbits===0&&(n.wbits=M),M>15||M>n.wbits){e.msg="invalid window size",n.mode=vn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?q5:Cs,c=0,f=0;break;case R5:for(;f<16;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(n.flags=c,(n.flags&255)!==I5){e.msg="unknown compression method",n.mode=vn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=vn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(S[0]=c&255,S[1]=c>>>8&255,n.check=Xn(n.check,S,2,0)),c=0,f=0,n.mode=O5;case O5:for(;f<32;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(S[0]=c&255,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,n.check=Xn(n.check,S,4,0)),c=0,f=0,n.mode=F5;case F5:for(;f<16;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(S[0]=c&255,S[1]=c>>>8&255,n.check=Xn(n.check,S,2,0)),c=0,f=0,n.mode=D5;case D5:if(n.flags&1024){for(;f<16;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(S[0]=c&255,S[1]=c>>>8&255,n.check=Xn(n.check,S,2,0)),c=0,f=0}else n.head&&(n.head.extra=null);n.mode=M5;case M5:if(n.flags&1024&&(p=n.length,p>o&&(p=o),p&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),M)),n.flags&512&&n.wrap&4&&(n.check=Xn(n.check,r,p,s)),o-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=U5;case U5:if(n.flags&2048){if(o===0)break e;p=0;do M=r[s+p++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M));while(M&&p<o);if(n.flags&512&&n.wrap&4&&(n.check=Xn(n.check,r,p,s)),o-=p,s+=p,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=B5;case B5:if(n.flags&4096){if(o===0)break e;p=0;do M=r[s+p++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M));while(M&&p<o);if(n.flags&512&&n.wrap&4&&(n.check=Xn(n.check,r,p,s)),o-=p,s+=p,M)break e}else n.head&&(n.head.comment=null);n.mode=z5;case z5:if(n.flags&512){for(;f<16;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=vn;break}c=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Cs;break;case q5:for(;f<32;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}e.adler=n.check=tv(c),c=0,f=0,n.mode=ef;case ef:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=f,Qj;e.adler=n.check=1,n.mode=Cs;case Cs:if(t===Yj||t===Kd)break e;case Qp:if(n.last){c>>>=f&7,f-=f&7,n.mode=e0;break}for(;f<3;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}switch(n.last=c&1,c>>>=1,f-=1,c&3){case 0:n.mode=$5;break;case 1:if(a8(n),n.mode=Jd,t===Kd){c>>>=2,f-=2;break e}break;case 2:n.mode=W5;break;case 3:e.msg="invalid block type",n.mode=vn}c>>>=2,f-=2;break;case $5:for(c>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=vn;break}if(n.length=c&65535,c=0,f=0,n.mode=Xp,t===Kd)break e;case Xp:n.mode=H5;case H5:if(p=n.length,p){if(p>o&&(p=o),p>l&&(p=l),p===0)break e;i.set(r.subarray(s,s+p),a),o-=p,s+=p,l-=p,a+=p,n.length-=p;break}n.mode=Cs;break;case W5:for(;f<14;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(n.nlen=(c&31)+257,c>>>=5,f-=5,n.ndist=(c&31)+1,c>>>=5,f-=5,n.ncode=(c&15)+4,c>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=vn;break}n.have=0,n.mode=V5;case V5:for(;n.have<n.ncode;){for(;f<3;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.lens[R[n.have++]]=c&7,c>>>=3,f-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},I=iu(Jj,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,I){e.msg="invalid code lengths set",n.mode=vn;break}n.have=0,n.mode=G5;case G5:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[c&(1<<n.lenbits)-1],x=A>>>24,b=A>>>16&255,N=A&65535,!(x<=f);){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(N<16)c>>>=x,f-=x,n.lens[n.have++]=N;else{if(N===16){for(j=x+2;f<j;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(c>>>=x,f-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=vn;break}M=n.lens[n.have-1],p=3+(c&3),c>>>=2,f-=2}else if(N===17){for(j=x+3;f<j;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}c>>>=x,f-=x,M=0,p=3+(c&7),c>>>=3,f-=3}else{for(j=x+7;f<j;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}c>>>=x,f-=x,M=0,p=11+(c&127),c>>>=7,f-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=vn;break}for(;p--;)n.lens[n.have++]=M}}if(n.mode===vn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=vn;break}if(n.lenbits=9,z={bits:n.lenbits},I=iu(tb,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,I){e.msg="invalid literal/lengths set",n.mode=vn;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},I=iu(nb,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,I){e.msg="invalid distances set",n.mode=vn;break}if(n.mode=Jd,t===Kd)break e;case Jd:n.mode=Yd;case Yd:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=f,$j(e,y),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,f=n.bits,n.mode===Cs&&(n.back=-1);break}for(n.back=0;A=n.lencode[c&(1<<n.lenbits)-1],x=A>>>24,b=A>>>16&255,N=A&65535,!(x<=f);){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(b&&!(b&240)){for(C=x,K=b,T=N;A=n.lencode[T+((c&(1<<C+K)-1)>>C)],x=A>>>24,b=A>>>16&255,N=A&65535,!(C+x<=f);){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}c>>>=C,f-=C,n.back+=C}if(c>>>=x,f-=x,n.back+=x,n.length=N,b===0){n.mode=Q5;break}if(b&32){n.back=-1,n.mode=Cs;break}if(b&64){e.msg="invalid literal/length code",n.mode=vn;break}n.extra=b&15,n.mode=K5;case K5:if(n.extra){for(j=n.extra;f<j;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=J5;case J5:for(;A=n.distcode[c&(1<<n.distbits)-1],x=A>>>24,b=A>>>16&255,N=A&65535,!(x<=f);){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(!(b&240)){for(C=x,K=b,T=N;A=n.distcode[T+((c&(1<<C+K)-1)>>C)],x=A>>>24,b=A>>>16&255,N=A&65535,!(C+x<=f);){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}c>>>=C,f-=C,n.back+=C}if(c>>>=x,f-=x,n.back+=x,b&64){e.msg="invalid distance code",n.mode=vn;break}n.offset=N,n.extra=b&15,n.mode=Y5;case Y5:if(n.extra){for(j=n.extra;f<j;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=vn;break}n.mode=Z5;case Z5:if(l===0)break e;if(p=y-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=vn;break}p>n.wnext?(p-=n.wnext,k=n.wsize-p):k=n.wnext-p,p>n.length&&(p=n.length),_=n.window}else _=i,k=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[a++]=_[k++];while(--p);n.length===0&&(n.mode=Yd);break;case Q5:if(l===0)break e;i[a++]=n.length,l--,n.mode=Yd;break;case e0:if(n.wrap){for(;f<32;){if(o===0)break e;o--,c|=r[s++]<<f,f+=8}if(y-=l,e.total_out+=y,n.total+=y,n.wrap&4&&y&&(e.adler=n.check=n.flags?Xn(n.check,i,y,a-y):Eu(n.check,i,y,a-y)),y=l,n.wrap&4&&(n.flags?c:tv(c))!==n.check){e.msg="incorrect data check",n.mode=vn;break}c=0,f=0}n.mode=X5;case X5:if(n.wrap&&n.flags){for(;f<32;){if(o===0)break e;o--,c+=r[s++]<<f,f+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=vn;break}c=0,f=0}n.mode=ev;case ev:I=Zj;break e;case vn:I=rb;break e;case sb:return ib;case ab:default:return Ai}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=f,(n.wsize||y!==e.avail_out&&n.mode<vn&&(n.mode<e0||t!==T5))&&db(e,e.output,e.next_out,y-e.avail_out),g-=e.avail_in,y-=e.avail_out,e.total_in+=g,e.total_out+=y,n.total+=y,n.wrap&4&&y&&(e.adler=n.check=n.flags?Xn(n.check,i,y,e.next_out-y):Eu(n.check,i,y,e.next_out-y)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Cs?128:0)+(n.mode===Jd||n.mode===Xp?256:0),(g===0&&y===0||t===T5)&&I===Lo&&(I=Xj),I},l8=e=>{if(Ro(e))return Ai;let t=e.state;return t.window&&(t.window=null),e.state=null,Lo},c8=(e,t)=>{if(Ro(e))return Ai;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Lo):Ai},u8=(e,t)=>{const n=t.length;let r,i,s;return Ro(e)||(r=e.state,r.wrap!==0&&r.mode!==ef)?Ai:r.mode===ef&&(i=1,i=Eu(i,t,n,0),i!==r.check)?rb:(s=db(e,t,n,n),s?(r.mode=sb,ib):(r.havedict=1,Lo))};var d8=lb,h8=cb,f8=ob,p8=s8,m8=ub,g8=o8,v8=l8,y8=c8,x8=u8,w8="pako inflate (from Nodeca project)",Fs={inflateReset:d8,inflateReset2:h8,inflateResetKeep:f8,inflateInit:p8,inflateInit2:m8,inflate:g8,inflateEnd:v8,inflateGetHeader:y8,inflateSetDictionary:x8,inflateInfo:w8};function b8(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _8=b8;const hb=Object.prototype.toString,{Z_NO_FLUSH:N8,Z_FINISH:k8,Z_OK:Pu,Z_STREAM_END:r0,Z_NEED_DICT:i0,Z_STREAM_ERROR:S8,Z_DATA_ERROR:rv,Z_MEM_ERROR:j8}=zu;function $u(e){this.options=Ef.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xw,this.strm.avail_out=0;let n=Fs.inflateInit2(this.strm,t.windowBits);if(n!==Pu)throw new Error(Bl[n]);if(this.header=new _8,Fs.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Cu.string2buf(t.dictionary):hb.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Fs.inflateSetDictionary(this.strm,t.dictionary),n!==Pu)))throw new Error(Bl[n])}$u.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?k8:N8,hb.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Fs.inflate(n,a),s===i0&&i&&(s=Fs.inflateSetDictionary(n,i),s===Pu?s=Fs.inflate(n,a):s===rv&&(s=i0));n.avail_in>0&&s===r0&&n.state.wrap>0&&e[n.next_in]!==0;)Fs.inflateReset(n),s=Fs.inflate(n,a);switch(s){case S8:case rv:case i0:case j8:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||s===r0))if(this.options.to==="string"){let l=Cu.utf8border(n.output,n.next_out),c=n.next_out-l,f=Cu.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Pu&&o===0)){if(s===r0)return s=Fs.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};$u.prototype.onData=function(e){this.chunks.push(e)};$u.prototype.onEnd=function(e){e===Pu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ef.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Zm(e,t){const n=new $u(t);if(n.push(e),n.err)throw n.msg||Bl[n.err];return n.result}function A8(e,t){return t=t||{},t.raw=!0,Zm(e,t)}var E8=$u,L8=Zm,C8=A8,P8=Zm,T8=zu,I8={Inflate:E8,inflate:L8,inflateRaw:C8,ungzip:P8,constants:T8};const{Inflate:R8,inflate:O8,inflateRaw:xE,ungzip:wE}=I8;var iv=R8,F8=O8;const fb=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;fb[e]=t}const sv=4294967295;function D8(e,t,n){let r=e;for(let i=0;i<n;i++)r=fb[(r^t[i])&255]^r>>>8;return r}function M8(e,t){return(D8(sv,e,t)^sv)>>>0}function av(e,t,n){const r=e.readUint32(),i=M8(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function pb(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function mb(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function gb(e,t,n,r){let i=0;if(n.length===0)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function vb(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-i]+n[s]>>1)&255}}function yb(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+U8(t[s-i],n[s],n[s-i])&255}}function U8(e,t,n){const r=e+t-n,i=Math.abs(r-e),s=Math.abs(r-t),a=Math.abs(r-n);return i<=s&&i<=a?e:s<=a?t:n}function B8(e,t,n,r,i,s){switch(e){case 0:pb(t,n,i);break;case 1:mb(t,n,i,s);break;case 2:gb(t,n,r,i);break;case 3:vb(t,n,r,i,s);break;case 4:yb(t,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const z8=new Uint16Array([255]),q8=new Uint8Array(z8.buffer),$8=q8[0]===255;function H8(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(r*n*o);let c=0;for(let f=0;f<7;f++){const g=a[f],y=Math.ceil((n-g.x)/g.xStep),p=Math.ceil((r-g.y)/g.yStep);if(y<=0||p<=0)continue;const k=y*o,_=new Uint8Array(k);for(let A=0;A<p;A++){const x=t[c++],b=t.subarray(c,c+k);c+=k;const N=new Uint8Array(k);B8(x,b,N,_,k,o),_.set(N);for(let C=0;C<y;C++){const K=g.x+C*g.xStep,T=g.y+A*g.yStep;if(!(K>=n||T>=r))for(let M=0;M<o;M++)l[(T*n+K)*o+M]=N[C*o+M]}}}if(s===16){const f=new Uint16Array(l.buffer);if($8)for(let g=0;g<f.length;g++)f[g]=W8(f[g]);return f}else return l}function W8(e){return(e&255)<<8|e>>8&255}const V8=new Uint16Array([255]),G8=new Uint8Array(V8.buffer),K8=G8[0]===255,J8=new Uint8Array(0);function ov(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*n),l=new Uint8Array(r*o);let c=J8,f=0,g,y;for(let p=0;p<r;p++){switch(g=t.subarray(f+1,f+1+o),y=l.subarray(p*o,(p+1)*o),t[f]){case 0:pb(g,y,o);break;case 1:mb(g,y,o,a);break;case 2:gb(g,y,c,o);break;case 3:vb(g,y,c,o,a);break;case 4:yb(g,y,c,o,a);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}c=y,f+=o+1}if(s===16){const p=new Uint16Array(l.buffer);if(K8)for(let k=0;k<p.length;k++)p[k]=Y8(p[k]);return p}else return l}function Y8(e){return(e&255)<<8|e>>8&255}const gh=Uint8Array.of(137,80,78,71,13,10,26,10);function lv(e){if(!Z8(e.readBytes(gh.length)))throw new Error("wrong PNG signature")}function Z8(e){if(e.length<gh.length)return!1;for(let t=0;t<gh.length;t++)if(e[t]!==gh[t])return!1;return!0}const Q8="tEXt",X8=0,xb=new TextDecoder("latin1");function eA(e){if(nA(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const tA=/^[\u0000-\u00FF]*$/;function nA(e){if(!tA.test(e))throw new Error("invalid latin1 text")}function rA(e,t,n){const r=wb(t);e[r]=iA(t,n-r.length-1)}function wb(e){for(e.mark();e.readByte()!==X8;);const t=e.offset;e.reset();const n=xb.decode(e.readBytes(t-e.offset-1));return e.skip(1),eA(n),n}function iA(e,t){return xb.decode(e.readBytes(t))}const ei={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},s0={UNKNOWN:-1,DEFLATE:0},cv={UNKNOWN:-1,ADAPTIVE:0},a0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zd={NONE:0,BACKGROUND:1,PREVIOUS:2},o0={SOURCE:0,OVER:1};class sA extends Hm{constructor(n,r={}){super(n);Yt(this,"_checkCrc");Yt(this,"_inflator");Yt(this,"_png");Yt(this,"_apng");Yt(this,"_end");Yt(this,"_hasPalette");Yt(this,"_palette");Yt(this,"_hasTransparency");Yt(this,"_transparency");Yt(this,"_compressionMethod");Yt(this,"_filterMethod");Yt(this,"_interlaceMethod");Yt(this,"_colorType");Yt(this,"_isAnimated");Yt(this,"_numberOfFrames");Yt(this,"_numberOfPlays");Yt(this,"_frames");Yt(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new iv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=s0.UNKNOWN,this._filterMethod=cv.UNKNOWN,this._interlaceMethod=a0.UNKNOWN,this._colorType=ei.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lv(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(lv(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Q8:rA(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?av(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?av(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=aA(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case ei.GREYSCALE:i=1;break;case ei.TRUECOLOUR:i=3;break;case ei.INDEXED_COLOUR:i=1;break;case ei.GREYSCALE_ALPHA:i=2;break;case ei.TRUECOLOUR_ALPHA:i=4;break;case ei.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==s0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case ei.GREYSCALE:case ei.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case ei.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ei.UNKNOWN:case ei.GREYSCALE_ALPHA:case ei.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=wb(this),i=this.readUint8();if(i!==s0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:F8(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=ov({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case Zd.NONE:break;case Zd.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*n.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Zd.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(a,o)=>{const l=((a+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,c=(a*r.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case o0.SOURCE:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let f=0;f<this._png.channels;f++)n.data[l+f]=r.data[c+f]}break;case o0.OVER:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let f=0;f<this._png.channels;f++){const g=r.data[c+this._png.channels-1]/i,y=f%(this._png.channels-1)===0?1:r.data[c+f],p=Math.floor(g*y+(1-g)*n.data[l+f]);n.data[l+f]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==cv.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===a0.NO_INTERLACE)this._png.data=ov({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===a0.ADAM7)this._png.data=H8({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zd.NONE,blendOp:o0.SOURCE,data:n}),this._inflator=new iv,this._writingDataChunks=!1}}function aA(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var uv;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(uv||(uv={}));function oA(e,t){return new sA(e,t).decode()}var dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function l0(){dt.console&&typeof dt.console.log=="function"&&dt.console.log.apply(dt.console,arguments)}var rn={log:l0,warn:function(e){dt.console&&(typeof dt.console.warn=="function"?dt.console.warn.apply(dt.console,arguments):l0.call(null,arguments))},error:function(e){dt.console&&(typeof dt.console.error=="function"?dt.console.error.apply(dt.console,arguments):l0(e))}};function c0(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){lo(r.response,t,n)},r.onerror=function(){rn.error("could not download file")},r.send()}function dv(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Qd(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var lo=dt.saveAs||((typeof window>"u"?"undefined":Zt(window))!=="object"||window!==dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=dt.URL||dt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?dv(i.href)?c0(e,t,n):Qd(i,i.target="_blank"):Qd(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Qd(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(dv(e))c0(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Qd(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Zt(s)!=="object"&&(rn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return c0(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(dt.HTMLElement)||dt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Zt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},o.readAsDataURL(e)}else{var l=dt.URL||dt.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bb(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var vh=dt.atob.bind(dt),hv=dt.btoa.bind(dt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function u0(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=vr(n,r,i,s,t[0],7,-680876936),s=vr(s,n,r,i,t[1],12,-389564586),i=vr(i,s,n,r,t[2],17,606105819),r=vr(r,i,s,n,t[3],22,-1044525330),n=vr(n,r,i,s,t[4],7,-176418897),s=vr(s,n,r,i,t[5],12,1200080426),i=vr(i,s,n,r,t[6],17,-1473231341),r=vr(r,i,s,n,t[7],22,-45705983),n=vr(n,r,i,s,t[8],7,1770035416),s=vr(s,n,r,i,t[9],12,-1958414417),i=vr(i,s,n,r,t[10],17,-42063),r=vr(r,i,s,n,t[11],22,-1990404162),n=vr(n,r,i,s,t[12],7,1804603682),s=vr(s,n,r,i,t[13],12,-40341101),i=vr(i,s,n,r,t[14],17,-1502002290),n=yr(n,r=vr(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=yr(s,n,r,i,t[6],9,-1069501632),i=yr(i,s,n,r,t[11],14,643717713),r=yr(r,i,s,n,t[0],20,-373897302),n=yr(n,r,i,s,t[5],5,-701558691),s=yr(s,n,r,i,t[10],9,38016083),i=yr(i,s,n,r,t[15],14,-660478335),r=yr(r,i,s,n,t[4],20,-405537848),n=yr(n,r,i,s,t[9],5,568446438),s=yr(s,n,r,i,t[14],9,-1019803690),i=yr(i,s,n,r,t[3],14,-187363961),r=yr(r,i,s,n,t[8],20,1163531501),n=yr(n,r,i,s,t[13],5,-1444681467),s=yr(s,n,r,i,t[2],9,-51403784),i=yr(i,s,n,r,t[7],14,1735328473),n=xr(n,r=yr(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=xr(s,n,r,i,t[8],11,-2022574463),i=xr(i,s,n,r,t[11],16,1839030562),r=xr(r,i,s,n,t[14],23,-35309556),n=xr(n,r,i,s,t[1],4,-1530992060),s=xr(s,n,r,i,t[4],11,1272893353),i=xr(i,s,n,r,t[7],16,-155497632),r=xr(r,i,s,n,t[10],23,-1094730640),n=xr(n,r,i,s,t[13],4,681279174),s=xr(s,n,r,i,t[0],11,-358537222),i=xr(i,s,n,r,t[3],16,-722521979),r=xr(r,i,s,n,t[6],23,76029189),n=xr(n,r,i,s,t[9],4,-640364487),s=xr(s,n,r,i,t[12],11,-421815835),i=xr(i,s,n,r,t[15],16,530742520),n=wr(n,r=xr(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=wr(s,n,r,i,t[7],10,1126891415),i=wr(i,s,n,r,t[14],15,-1416354905),r=wr(r,i,s,n,t[5],21,-57434055),n=wr(n,r,i,s,t[12],6,1700485571),s=wr(s,n,r,i,t[3],10,-1894986606),i=wr(i,s,n,r,t[10],15,-1051523),r=wr(r,i,s,n,t[1],21,-2054922799),n=wr(n,r,i,s,t[8],6,1873313359),s=wr(s,n,r,i,t[15],10,-30611744),i=wr(i,s,n,r,t[6],15,-1560198380),r=wr(r,i,s,n,t[13],21,1309151649),n=wr(n,r,i,s,t[4],6,-145523070),s=wr(s,n,r,i,t[11],10,-1120210379),i=wr(i,s,n,r,t[2],15,718787259),r=wr(r,i,s,n,t[9],21,-343485551),e[0]=_a(n,e[0]),e[1]=_a(r,e[1]),e[2]=_a(i,e[2]),e[3]=_a(s,e[3])}function Cf(e,t,n,r,i,s){return t=_a(_a(t,e),_a(r,s)),_a(t<<i|t>>>32-i,n)}function vr(e,t,n,r,i,s,a){return Cf(t&n|~t&r,e,t,i,s,a)}function yr(e,t,n,r,i,s,a){return Cf(t&r|n&~r,e,t,i,s,a)}function xr(e,t,n,r,i,s,a){return Cf(t^n^r,e,t,i,s,a)}function wr(e,t,n,r,i,s,a){return Cf(n^(t|~r),e,t,i,s,a)}function _b(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)u0(r,lA(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(u0(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,u0(r,i),r}function lA(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var fv="0123456789abcdef".split("");function cA(e){for(var t="",n=0;n<4;n++)t+=fv[e>>8*n+4&15]+fv[e>>8*n&15];return t}function uA(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function F1(e){return _b(e).map(uA).join("")}var dA=function(e){for(var t=0;t<e.length;t++)e[t]=cA(e[t]);return e.join("")}(_b("hello"))!="5d41402abc4b2a76b9719d911017c592";function _a(e,t){if(dA){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D1(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var f=o[l];c=(c+f+a.charCodeAt(l))%256,o[l]=o[c],o[c]=f}n=e,r=o}else o=r;var g=t.length,y=0,p=0,k="";for(l=0;l<g;l++)p=(p+(f=o[y=(y+1)%256]))%256,o[y]=o[p],o[p]=f,a=o[(o[y]+o[p])%256],k+=String.fromCharCode(t.charCodeAt(l)^a);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var pv={print:4,modify:8,copy:16,"annot-forms":32};function al(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(o){if(pv.perm!==void 0)throw new Error("Invalid permission: "+o);i+=pv[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=F1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=D1(this.encryptionKey,this.padding)}function ol(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function mv(e){if(Zt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(o){dt.console&&rn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function tf(e){if(!(this instanceof tf))return new tf(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Nb(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function uo(e,t,n,r,i){if(!(this instanceof uo))return new uo(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Nb.call(this,r,i)}function wl(e,t,n,r,i){if(!(this instanceof wl))return new wl(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Nb.call(this,r,i)}function ot(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",f=null;Zt(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=mv;var k="1.3",_=p.__private__.getPdfVersion=function(){return k};p.__private__.setPdfVersion=function(m){k=m};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return A};var x=p.__private__.getPageFormat=function(m){return A[m]};i=i||"a4";var b="compat",N="advanced",C=b;function K(){this.saveGraphicsState(),F(new Me(pt,0,0,-pt,0,Ga()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),c="n",C=N}function T(){this.restoreGraphicsState(),c="S",C=b}var M=p.__private__.combineFontStyleAndFontWeight=function(m,E){if(m=="bold"&&E=="normal"||m=="bold"&&E==400||m=="normal"&&E=="italic"||m=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(m=E==400||E==="normal"?m==="italic"?"italic":"normal":E!=700&&E!=="bold"||m!=="normal"?(E==700?"bold":E)+""+m:"bold"),m};p.advancedAPI=function(m){var E=C===b;return E&&K.call(this),typeof m!="function"||(m(this),E&&T.call(this)),this},p.compatAPI=function(m){var E=C===N;return E&&T.call(this),typeof m!="function"||(m(this),E&&K.call(this)),this},p.isAdvancedAPI=function(){return C===N};var I,S=function(m){if(C!==N)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=p.roundToPrecision=p.__private__.roundToPrecision=function(m,E){var V=t||E;if(isNaN(m)||isNaN(V))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(V).replace(/0+$/,"")};I=p.hpf=p.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return z(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return z(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return z(m,16)};var j=p.f2=p.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return z(m,2)},R=p.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return z(m,3)},$=p.scale=p.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return C===b?m*pt:C===N?m:void 0},J=function(m){return $(function(E){return C===b?Ga()-E:C===N?E:void 0}(m))};p.__private__.setPrecision=p.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var X,le="00000000000000000000000000000000",de=p.__private__.getFileId=function(){return le},Z=p.__private__.setFileId=function(m){return le=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&($n=new al(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};p.setFileId=function(m){return Z(m),this},p.getFileId=function(){return de()};var se=p.__private__.convertDateToPDFDate=function(m){var E=m.getTimezoneOffset(),V=E<0?"+":"-",ee=Math.floor(Math.abs(E/60)),oe=Math.abs(E%60),Se=[V,G(ee),"'",G(oe),"'"].join("");return["D:",m.getFullYear(),G(m.getMonth()+1),G(m.getDate()),G(m.getHours()),G(m.getMinutes()),G(m.getSeconds()),Se].join("")},ve=p.__private__.convertPDFDateToDate=function(m){var E=parseInt(m.substr(2,4),10),V=parseInt(m.substr(6,2),10)-1,ee=parseInt(m.substr(8,2),10),oe=parseInt(m.substr(10,2),10),Se=parseInt(m.substr(12,2),10),Ce=parseInt(m.substr(14,2),10);return new Date(E,V,ee,oe,Se,Ce,0)},fe=p.__private__.setCreationDate=function(m){var E;if(m===void 0&&(m=new Date),m instanceof Date)E=se(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=m}return X=E},P=p.__private__.getCreationDate=function(m){var E=X;return m==="jsDate"&&(E=ve(X)),E};p.setCreationDate=function(m){return fe(m),this},p.getCreationDate=function(m){return P(m)};var q,G=p.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},Y=p.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},Q=0,ae=[],te=[],ge=0,xe=[],je=[],Ue=!1,Te=te;p.__private__.setCustomOutputDestination=function(m){Ue=!0,Te=m};var We=function(m){Ue||(Te=m)};p.__private__.resetCustomOutputDestination=function(){Ue=!1,Te=te};var F=p.__private__.out=function(m){return m=m.toString(),ge+=m.length+1,Te.push(m),Te},re=p.__private__.write=function(m){return F(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Ie=p.__private__.getArrayBuffer=function(m){for(var E=m.length,V=new ArrayBuffer(E),ee=new Uint8Array(V);E--;)ee[E]=m.charCodeAt(E);return V},ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ze};var we=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(m){return we=C===N?m/pt:m,this};var Xe,$e=p.__private__.getFontSize=p.getFontSize=function(){return C===b?we:we*pt},Ye=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(m){return Ye=m,this},p.__private__.getR2L=p.getR2L=function(){return Ye};var et,Ut=p.__private__.setZoomMode=function(m){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Xe=m;else if(isNaN(m)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Xe=m}else Xe=parseInt(m,10)};p.__private__.getZoomMode=function(){return Xe};var Lt,ft=p.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');et=m};p.__private__.getPageMode=function(){return et};var Ct=p.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');Lt=m};p.__private__.getLayoutMode=function(){return Lt},p.__private__.setDisplayMode=p.setDisplayMode=function(m,E,V){return Ut(m),Ct(E),ft(V),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(m){if(Object.keys(At).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[m]},p.__private__.getDocumentProperties=function(){return At},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(m){for(var E in At)At.hasOwnProperty(E)&&m[E]&&(At[E]=m[E]);return this},p.__private__.setDocumentProperty=function(m,E){if(Object.keys(At).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[m]=E};var tt,pt,it,xn,Rt,_t={},Nt={},sn=[],lt={},_e={},ce={},Le={},De=null,ye=0,Ne=[],Oe=new mv(p),qe=e.hotfixes||[],ut={},Bt={},Ve=[],Me=function m(E,V,ee,oe,Se,Ce){if(!(this instanceof m))return new m(E,V,ee,oe,Se,Ce);isNaN(E)&&(E=1),isNaN(V)&&(V=0),isNaN(ee)&&(ee=0),isNaN(oe)&&(oe=1),isNaN(Se)&&(Se=0),isNaN(Ce)&&(Ce=0),this._matrix=[E,V,ee,oe,Se,Ce]};Object.defineProperty(Me.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Me.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Me.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Me.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Me.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Me.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Me.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Me.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Me.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Me.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Me.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Me.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Me.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Me.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Me.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Me.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Me.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(m)},Me.prototype.multiply=function(m){var E=m.sx*this.sx+m.shy*this.shx,V=m.sx*this.shy+m.shy*this.sy,ee=m.shx*this.sx+m.sy*this.shx,oe=m.shx*this.shy+m.sy*this.sy,Se=m.tx*this.sx+m.ty*this.shx+this.tx,Ce=m.tx*this.shy+m.ty*this.sy+this.ty;return new Me(E,V,ee,oe,Se,Ce)},Me.prototype.decompose=function(){var m=this.sx,E=this.shy,V=this.shx,ee=this.sy,oe=this.tx,Se=this.ty,Ce=Math.sqrt(m*m+E*E),Qe=(m/=Ce)*V+(E/=Ce)*ee;V-=m*Qe,ee-=E*Qe;var st=Math.sqrt(V*V+ee*ee);return Qe/=st,m*(ee/=st)<E*(V/=st)&&(m=-m,E=-E,Qe=-Qe,Ce=-Ce),{scale:new Me(Ce,0,0,st,0,0),translate:new Me(1,0,0,1,oe,Se),rotate:new Me(m,E,-E,m,0,0),skew:new Me(1,0,Qe,1,0,0)}},Me.prototype.toString=function(m){return this.join(" ")},Me.prototype.inversed=function(){var m=this.sx,E=this.shy,V=this.shx,ee=this.sy,oe=this.tx,Se=this.ty,Ce=1/(m*ee-E*V),Qe=ee*Ce,st=-E*Ce,ht=-V*Ce,wt=m*Ce;return new Me(Qe,st,ht,wt,-Qe*oe-ht*Se,-st*oe-wt*Se)},Me.prototype.applyToPoint=function(m){var E=m.x*this.sx+m.y*this.shx+this.tx,V=m.x*this.shy+m.y*this.sy+this.ty;return new ys(E,V)},Me.prototype.applyToRectangle=function(m){var E=this.applyToPoint(m),V=this.applyToPoint(new ys(m.x+m.w,m.y+m.h));return new ic(E.x,E.y,V.x-E.x,V.y-E.y)},Me.prototype.clone=function(){var m=this.sx,E=this.shy,V=this.shx,ee=this.sy,oe=this.tx,Se=this.ty;return new Me(m,E,V,ee,oe,Se)},p.Matrix=Me;var Ze=p.matrixMult=function(m,E){return E.multiply(m)},Xt=new Me(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Xt;var ct=function(m,E){if(!_e[m]){var V=(E instanceof uo?"Sh":"P")+(Object.keys(lt).length+1).toString(10);E.id=V,_e[m]=V,lt[V]=E,Oe.publish("addPattern",E)}};p.ShadingPattern=uo,p.TilingPattern=wl,p.addShadingPattern=function(m,E){return S("addShadingPattern()"),ct(m,E),this},p.beginTilingPattern=function(m){S("beginTilingPattern()"),sc(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},p.endTilingPattern=function(m,E){S("endTilingPattern()"),E.stream=je[q].join(`
`),ct(m,E),Oe.publish("endTilingPattern",E),Ve.pop().restore()};var It,Ot=p.__private__.newObject=function(){var m=dn();return Ln(m,!0),m},dn=p.__private__.newObjectDeferred=function(){return Q++,ae[Q]=function(){return ge},Q},Ln=function(m,E){return E=typeof E=="boolean"&&E,ae[m]=ge,E&&F(m+" 0 obj"),m},Ei=p.__private__.newAdditionalObject=function(){var m={objId:dn(),content:""};return xe.push(m),m},Mn=dn(),fr=dn(),Nr=p.__private__.decodeColorString=function(m){var E=m.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var V=parseFloat(E[0]);E=[V,V,V,"r"]}for(var ee="#",oe=0;oe<3;oe++)ee+=("0"+Math.floor(255*parseFloat(E[oe])).toString(16)).slice(-2);return ee},He=p.__private__.encodeColorString=function(m){var E;typeof m=="string"&&(m={ch1:m});var V=m.ch1,ee=m.ch2,oe=m.ch3,Se=m.ch4,Ce=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof V=="string"&&V.charAt(0)!=="#"){var Qe=new bb(V);if(Qe.ok)V=Qe.toHex();else if(!/^\d*\.?\d*$/.test(V))throw new Error('Invalid color "'+V+'" passed to jsPDF.encodeColorString.')}if(typeof V=="string"&&/^#[0-9A-Fa-f]{3}$/.test(V)&&(V="#"+V[1]+V[1]+V[2]+V[2]+V[3]+V[3]),typeof V=="string"&&/^#[0-9A-Fa-f]{6}$/.test(V)){var st=parseInt(V.substr(1),16);V=st>>16&255,ee=st>>8&255,oe=255&st}if(ee===void 0||Se===void 0&&V===ee&&ee===oe)E=typeof V=="string"?V+" "+Ce[0]:m.precision===2?j(V/255)+" "+Ce[0]:R(V/255)+" "+Ce[0];else if(Se===void 0||Zt(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return["1.","1.","1.",Ce[1]].join(" ");E=typeof V=="string"?[V,ee,oe,Ce[1]].join(" "):m.precision===2?[j(V/255),j(ee/255),j(oe/255),Ce[1]].join(" "):[R(V/255),R(ee/255),R(oe/255),Ce[1]].join(" ")}else E=typeof V=="string"?[V,ee,oe,Se,Ce[2]].join(" "):m.precision===2?[j(V),j(ee),j(oe),j(Se),Ce[2]].join(" "):[R(V),R(ee),R(oe),R(Se),Ce[2]].join(" ");return E},an=p.__private__.getFilters=function(){return a},Wt=p.__private__.putStream=function(m){var E=(m=m||{}).data||"",V=m.filters||an(),ee=m.alreadyAppliedFilters||[],oe=m.addLength1||!1,Se=E.length,Ce=m.objectId,Qe=function(Hn){return Hn};if(f!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Qe=$n.encryptor(Ce,0));var st={};V===!0&&(V=["FlateEncode"]);var ht=m.additionalKeyValues||[],wt=(st=ot.API.processDataByFilters!==void 0?ot.API.processDataByFilters(E,V):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(ee)?ee.join(" "):ee.toString());if(st.data.length!==0&&(ht.push({key:"Length",value:st.data.length}),oe===!0&&ht.push({key:"Length1",value:Se})),wt.length!=0)if(wt.split("/").length-1==1)ht.push({key:"Filter",value:wt});else{ht.push({key:"Filter",value:"["+wt+"]"});for(var qt=0;qt<ht.length;qt+=1)if(ht[qt].key==="DecodeParms"){for(var bn=[],Bn=0;Bn<st.reverseChain.split("/").length-1;Bn+=1)bn.push("null");bn.push(ht[qt].value),ht[qt].value="["+bn.join(" ")+"]"}}F("<<");for(var on=0;on<ht.length;on++)F("/"+ht[on].key+" "+ht[on].value);F(">>"),st.data.length!==0&&(F("stream"),F(Qe(st.data)),F("endstream"))},wn=p.__private__.putPage=function(m){var E=m.number,V=m.data,ee=m.objId,oe=m.contentsObjId;Ln(ee,!0),F("<</Type /Page"),F("/Parent "+m.rootDictionaryObjId+" 0 R"),F("/Resources "+m.resourceDictionaryObjId+" 0 R"),F("/MediaBox ["+parseFloat(I(m.mediaBox.bottomLeftX))+" "+parseFloat(I(m.mediaBox.bottomLeftY))+" "+I(m.mediaBox.topRightX)+" "+I(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&F("/CropBox ["+I(m.cropBox.bottomLeftX)+" "+I(m.cropBox.bottomLeftY)+" "+I(m.cropBox.topRightX)+" "+I(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&F("/BleedBox ["+I(m.bleedBox.bottomLeftX)+" "+I(m.bleedBox.bottomLeftY)+" "+I(m.bleedBox.topRightX)+" "+I(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&F("/TrimBox ["+I(m.trimBox.bottomLeftX)+" "+I(m.trimBox.bottomLeftY)+" "+I(m.trimBox.topRightX)+" "+I(m.trimBox.topRightY)+"]"),m.artBox!==null&&F("/ArtBox ["+I(m.artBox.bottomLeftX)+" "+I(m.artBox.bottomLeftY)+" "+I(m.artBox.topRightX)+" "+I(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&F("/UserUnit "+m.userUnit),Oe.publish("putPage",{objId:ee,pageContext:Ne[E],pageNumber:E,page:V}),F("/Contents "+oe+" 0 R"),F(">>"),F("endobj");var Se=V.join(`
`);return C===N&&(Se+=`
Q`),Ln(oe,!0),Wt({data:Se,filters:an(),objectId:oe}),F("endobj"),ee},en=p.__private__.putPages=function(){var m,E,V=[];for(m=1;m<=ye;m++)Ne[m].objId=dn(),Ne[m].contentsObjId=dn();for(m=1;m<=ye;m++)V.push(wn({number:m,data:je[m],objId:Ne[m].objId,contentsObjId:Ne[m].contentsObjId,mediaBox:Ne[m].mediaBox,cropBox:Ne[m].cropBox,bleedBox:Ne[m].bleedBox,trimBox:Ne[m].trimBox,artBox:Ne[m].artBox,userUnit:Ne[m].userUnit,rootDictionaryObjId:Mn,resourceDictionaryObjId:fr}));Ln(Mn,!0),F("<</Type /Pages");var ee="/Kids [";for(E=0;E<ye;E++)ee+=V[E]+" 0 R ";F(ee+"]"),F("/Count "+ye),F(">>"),F("endobj"),Oe.publish("postPutPages")},di=function(m){Oe.publish("putFont",{font:m,out:F,newObject:Ot,putStream:Wt}),m.isAlreadyPutted!==!0&&(m.objectNumber=Ot(),F("<<"),F("/Type /Font"),F("/BaseFont /"+ol(m.postScriptName)),F("/Subtype /Type1"),typeof m.encoding=="string"&&F("/Encoding /"+m.encoding),F("/FirstChar 32"),F("/LastChar 255"),F(">>"),F("endobj"))},Li=function(m){m.objectNumber=Ot();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[I(m.x),I(m.y),I(m.x+m.width),I(m.y+m.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var V=m.pages[1].join(`
`);Wt({data:V,additionalKeyValues:E,objectId:m.objectNumber}),F("endobj")},Wr=function(m,E){E||(E=21);var V=Ot(),ee=function(Ce,Qe){var st,ht=[],wt=1/(Qe-1);for(st=0;st<1;st+=wt)ht.push(st);if(ht.push(1),Ce[0].offset!=0){var qt={offset:0,color:Ce[0].color};Ce.unshift(qt)}if(Ce[Ce.length-1].offset!=1){var bn={offset:1,color:Ce[Ce.length-1].color};Ce.push(bn)}for(var Bn="",on=0,Hn=0;Hn<ht.length;Hn++){for(st=ht[Hn];st>Ce[on+1].offset;)on++;var zn=Ce[on].offset,rr=(st-zn)/(Ce[on+1].offset-zn),bs=Ce[on].color,Pi=Ce[on+1].color;Bn+=Y(Math.round((1-rr)*bs[0]+rr*Pi[0]).toString(16))+Y(Math.round((1-rr)*bs[1]+rr*Pi[1]).toString(16))+Y(Math.round((1-rr)*bs[2]+rr*Pi[2]).toString(16))}return Bn.trim()}(m.colors,E),oe=[];oe.push({key:"FunctionType",value:"0"}),oe.push({key:"Domain",value:"[0.0 1.0]"}),oe.push({key:"Size",value:"["+E+"]"}),oe.push({key:"BitsPerSample",value:"8"}),oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wt({data:ee,additionalKeyValues:oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:V}),F("endobj"),m.objectNumber=Ot(),F("<< /ShadingType "+m.type),F("/ColorSpace /DeviceRGB");var Se="/Coords ["+I(parseFloat(m.coords[0]))+" "+I(parseFloat(m.coords[1]))+" ";m.type===2?Se+=I(parseFloat(m.coords[2]))+" "+I(parseFloat(m.coords[3])):Se+=I(parseFloat(m.coords[2]))+" "+I(parseFloat(m.coords[3]))+" "+I(parseFloat(m.coords[4]))+" "+I(parseFloat(m.coords[5])),F(Se+="]"),m.matrix&&F("/Matrix ["+m.matrix.toString()+"]"),F("/Function "+V+" 0 R"),F("/Extend [true true]"),F(">>"),F("endobj")},Ws=function(m,E){var V=dn(),ee=Ot();E.push({resourcesOid:V,objectOid:ee}),m.objectNumber=ee;var oe=[];oe.push({key:"Type",value:"/Pattern"}),oe.push({key:"PatternType",value:"1"}),oe.push({key:"PaintType",value:"1"}),oe.push({key:"TilingType",value:"1"}),oe.push({key:"BBox",value:"["+m.boundingBox.map(I).join(" ")+"]"}),oe.push({key:"XStep",value:I(m.xStep)}),oe.push({key:"YStep",value:I(m.yStep)}),oe.push({key:"Resources",value:V+" 0 R"}),m.matrix&&oe.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Wt({data:m.stream,additionalKeyValues:oe,objectId:m.objectNumber}),F("endobj")},Fo=function(m){for(var E in m.objectNumber=Ot(),F("<<"),m)switch(E){case"opacity":F("/ca "+j(m[E]));break;case"stroke-opacity":F("/CA "+j(m[E]))}F(">>"),F("endobj")},Vs=function(m){Ln(m.resourcesOid,!0),F("<<"),F("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var E in F("/Font <<"),_t)_t.hasOwnProperty(E)&&(g===!1||g===!0&&y.hasOwnProperty(E))&&F("/"+E+" "+_t[E].objectNumber+" 0 R");F(">>")}(),function(){if(Object.keys(lt).length>0){for(var E in F("/Shading <<"),lt)lt.hasOwnProperty(E)&&lt[E]instanceof uo&&lt[E].objectNumber>=0&&F("/"+E+" "+lt[E].objectNumber+" 0 R");Oe.publish("putShadingPatternDict"),F(">>")}}(),function(E){if(Object.keys(lt).length>0){for(var V in F("/Pattern <<"),lt)lt.hasOwnProperty(V)&&lt[V]instanceof p.TilingPattern&&lt[V].objectNumber>=0&&lt[V].objectNumber<E&&F("/"+V+" "+lt[V].objectNumber+" 0 R");Oe.publish("putTilingPatternDict"),F(">>")}}(m.objectOid),function(){if(Object.keys(ce).length>0){var E;for(E in F("/ExtGState <<"),ce)ce.hasOwnProperty(E)&&ce[E].objectNumber>=0&&F("/"+E+" "+ce[E].objectNumber+" 0 R");Oe.publish("putGStateDict"),F(">>")}}(),function(){for(var E in F("/XObject <<"),ut)ut.hasOwnProperty(E)&&ut[E].objectNumber>=0&&F("/"+E+" "+ut[E].objectNumber+" 0 R");Oe.publish("putXobjectDict"),F(">>")}(),F(">>"),F("endobj")},Do=function(m){Nt[m.fontName]=Nt[m.fontName]||{},Nt[m.fontName][m.fontStyle]=m.id},Hu=function(m,E,V,ee,oe){var Se={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:m,fontName:E,fontStyle:V,encoding:ee,isStandardFont:oe||!1,metadata:{}};return Oe.publish("addFont",{font:Se,instance:this}),_t[Se.id]=Se,Do(Se),Se.id},hi=p.__private__.pdfEscape=p.pdfEscape=function(m,E){return function(V,ee){var oe,Se,Ce,Qe,st,ht,wt,qt,bn;if(Ce=(ee=ee||{}).sourceEncoding||"Unicode",st=ee.outputEncoding,(ee.autoencode||st)&&_t[tt].metadata&&_t[tt].metadata[Ce]&&_t[tt].metadata[Ce].encoding&&(Qe=_t[tt].metadata[Ce].encoding,!st&&_t[tt].encoding&&(st=_t[tt].encoding),!st&&Qe.codePages&&(st=Qe.codePages[0]),typeof st=="string"&&(st=Qe[st]),st)){for(wt=!1,ht=[],oe=0,Se=V.length;oe<Se;oe++)(qt=st[V.charCodeAt(oe)])?ht.push(String.fromCharCode(qt)):ht.push(V[oe]),ht[oe].charCodeAt(0)>>8&&(wt=!0);V=ht.join("")}for(oe=V.length;wt===void 0&&oe!==0;)V.charCodeAt(oe-1)>>8&&(wt=!0),oe--;if(!wt)return V;for(ht=ee.noBOM?[]:[254,255],oe=0,Se=V.length;oe<Se;oe++){if((bn=(qt=V.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ht.push(bn),ht.push(qt-(bn<<8))}return String.fromCharCode.apply(void 0,ht)}(m,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zl=p.__private__.beginPage=function(m){je[++ye]=[],Ne[ye]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},Vu(ye),We(je[q])},Wu=function(m,E){var V,ee,oe;switch(n=E||n,typeof m=="string"&&(V=x(m.toLowerCase()),Array.isArray(V)&&(ee=V[0],oe=V[1])),Array.isArray(m)&&(ee=m[0]*pt,oe=m[1]*pt),isNaN(ee)&&(ee=i[0],oe=i[1]),(ee>14400||oe>14400)&&(rn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ee=Math.min(14400,ee),oe=Math.min(14400,oe)),i=[ee,oe],n.substr(0,1)){case"l":oe>ee&&(i=[oe,ee]);break;case"p":ee>oe&&(i=[oe,ee])}Zl(i),mt(ec),F(zo),nc!==0&&F(nc+" J"),rc!==0&&F(rc+" j"),Oe.publish("addPage",{pageNumber:ye})},Ql=function(m){m>0&&m<=ye&&(je.splice(m,1),Ne.splice(m,1),ye--,q>ye&&(q=ye),this.setPage(q))},Vu=function(m){m>0&&m<=ye&&(q=m)},Gu=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return je.length-1},Ku=function(m,E,V){var ee,oe=void 0;return V=V||{},m=m!==void 0?m:_t[tt].fontName,E=E!==void 0?E:_t[tt].fontStyle,ee=m.toLowerCase(),Nt[ee]!==void 0&&Nt[ee][E]!==void 0?oe=Nt[ee][E]:Nt[m]!==void 0&&Nt[m][E]!==void 0?oe=Nt[m][E]:V.disableWarning===!1&&rn.warn("Unable to look up font label for font '"+m+"', '"+E+"'. Refer to getFontList() for available fonts."),oe||V.noFallback||(oe=Nt.times[E])==null&&(oe=Nt.times.normal),oe},Ki=p.__private__.putInfo=function(){var m=Ot(),E=function(ee){return ee};for(var V in f!==null&&(E=$n.encryptor(m,0)),F("<<"),F("/Producer ("+hi(E("jsPDF "+ot.version))+")"),At)At.hasOwnProperty(V)&&At[V]&&F("/"+V.substr(0,1).toUpperCase()+V.substr(1)+" ("+hi(E(At[V]))+")");F("/CreationDate ("+hi(E(X))+")"),F(">>"),F("endobj")},Mo=p.__private__.putCatalog=function(m){var E=(m=m||{}).rootDictionaryObjId||Mn;switch(Ot(),F("<<"),F("/Type /Catalog"),F("/Pages "+E+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":F("/OpenAction [3 0 R /FitH null]");break;case"fullheight":F("/OpenAction [3 0 R /FitV null]");break;case"fullpage":F("/OpenAction [3 0 R /Fit]");break;case"original":F("/OpenAction [3 0 R /XYZ null null 1]");break;default:var V=""+Xe;V.substr(V.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&F("/OpenAction [3 0 R /XYZ null null "+j(Xe)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":F("/PageLayout /OneColumn");break;case"single":F("/PageLayout /SinglePage");break;case"two":case"twoleft":F("/PageLayout /TwoColumnLeft");break;case"tworight":F("/PageLayout /TwoColumnRight")}et&&F("/PageMode /"+et),Oe.publish("putCatalog"),F(">>"),F("endobj")},Pf=p.__private__.putTrailer=function(){F("trailer"),F("<<"),F("/Size "+(Q+1)),F("/Root "+Q+" 0 R"),F("/Info "+(Q-1)+" 0 R"),f!==null&&F("/Encrypt "+$n.oid+" 0 R"),F("/ID [ <"+le+"> <"+le+"> ]"),F(">>")},Un=p.__private__.putHeader=function(){F("%PDF-"+k),F("%")},Ju=p.__private__.putXRef=function(){var m="0000000000";F("xref"),F("0 "+(Q+1)),F("0000000000 65535 f ");for(var E=1;E<=Q;E++)typeof ae[E]=="function"?F((m+ae[E]()).slice(-10)+" 00000 n "):ae[E]!==void 0?F((m+ae[E]).slice(-10)+" 00000 n "):F("0000000000 00000 n ")},Ji=p.__private__.buildDocument=function(){var m;Q=0,ge=0,te=[],ae=[],xe=[],Mn=dn(),fr=dn(),We(te),Oe.publish("buildDocument"),Un(),en(),function(){Oe.publish("putAdditionalObjects");for(var V=0;V<xe.length;V++){var ee=xe[V];Ln(ee.objId,!0),F(ee.content),F("endobj")}Oe.publish("postPutAdditionalObjects")}(),m=[],function(){for(var V in _t)_t.hasOwnProperty(V)&&(g===!1||g===!0&&y.hasOwnProperty(V))&&di(_t[V])}(),function(){var V;for(V in ce)ce.hasOwnProperty(V)&&Fo(ce[V])}(),function(){for(var V in ut)ut.hasOwnProperty(V)&&Li(ut[V])}(),function(V){var ee;for(ee in lt)lt.hasOwnProperty(ee)&&(lt[ee]instanceof uo?Wr(lt[ee]):lt[ee]instanceof wl&&Ws(lt[ee],V))}(m),Oe.publish("putResources"),m.forEach(Vs),Vs({resourcesOid:fr,objectOid:Number.MAX_SAFE_INTEGER}),Oe.publish("postPutResources"),f!==null&&($n.oid=Ot(),F("<<"),F("/Filter /Standard"),F("/V "+$n.v),F("/R "+$n.r),F("/U <"+$n.toHexString($n.U)+">"),F("/O <"+$n.toHexString($n.O)+">"),F("/P "+$n.P),F(">>"),F("endobj")),Ki(),Mo();var E=ge;return Ju(),Pf(),F("startxref"),F(""+E),F("%%EOF"),We(je[q]),te.join(`
`)},Uo=p.__private__.getBlob=function(m){return new Blob([Ie(m)],{type:"application/pdf"})},Yu=p.output=p.__private__.output=(It=function(m,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",m){case void 0:return Ji();case"save":p.save(E.filename);break;case"arraybuffer":return Ie(Ji());case"blob":return Uo(Ji());case"bloburi":case"bloburl":if(dt.URL!==void 0&&typeof dt.URL.createObjectURL=="function")return dt.URL&&dt.URL.createObjectURL(Uo(Ji()))||void 0;rn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var V="",ee=Ji();try{V=hv(ee)}catch{V=hv(unescape(encodeURIComponent(ee)))}return"data:application/pdf;filename="+E.filename+";base64,"+V;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(oe=E.pdfObjectUrl,Se="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+oe+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",Qe=dt.open();return Qe!==null&&Qe.document.write(Ce),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',ht=dt.open();if(ht!==null){ht.document.write(st);var wt=this;ht.document.documentElement.querySelector("#pdfViewer").onload=function(){ht.document.title=E.filename,ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wt.output("bloburl"))}}return ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',bn=dt.open();if(bn!==null&&(bn.document.write(qt),bn.document.title=E.filename),bn||typeof safari>"u")return bn;break;case"datauri":case"dataurl":return dt.document.location.href=this.output("datauristring",E);default:return null}},It.foo=function(){try{return It.apply(this,arguments)}catch(V){var m=V.stack||"";~m.indexOf(" at ")&&(m=m.split(" at ")[1]);var E="Error in function "+m.split(`
`)[0].split("<")[0]+": "+V.message;if(!dt.console)throw new Error(E);dt.console.error(E,V),dt.alert&&alert(E)}},It.foo.bar=It,It.foo),fi=function(m){return Array.isArray(qe)===!0&&qe.indexOf(m)>-1};switch(r){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=fi("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pt=r}var $n=null;fe(),Z();var ps=p.__private__.getPageInfo=p.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ne[m].objId,pageNumber:m,pageContext:Ne[m]}},Zu=p.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in Ne)if(Ne[E].objId===m)break;return ps(E)},Tf=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ne[q].objId,pageNumber:q,pageContext:Ne[q]}};p.addPage=function(){return Wu.apply(this,arguments),this},p.setPage=function(){return Vu.apply(this,arguments),We.call(this,je[q]),this},p.insertPage=function(m){return this.addPage(),this.movePage(q,m),this},p.movePage=function(m,E){var V,ee;if(m>E){V=je[m],ee=Ne[m];for(var oe=m;oe>E;oe--)je[oe]=je[oe-1],Ne[oe]=Ne[oe-1];je[E]=V,Ne[E]=ee,this.setPage(E)}else if(m<E){V=je[m],ee=Ne[m];for(var Se=m;Se<E;Se++)je[Se]=je[Se+1],Ne[Se]=Ne[Se+1];je[E]=V,Ne[E]=ee,this.setPage(E)}return this},p.deletePage=function(){return Ql.apply(this,arguments),this},p.__private__.text=p.text=function(m,E,V,ee,oe){var Se,Ce,Qe,st,ht,wt,qt,bn,Bn,on=(ee=ee||{}).scope||this;if(typeof m=="number"&&typeof E=="number"&&(typeof V=="string"||Array.isArray(V))){var Hn=V;V=E,E=m,m=Hn}if(arguments[3]instanceof Me==0?(Qe=arguments[4],st=arguments[5],Zt(qt=arguments[3])==="object"&&qt!==null||(typeof Qe=="string"&&(st=Qe,Qe=null),typeof qt=="string"&&(st=qt,qt=null),typeof qt=="number"&&(Qe=qt,qt=null),ee={flags:qt,angle:Qe,align:st})):(S("The transform parameter of text() with a Matrix value"),Bn=oe),isNaN(E)||isNaN(V)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return on;var zn,rr="",bs=typeof ee.lineHeightFactor=="number"?ee.lineHeightFactor:Ha,Pi=on.internal.scaleFactor;function _s(Gt){return Gt=Gt.split("	").join(Array(ee.TabLen||9).join(" ")),hi(Gt,qt)}function oc(Gt){for(var tn,Pn=Gt.concat(),Wn=[],Ss=Pn.length;Ss--;)typeof(tn=Pn.shift())=="string"?Wn.push(tn):Array.isArray(Gt)&&(tn.length===1||tn[1]===void 0&&tn[2]===void 0)?Wn.push(tn[0]):Wn.push([tn[0],tn[1],tn[2]]);return Wn}function $o(Gt,tn){var Pn;if(typeof Gt=="string")Pn=tn(Gt)[0];else if(Array.isArray(Gt)){for(var Wn,Ss,vc=Gt.concat(),Vo=[],ld=vc.length;ld--;)typeof(Wn=vc.shift())=="string"?Vo.push(tn(Wn)[0]):Array.isArray(Wn)&&typeof Wn[0]=="string"&&(Ss=tn(Wn[0],Wn[1],Wn[2]),Vo.push([Ss[0],Ss[1],Ss[2]]));Pn=Vo}return Pn}var Gs=!1,Ka=!0;if(typeof m=="string")Gs=!0;else if(Array.isArray(m)){var Ja=m.concat();Ce=[];for(var Ks,ir=Ja.length;ir--;)(typeof(Ks=Ja.shift())!="string"||Array.isArray(Ks)&&typeof Ks[0]!="string")&&(Ka=!1);Gs=Ka}if(Gs===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Ya=we/on.internal.scaleFactor,Za=Ya*(bs-1);switch(ee.baseline){case"bottom":V-=Za;break;case"top":V+=Ya-Za;break;case"hanging":V+=Ya-2*Za;break;case"middle":V+=Ya/2-Za}if((wt=ee.maxWidth||0)>0&&(typeof m=="string"?m=on.splitTextToSize(m,wt):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Gt,tn){return Gt.concat(on.splitTextToSize(tn,wt))},[]))),Se={text:m,x:E,y:V,options:ee,mutex:{pdfEscape:hi,activeFontKey:tt,fonts:_t,activeFontSize:we}},Oe.publish("preProcessText",Se),m=Se.text,Qe=(ee=Se.options).angle,Bn instanceof Me==0&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ee.rotationDirection===0&&(Qe=-Qe),C===N&&(Qe=-Qe);var lc=Math.cos(Qe),cc=Math.sin(Qe);Bn=new Me(lc,cc,-cc,lc,0,0)}else Qe&&Qe instanceof Me&&(Bn=Qe);C!==N||Bn||(Bn=Xt),(ht=ee.charSpace||vs)!==void 0&&(rr+=I($(ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(bn=ee.horizontalScale)!==void 0&&(rr+=I(100*bn)+` Tz
`),ee.lang;var kr=-1,Ns=ee.renderingMode!==void 0?ee.renderingMode:ee.stroke,Ho=on.internal.getCurrentPageInfo().pageContext;switch(Ns){case 0:case!1:case"fill":kr=0;break;case 1:case!0:case"stroke":kr=1;break;case 2:case"fillThenStroke":kr=2;break;case 3:case"invisible":kr=3;break;case 4:case"fillAndAddForClipping":kr=4;break;case 5:case"strokeAndAddPathForClipping":kr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":kr=6;break;case 7:case"addToPathForClipping":kr=7}var ad=Ho.usedRenderingMode!==void 0?Ho.usedRenderingMode:-1;kr!==-1?rr+=kr+` Tr
`:ad!==-1&&(rr+=`0 Tr
`),kr!==-1&&(Ho.usedRenderingMode=kr),st=ee.align||"left";var pi,Qa=we*bs,uc=on.internal.pageSize.getWidth(),dc=_t[tt];ht=ee.charSpace||vs,wt=ee.maxWidth||0,qt=Object.assign({autoencode:!0,noBOM:!0},ee.flags);var Js=[],Xa=function(Gt){return on.getStringUnitWidth(Gt,{font:dc,charSpace:ht,fontSize:we,doKerning:!1})*we/Pi};if(Object.prototype.toString.call(m)==="[object Array]"){var Vr;Ce=oc(m),st!=="left"&&(pi=Ce.map(Xa));var Gr,Ys=0;if(st==="right"){E-=pi[0],m=[],ir=Ce.length;for(var ks=0;ks<ir;ks++)ks===0?(Gr=ms(E),Vr=gs(V)):(Gr=$(Ys-pi[ks]),Vr=-Qa),m.push([Ce[ks],Gr,Vr]),Ys=pi[ks]}else if(st==="center"){E-=pi[0]/2,m=[],ir=Ce.length;for(var Zs=0;Zs<ir;Zs++)Zs===0?(Gr=ms(E),Vr=gs(V)):(Gr=$((Ys-pi[Zs])/2),Vr=-Qa),m.push([Ce[Zs],Gr,Vr]),Ys=pi[Zs]}else if(st==="left"){m=[],ir=Ce.length;for(var hc=0;hc<ir;hc++)m.push(Ce[hc])}else if(st==="justify"&&dc.encoding==="Identity-H"){m=[],ir=Ce.length,wt=wt!==0?wt:uc;for(var Wo=0,Cn=0;Cn<ir;Cn++)if(Vr=Cn===0?gs(V):-Qa,Gr=Cn===0?ms(E):Wo,Cn<ir-1){var od=$((wt-pi[Cn])/(Ce[Cn].split(" ").length-1)),Zi=Ce[Cn].split(" ");m.push([Zi[0]+" ",Gr,Vr]),Wo=0;for(var Qi=1;Qi<Zi.length;Qi++){var fc=(Xa(Zi[Qi-1]+" "+Zi[Qi])-Xa(Zi[Qi]))*Pi+od;Qi==Zi.length-1?m.push([Zi[Qi],fc,0]):m.push([Zi[Qi]+" ",fc,0]),Wo-=fc}}else m.push([Ce[Cn],Gr,Vr]);m.push(["",Wo,0])}else{if(st!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],ir=Ce.length,wt=wt!==0?wt:uc,Cn=0;Cn<ir;Cn++){Vr=Cn===0?gs(V):-Qa,Gr=Cn===0?ms(E):0;var pc=Ce[Cn].split(" ").length-1,mc=pc>0?(wt-pi[Cn])/pc:0;Cn<ir-1?Js.push(I($(mc))):Js.push(0),m.push([Ce[Cn],Gr,Vr])}}}(typeof ee.R2L=="boolean"?ee.R2L:Ye)===!0&&(m=$o(m,function(Gt,tn,Pn){return[Gt.split("").reverse().join(""),tn,Pn]})),Se={text:m,x:E,y:V,options:ee,mutex:{pdfEscape:hi,activeFontKey:tt,fonts:_t,activeFontSize:we}},Oe.publish("postProcessText",Se),m=Se.text,zn=Se.mutex.isHex||!1;var gc=_t[tt].encoding;gc!=="WinAnsiEncoding"&&gc!=="StandardEncoding"||(m=$o(m,function(Gt,tn,Pn){return[_s(Gt),tn,Pn]})),Ce=oc(m),m=[];for(var Qs,Xs,ea,eo=Array.isArray(Ce[0])?1:0,ta="",to=function(Gt,tn,Pn){var Wn="";return Pn instanceof Me?(Pn=typeof ee.angle=="number"?Ze(Pn,new Me(1,0,0,1,Gt,tn)):Ze(new Me(1,0,0,1,Gt,tn),Pn),C===N&&(Pn=Ze(new Me(1,0,0,-1,0,0),Pn)),Wn=Pn.join(" ")+` Tm
`):Wn=I(Gt)+" "+I(tn)+` Td
`,Wn},mi=0;mi<Ce.length;mi++){switch(ta="",eo){case 1:ea=(zn?"<":"(")+Ce[mi][0]+(zn?">":")"),Qs=parseFloat(Ce[mi][1]),Xs=parseFloat(Ce[mi][2]);break;case 0:ea=(zn?"<":"(")+Ce[mi]+(zn?">":")"),Qs=ms(E),Xs=gs(V)}Js!==void 0&&Js[mi]!==void 0&&(ta=Js[mi]+` Tw
`),mi===0?m.push(ta+to(Qs,Xs,Bn)+ea):eo===0?m.push(ta+ea):eo===1&&m.push(ta+to(Qs,Xs,Bn)+ea)}m=eo===0?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var Xi=`BT
/`;return Xi+=tt+" "+we+` Tf
`,Xi+=I(we*bs)+` TL
`,Xi+=Wa+`
`,Xi+=rr,Xi+=m,F(Xi+="ET"),y[tt]=!0,on};var If=p.__private__.clip=p.clip=function(m){return F(m==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return If("evenodd")},p.__private__.discardPath=p.discardPath=function(){return F("n"),this};var Yi=p.__private__.isValidStyle=function(m){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(E=!0),E};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(m){return Yi(m)&&(c=m),this};var Qu=p.__private__.getStyle=p.getStyle=function(m){var E=c;switch(m){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=m}return E},Xu=p.close=function(){return F("h"),this};p.stroke=function(){return F("S"),this},p.fill=function(m){return Bo("f",m),this},p.fillEvenOdd=function(m){return Bo("f*",m),this},p.fillStroke=function(m){return Bo("B",m),this},p.fillStrokeEvenOdd=function(m){return Bo("B*",m),this};var Bo=function(m,E){Zt(E)==="object"?Of(E,m):F(m)},$a=function(m){m===null||C===N&&m===void 0||(m=Qu(m),F(m))};function Rf(m,E,V,ee,oe){var Se=new wl(E||this.boundingBox,V||this.xStep,ee||this.yStep,this.gState,oe||this.matrix);Se.stream=this.stream;var Ce=m+"$$"+this.cloneIndex+++"$$";return ct(Ce,Se),Se}var Of=function(m,E){var V=_e[m.key],ee=lt[V];if(ee instanceof uo)F("q"),F(Ff(E)),ee.gState&&p.setGState(ee.gState),F(m.matrix.toString()+" cm"),F("/"+V+" sh"),F("Q");else if(ee instanceof wl){var oe=new Me(1,0,0,-1,0,Ga());m.matrix&&(oe=oe.multiply(m.matrix||Xt),V=Rf.call(ee,m.key,m.boundingBox,m.xStep,m.yStep,oe).id),F("q"),F("/Pattern cs"),F("/"+V+" scn"),ee.gState&&p.setGState(ee.gState),F(E),F("Q")}},Ff=function(m){switch(m){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xl=p.moveTo=function(m,E){return F(I($(m))+" "+I(J(E))+" m"),this},ed=p.lineTo=function(m,E){return F(I($(m))+" "+I(J(E))+" l"),this},Ci=p.curveTo=function(m,E,V,ee,oe,Se){return F([I($(m)),I(J(E)),I($(V)),I(J(ee)),I($(oe)),I(J(Se)),"c"].join(" ")),this};p.__private__.line=p.line=function(m,E,V,ee,oe){if(isNaN(m)||isNaN(E)||isNaN(V)||isNaN(ee)||!Yi(oe))throw new Error("Invalid arguments passed to jsPDF.line");return C===b?this.lines([[V-m,ee-E]],m,E,[1,1],oe||"S"):this.lines([[V-m,ee-E]],m,E,[1,1]).stroke()},p.__private__.lines=p.lines=function(m,E,V,ee,oe,Se){var Ce,Qe,st,ht,wt,qt,bn,Bn,on,Hn,zn,rr;if(typeof m=="number"&&(rr=V,V=E,E=m,m=rr),ee=ee||[1,1],Se=Se||!1,isNaN(E)||isNaN(V)||!Array.isArray(m)||!Array.isArray(ee)||!Yi(oe)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xl(E,V),Ce=ee[0],Qe=ee[1],ht=m.length,Hn=E,zn=V,st=0;st<ht;st++)(wt=m[st]).length===2?(Hn=wt[0]*Ce+Hn,zn=wt[1]*Qe+zn,ed(Hn,zn)):(qt=wt[0]*Ce+Hn,bn=wt[1]*Qe+zn,Bn=wt[2]*Ce+Hn,on=wt[3]*Qe+zn,Hn=wt[4]*Ce+Hn,zn=wt[5]*Qe+zn,Ci(qt,bn,Bn,on,Hn,zn));return Se&&Xu(),$a(oe),this},p.path=function(m){for(var E=0;E<m.length;E++){var V=m[E],ee=V.c;switch(V.op){case"m":Xl(ee[0],ee[1]);break;case"l":ed(ee[0],ee[1]);break;case"c":Ci.apply(this,ee);break;case"h":Xu()}}return this},p.__private__.rect=p.rect=function(m,E,V,ee,oe){if(isNaN(m)||isNaN(E)||isNaN(V)||isNaN(ee)||!Yi(oe))throw new Error("Invalid arguments passed to jsPDF.rect");return C===b&&(ee=-ee),F([I($(m)),I(J(E)),I($(V)),I($(ee)),"re"].join(" ")),$a(oe),this},p.__private__.triangle=p.triangle=function(m,E,V,ee,oe,Se,Ce){if(isNaN(m)||isNaN(E)||isNaN(V)||isNaN(ee)||isNaN(oe)||isNaN(Se)||!Yi(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[V-m,ee-E],[oe-V,Se-ee],[m-oe,E-Se]],m,E,[1,1],Ce,!0),this},p.__private__.roundedRect=p.roundedRect=function(m,E,V,ee,oe,Se,Ce){if(isNaN(m)||isNaN(E)||isNaN(V)||isNaN(ee)||isNaN(oe)||isNaN(Se)||!Yi(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return oe=Math.min(oe,.5*V),Se=Math.min(Se,.5*ee),this.lines([[V-2*oe,0],[oe*Qe,0,oe,Se-Se*Qe,oe,Se],[0,ee-2*Se],[0,Se*Qe,-oe*Qe,Se,-oe,Se],[2*oe-V,0],[-oe*Qe,0,-oe,-Se*Qe,-oe,-Se],[0,2*Se-ee],[0,-Se*Qe,oe*Qe,-Se,oe,-Se]],m+oe,E,[1,1],Ce,!0),this},p.__private__.ellipse=p.ellipse=function(m,E,V,ee,oe){if(isNaN(m)||isNaN(E)||isNaN(V)||isNaN(ee)||!Yi(oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*V,Ce=4/3*(Math.SQRT2-1)*ee;return Xl(m+V,E),Ci(m+V,E-Ce,m+Se,E-ee,m,E-ee),Ci(m-Se,E-ee,m-V,E-Ce,m-V,E),Ci(m-V,E+Ce,m-Se,E+ee,m,E+ee),Ci(m+Se,E+ee,m+V,E+Ce,m+V,E),$a(oe),this},p.__private__.circle=p.circle=function(m,E,V,ee){if(isNaN(m)||isNaN(E)||isNaN(V)||!Yi(ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,E,V,V,ee)},p.setFont=function(m,E,V){return V&&(E=M(E,V)),tt=Ku(m,E,{disableWarning:!1}),this};var Df=p.__private__.getFont=p.getFont=function(){return _t[Ku.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var m,E,V={};for(m in Nt)if(Nt.hasOwnProperty(m))for(E in V[m]=[],Nt[m])Nt[m].hasOwnProperty(E)&&V[m].push(E);return V},p.addFont=function(m,E,V,ee,oe){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?oe=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(V=M(V,ee)),Hu.call(this,m,E,V,oe=oe||"Identity-H")};var Ha,ec=e.lineWidth||.200025,Mf=p.__private__.getLineWidth=p.getLineWidth=function(){return ec},mt=p.__private__.setLineWidth=p.setLineWidth=function(m){return ec=m,F(I($(m))+" w"),this};p.__private__.setLineDash=ot.API.setLineDash=ot.API.setLineDashPattern=function(m,E){if(m=m||[],E=E||0,isNaN(E)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(V){return I($(V))}).join(" "),E=I($(E)),F("["+m+"] "+E+" d"),this};var Uf=p.__private__.getLineHeight=p.getLineHeight=function(){return we*Ha};p.__private__.getLineHeight=p.getLineHeight=function(){return we*Ha};var Bf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Ha=m),this},zf=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ha};Bf(e.lineHeight);var ms=p.__private__.getHorizontalCoordinate=function(m){return $(m)},gs=p.__private__.getVerticalCoordinate=function(m){return C===N?m:Ne[q].mediaBox.topRightY-Ne[q].mediaBox.bottomLeftY-$(m)},qf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(m){return I(ms(m))},$f=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(m){return I(gs(m))},zo=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Nr(zo)},p.__private__.setStrokeColor=p.setDrawColor=function(m,E,V,ee){return zo=He({ch1:m,ch2:E,ch3:V,ch4:ee,pdfColorType:"draw",precision:2}),F(zo),this};var tc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Nr(tc)},p.__private__.setFillColor=p.setFillColor=function(m,E,V,ee){return tc=He({ch1:m,ch2:E,ch3:V,ch4:ee,pdfColorType:"fill",precision:2}),F(tc),this};var Wa=e.textColor||"0 g",Hf=p.__private__.getTextColor=p.getTextColor=function(){return Nr(Wa)};p.__private__.setTextColor=p.setTextColor=function(m,E,V,ee){return Wa=He({ch1:m,ch2:E,ch3:V,ch4:ee,pdfColorType:"text",precision:3}),this};var vs=e.charSpace,Wf=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(vs||0)};p.__private__.setCharSpace=p.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vs=m,this};var nc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nc=E,F(E+" J"),this};var rc=0;p.__private__.setLineJoin=p.setLineJoin=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rc=E,F(E+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return F(I($(m))+" M"),this},p.GState=tf,p.setGState=function(m){(m=typeof m=="string"?ce[Le[m]]:td(null,m)).equals(De)||(F("/"+m.id+" gs"),De=m)};var td=function(m,E){if(!m||!Le[m]){var V=!1;for(var ee in ce)if(ce.hasOwnProperty(ee)&&ce[ee].equals(E)){V=!0;break}if(V)E=ce[ee];else{var oe="GS"+(Object.keys(ce).length+1).toString(10);ce[oe]=E,E.id=oe}return m&&(Le[m]=E.id),Oe.publish("addGState",E),E}};p.addGState=function(m,E){return td(m,E),this},p.saveGraphicsState=function(){return F("q"),sn.push({key:tt,size:we,color:Wa}),this},p.restoreGraphicsState=function(){F("Q");var m=sn.pop();return tt=m.key,we=m.size,Wa=m.color,De=null,this},p.setCurrentTransformationMatrix=function(m){return F(m.toString()+" cm"),this},p.comment=function(m){return F("#"+m),this};var ys=function(m,E){var V=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return V},set:function(Se){isNaN(Se)||(V=parseFloat(Se))}});var ee=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ee},set:function(Se){isNaN(Se)||(ee=parseFloat(Se))}});var oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return oe},set:function(Se){oe=Se.toString()}}),this},ic=function(m,E,V,ee){ys.call(this,m,E),this.type="rect";var oe=V||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return oe},set:function(Ce){isNaN(Ce)||(oe=parseFloat(Ce))}});var Se=ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Ce){isNaN(Ce)||(Se=parseFloat(Ce))}}),this},qo=function(){this.page=ye,this.currentPage=q,this.pages=je.slice(0),this.pagesContext=Ne.slice(0),this.x=it,this.y=xn,this.matrix=Rt,this.width=ac(q),this.height=rd(q),this.outputDestination=Te,this.id="",this.objectNumber=-1};qo.prototype.restore=function(){ye=this.page,q=this.currentPage,Ne=this.pagesContext,je=this.pages,it=this.x,xn=this.y,Rt=this.matrix,nd(q,this.width),xs(q,this.height),Te=this.outputDestination};var sc=function(m,E,V,ee,oe){Ve.push(new qo),ye=q=0,je=[],it=m,xn=E,Rt=oe,Zl([V,ee])};for(var Va in p.beginFormObject=function(m,E,V,ee,oe){return sc(m,E,V,ee,oe),this},p.endFormObject=function(m){return function(E){if(Bt[E])Ve.pop().restore();else{var V=new qo,ee="Xo"+(Object.keys(ut).length+1).toString(10);V.id=ee,Bt[E]=ee,ut[ee]=V,Oe.publish("addFormObject",V),Ve.pop().restore()}}(m),this},p.doFormObject=function(m,E){var V=ut[Bt[m]];return F("q"),F(E.toString()+" cm"),F("/"+V.id+" Do"),F("Q"),this},p.getFormObject=function(m){var E=ut[Bt[m]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},p.save=function(m,E){return m=m||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(lo(Uo(Ji()),m),typeof lo.unload=="function"&&dt.setTimeout&&setTimeout(lo.unload,911),this):new Promise(function(V,ee){try{var oe=lo(Uo(Ji()),m);typeof lo.unload=="function"&&dt.setTimeout&&setTimeout(lo.unload,911),V(oe)}catch(Se){ee(Se.message)}})},ot.API)ot.API.hasOwnProperty(Va)&&(Va==="events"&&ot.API.events.length?function(m,E){var V,ee,oe;for(oe=E.length-1;oe!==-1;oe--)V=E[oe][0],ee=E[oe][1],m.subscribe.apply(m,[V].concat(typeof ee=="function"?[ee]:ee))}(Oe,ot.API.events):p[Va]=ot.API[Va]);function ac(m){return Ne[m].mediaBox.topRightX-Ne[m].mediaBox.bottomLeftX}function nd(m,E){Ne[m].mediaBox.topRightX=E+Ne[m].mediaBox.bottomLeftX}function rd(m){return Ne[m].mediaBox.topRightY-Ne[m].mediaBox.bottomLeftY}function xs(m,E){Ne[m].mediaBox.topRightY=E+Ne[m].mediaBox.bottomLeftY}var ws=p.getPageWidth=function(m){return ac(m=m||q)/pt},id=p.setPageWidth=function(m,E){nd(m,E*pt)},Ga=p.getPageHeight=function(m){return rd(m=m||q)/pt},sd=p.setPageHeight=function(m,E){xs(m,E*pt)};return p.internal={pdfEscape:hi,getStyle:Qu,getFont:Df,getFontSize:$e,getCharSpace:Wf,getTextColor:Hf,getLineHeight:Uf,getLineHeightFactor:zf,getLineWidth:Mf,write:re,getHorizontalCoordinate:ms,getVerticalCoordinate:gs,getCoordinateString:qf,getVerticalCoordinateString:$f,collections:{},newObject:Ot,newAdditionalObject:Ei,newObjectDeferred:dn,newObjectDeferredBegin:Ln,getFilters:an,putStream:Wt,events:Oe,scaleFactor:pt,pageSize:{getWidth:function(){return ws(q)},setWidth:function(m){id(q,m)},getHeight:function(){return Ga(q)},setHeight:function(m){sd(q,m)}},encryptionOptions:f,encryption:$n,getEncryptor:function(m){return f!==null?$n.encryptor(m,0):function(E){return E}},output:Yu,getNumberOfPages:Gu,get pages(){return je},out:F,f2:j,f3:R,getPageInfo:ps,getPageInfoByObjId:Zu,getCurrentPageInfo:Tf,getPDFVersion:_,Point:ys,Rectangle:ic,Matrix:Me,hasHotfix:fi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ws(q)},set:function(m){id(q,m)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ga(q)},set:function(m){sd(q,m)},enumerable:!0,configurable:!0}),(function(m){for(var E=0,V=ze.length;E<V;E++){var ee=Hu.call(this,m[E][0],m[E][1],m[E][2],ze[E][3],!0);g===!1&&(y[ee]=!0);var oe=m[E][0].split("-");Do({id:ee,fontName:oe[0],fontStyle:oe[1]||""})}Oe.publish("addFonts",{fonts:_t,dictionary:Nt})}).call(p,ze),tt="F1",Wu(i,n),Oe.publish("initialized"),p}al.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},al.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},al.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},al.prototype.processOwnerPassword=function(e,t){return D1(F1(t).substr(0,5),e)},al.prototype.encryptor=function(e,t){var n=F1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return D1(n,r)}},tf.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Zt(e)!==Zt(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},ot.API={events:[]},ot.version="3.0.4";var An=ot.API,Qm=1,Oo=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nl=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(e){return e.toFixed(2)},da=function(e){return e.toFixed(5)};An.__acroform__={};var Hr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},gv=function(e){return e*Qm},ns=function(e){var t=new Sb,n=Je.internal.getHeight(e)||0,r=Je.internal.getWidth(e)||0;return t.BBox=[0,0,Number(vt(r)),Number(vt(n))],t},hA=An.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},fA=An.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},pA=An.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},On=An.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pA(e,t-1)},Fn=An.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hA(e,t-1)},Dn=An.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fA(e,t-1)},mA=An.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(vt(l.lowerLeft_X)),Number(vt(l.lowerLeft_Y)),Number(vt(l.upperRight_X)),Number(vt(l.upperRight_Y))]},gA=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=M1(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+vt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ns(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},M1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(j){return j.split(`
`)}):i.map(function(j){return[j]});var s=n,a=Je.internal.getHeight(e)||0;a=a<0?-a:a;var o=Je.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(j,R,$){if(j+1<i.length){var J=R+" "+i[j+1][0];return Xd(J,e,$).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,f,g=Xd("3",e,s).height,y=e.multiline?a-s:(a-g)/2,p=y+=2,k=0,_=0,A=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Xd(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var x="",b=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var C=!1;if(i[N].length!==1&&A!==i[N].length-1){if((g+2)*(b+2)+2>a)continue e;x+=i[N][A],C=!0,_=N,N--}else{x=(x+=i[N][A]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var K=parseInt(N),T=l(K,x,s),M=N>=i.length-1;if(T&&!M){x+=" ",A=0;continue}if(T||M){if(M)_=K;else if(e.multiline&&(g+2)*(b+2)+2>a)continue e}else{if(!e.multiline||(g+2)*(b+2)+2>a)continue e;_=K}}for(var I="",S=k;S<=_;S++){var z=i[S];if(e.multiline){if(S===_){I+=z[A]+" ",A=(A+1)%z.length;continue}if(S===k){I+=z[z.length-1]+" ";continue}}I+=z[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,f=Xd(I,e,s).width,e.textAlign){case"right":c=o-f-2;break;case"center":c=(o-f)/2;break;default:c=2}t+=vt(c)+" "+vt(p)+` Td
`,t+="("+Oo(I)+`) Tj
`,t+=-vt(c)+` 0 Td
`,p=-(s+2),f=0,k=C?_:_+1,b++,x=""}break}return r.text=t,r.fontSize=s,r},Xd=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},vA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yA=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},xA=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Vi.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(vA)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qm=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new jb,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&yA(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=mA(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Je.createDefaultAppearanceStream(o),Zt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=gA(o);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var g="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var p=o.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var k=p[a];typeof k=="function"&&(k=k.call(i,o)),g+="/"+a+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=p)=="function"&&(k=k.call(i,o)),g+="/"+a+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&function(_,A){for(var x in _)if(_.hasOwnProperty(x)){var b=x,N=_[x];A.internal.newObjectDeferredBegin(N.objId,!0),Zt(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete _[b]}}(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},kb=An.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Zt(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Oo(r(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d0=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Oo(r(e))+")"},os=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};os.prototype.toString=function(){return this.objId+" 0 R"},os.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},os.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:kb(i,this.objId,this.scope)}):i instanceof os?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Sb=function(){os.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Hr(Sb,os);var jb=function(){os.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Oo(n(e))+")"}},set:function(n){e=n}})};Hr(jb,os);var Vi=function e(){os.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!On(t,3)},set:function(x){x?this.F=Fn(t,3):this.F=Dn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof nf)return;s="FieldObject"+e.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Oo(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Qm:c},set:function(x){c=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof nf||this instanceof bo))return d0(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=x}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof tr==0?d0(y,this.objId,this.scope):y},set:function(x){x=x.toString(),y=this instanceof tr==0?x.substr(0,1)==="("?nl(x.substr(1,x.length-2)):nl(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr==1?nl(y.substr(1,y.length-1)):y},set:function(x){x=x.toString(),y=this instanceof tr==1?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof tr==0?d0(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof tr==0?x.substr(0,1)==="("?nl(x.substr(1,x.length-2)):nl(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr==1?nl(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof tr==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(x){x=!!x,_=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(x){k=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,1)},set:function(x){x?this.Ff=Fn(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,2)},set:function(x){x?this.Ff=Fn(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,3)},set:function(x){x?this.Ff=Fn(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');A=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(A){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};Hr(Vi,os);var El=function(){Vi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kb(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,18)},set:function(n){n?this.Ff=Fn(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Fn(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,20)},set:function(n){n?(this.Ff=Fn(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,22)},set:function(n){n?this.Ff=Fn(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,23)},set:function(n){n?this.Ff=Fn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,27)},set:function(n){n?this.Ff=Fn(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};Hr(El,Vi);var Ll=function(){El.call(this),this.fontName="helvetica",this.combo=!1};Hr(Ll,El);var Cl=function(){Ll.call(this),this.combo=!0};Hr(Cl,Ll);var yh=function(){Cl.call(this),this.edit=!0};Hr(yh,Cl);var tr=function(){Vi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,15)},set:function(n){n?this.Ff=Fn(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,16)},set:function(n){n?this.Ff=Fn(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,17)},set:function(n){n?this.Ff=Fn(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,26)},set:function(n){n?this.Ff=Fn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Oo(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Zt(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Hr(tr,Vi);var xh=function(){tr.call(this),this.pushButton=!0};Hr(xh,tr);var Pl=function(){tr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Hr(Pl,tr);var nf=function(){var e,t;Vi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Oo(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Zt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Je.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Hr(nf,Vi),Pl.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Pl.prototype.createOption=function(e){var t=new nf;return t.Parent=this,t.optionName=e,this.Kids.push(t),wA.call(this.scope,t),t};var wh=function(){tr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Je.CheckBox.createAppearanceStream()};Hr(wh,tr);var bo=function(){Vi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,13)},set:function(t){t?this.Ff=Fn(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,21)},set:function(t){t?this.Ff=Fn(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,23)},set:function(t){t?this.Ff=Fn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,24)},set:function(t){t?this.Ff=Fn(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,25)},set:function(t){t?this.Ff=Fn(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,26)},set:function(t){t?this.Ff=Fn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Hr(bo,Vi);var bh=function(){bo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!On(this.Ff,14)},set:function(e){e?this.Ff=Fn(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};Hr(bh,bo);var Je={CheckBox:{createAppearanceStream:function(){return{N:{On:Je.CheckBox.YesNormal},D:{On:Je.CheckBox.YesPushDown,Off:Je.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=M1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+vt(Je.internal.getWidth(e))+" "+vt(Je.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+vt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ns(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Je.internal.getHeight(e),a=Je.internal.getWidth(e),o=M1(e,e.caption);return i.push("1 g"),i.push("0 0 "+vt(a)+" "+vt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vt(a-1)+" "+vt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+vt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(Je.internal.getWidth(e))+" "+vt(Je.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Je.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Je.RadioButton.Circle.YesNormal,t.D[e]=Je.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ns(e);t.scope=e.scope;var n=[],r=Je.internal.getWidth(e)<=Je.internal.getHeight(e)?Je.internal.getWidth(e)/4:Je.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Je.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+da(Je.internal.getWidth(e)/2)+" "+da(Je.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=[],r=Je.internal.getWidth(e)<=Je.internal.getHeight(e)?Je.internal.getWidth(e)/4:Je.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Je.internal.Bezier_C).toFixed(5)),a=Number((r*Je.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+da(Je.internal.getWidth(e)/2)+" "+da(Je.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+da(Je.internal.getWidth(e)/2)+" "+da(Je.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=[],r=Je.internal.getWidth(e)<=Je.internal.getHeight(e)?Je.internal.getWidth(e)/4:Je.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Je.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+da(Je.internal.getWidth(e)/2)+" "+da(Je.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Je.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Je.RadioButton.Cross.YesNormal,t.D[e]=Je.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ns(e);t.scope=e.scope;var n=[],r=Je.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+vt(Je.internal.getWidth(e)-2)+" "+vt(Je.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),n.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),n.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),n.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=Je.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(Je.internal.getWidth(e))+" "+vt(Je.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+vt(Je.internal.getWidth(e)-2)+" "+vt(Je.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),r.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),r.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),r.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ns(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(Je.internal.getWidth(e))+" "+vt(Je.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Je.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Je.internal.getWidth(e),n=Je.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Je.internal.getWidth=function(e){var t=0;return Zt(e)==="object"&&(t=gv(e.Rect[2])),t},Je.internal.getHeight=function(e){var t=0;return Zt(e)==="object"&&(t=gv(e.Rect[3])),t};var wA=An.addField=function(e){if(xA(this,e),!(e instanceof Vi))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};An.AcroFormChoiceField=El,An.AcroFormListBox=Ll,An.AcroFormComboBox=Cl,An.AcroFormEditBox=yh,An.AcroFormButton=tr,An.AcroFormPushButton=xh,An.AcroFormRadioButton=Pl,An.AcroFormCheckBox=wh,An.AcroFormTextField=bo,An.AcroFormPasswordField=bh,An.AcroFormAppearance=Je,An.AcroForm={ChoiceField:El,ListBox:Ll,ComboBox:Cl,EditBox:yh,Button:tr,PushButton:xh,RadioButton:Pl,CheckBox:wh,TextField:bo,PasswordField:bh,Appearance:Je},ot.AcroForm={ChoiceField:El,ListBox:Ll,ComboBox:Cl,EditBox:yh,Button:tr,PushButton:xh,RadioButton:Pl,CheckBox:wh,TextField:bo,PasswordField:bh,Appearance:Je};function Ab(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(j,R){var $,J,X,le,de,Z=n;if((R=R||n)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(T(j))for(de in r)for(X=r[de],$=0;$<X.length;$+=1){for(le=!0,J=0;J<X[$].length;J+=1)if(X[$][J]!==void 0&&X[$][J]!==j[J]){le=!1;break}if(le===!0){Z=de;break}}else for(de in r)for(X=r[de],$=0;$<X.length;$+=1){for(le=!0,J=0;J<X[$].length;J+=1)if(X[$][J]!==void 0&&X[$][J]!==j.charCodeAt(J)){le=!1;break}if(le===!0){Z=de;break}}return Z===n&&R!==n&&(Z=R),Z},s=function j(R){for(var $=this.internal.write,J=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:R.width}),le.push({key:"Height",value:R.height}),R.colorSpace===x.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===x.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var de="",Z=0,se=R.transparency.length;Z<se;Z++)de+=R.transparency[Z]+" "+R.transparency[Z]+" ";le.push({key:"Mask",value:"["+de+"]"})}R.sMask!==void 0&&le.push({key:"SMask",value:R.objectId+1+" 0 R"});var ve=R.filter!==void 0?["/"+R.filter]:void 0;if(J({data:R.data,additionalKeyValues:le,alreadyAppliedFilters:ve,objectId:R.objectId}),$("endobj"),"sMask"in R&&R.sMask!==void 0){var fe,P=(fe=R.sMaskBitsPerComponent)!==null&&fe!==void 0?fe:R.bitsPerComponent,q={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:R.sMask};"filter"in R&&(q.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(R.width),q.filter=R.filter),j.call(this,q)}if(R.colorSpace===x.INDEXED){var G=this.internal.newObject();J({data:I(new Uint8Array(R.palette)),objectId:G}),$("endobj")}},a=function(){var j=this.internal.collections[t+"images"];for(var R in j)s.call(this,j[R])},o=function(){var j,R=this.internal.collections[t+"images"],$=this.internal.write;for(var J in R)$("/I"+(j=R[J]).index,j.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var j=this.internal.collections[t+"images"];return l.call(this),j},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(j){return typeof e["process"+j.toUpperCase()]=="function"},y=function(j){return Zt(j)==="object"&&j.nodeType===1},p=function(j,R){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var $=""+j.getAttribute("src");if($.indexOf("data:image/")===0)return vh(unescape($).split("base64,").pop());var J=e.loadFile($,!0);if(J!==void 0)return J}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var X;switch(R){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return vh(j.toDataURL(X,1).split("base64,").pop())}},k=function(j){var R=this.internal.collections[t+"images"];if(R){for(var $ in R)if(j===R[$].alias)return R[$]}},_=function(j,R,$){return j||R||(j=-96,R=-96),j<0&&(j=-1*$.width*72/j/this.internal.scaleFactor),R<0&&(R=-1*$.height*72/R/this.internal.scaleFactor),j===0&&(j=R*$.width/$.height),R===0&&(R=j*$.height/$.width),[j,R]},A=function(j,R,$,J,X,le){var de=_.call(this,$,J,X),Z=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ve=c.call(this);if($=de[0],J=de[1],ve[X.index]=X,le){le*=Math.PI/180;var fe=Math.cos(le),P=Math.sin(le),q=function(Y){return Y.toFixed(4)},G=[q(fe),q(P),q(-1*P),q(fe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,Z(j),se(R+J),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([Z($),"0","0",Z(J),"0","0","cm"].join(" "))):this.internal.write([Z($),"0","0",Z(J),Z(j),se(R+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(j){var R,$,J=0;if(typeof j=="string")for($=j.length,R=0;R<$;R++)J=(J<<5)-J+j.charCodeAt(R),J|=0;else if(T(j))for($=j.byteLength/2,R=0;R<$;R++)J=(J<<5)-J+j[R],J|=0;return J},C=e.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var R=!0;return j.length===0&&(R=!1),j.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(R=!1),R},K=e.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var R=j.indexOf(",");return R<0?null:j.substring(0,R).trim().endsWith("base64")?j.substring(R+1):null};e.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},M=e.__addimage__.binaryStringToUint8Array=function(j){for(var R=j.length,$=new Uint8Array(R),J=0;J<R;J++)$[J]=j.charCodeAt(J);return $},I=e.__addimage__.arrayBufferToBinaryString=function(j){for(var R="",$=T(j)?j:new Uint8Array(j),J=0;J<$.length;J+=8192)R+=String.fromCharCode.apply(null,$.subarray(J,J+8192));return R};e.addImage=function(){var j,R,$,J,X,le,de,Z,se;if(typeof arguments[1]=="number"?(R=n,$=arguments[1],J=arguments[2],X=arguments[3],le=arguments[4],de=arguments[5],Z=arguments[6],se=arguments[7]):(R=arguments[1],$=arguments[2],J=arguments[3],X=arguments[4],le=arguments[5],de=arguments[6],Z=arguments[7],se=arguments[8]),Zt(j=arguments[0])==="object"&&!y(j)&&"imageData"in j){var ve=j;j=ve.imageData,R=ve.format||R||n,$=ve.x||$||0,J=ve.y||J||0,X=ve.w||ve.width||X,le=ve.h||ve.height||le,de=ve.alias||de,Z=ve.compression||Z,se=ve.rotation||ve.angle||se}var fe=this.internal.getFilters();if(Z===void 0&&fe.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN($)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=S.call(this,j,R,de,Z);return A.call(this,$,J,X,le,P,se),this};var S=function(j,R,$,J){var X,le,de;if(typeof j=="string"&&i(j)===n){j=unescape(j);var Z=z(j,!1);(Z!==""||(Z=e.loadFile(j,!0))!==void 0)&&(j=Z)}if(y(j)&&(j=p(j,R)),R=i(j,R),!g(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((de=$)==null||de.length===0)&&($=function(se){return typeof se=="string"||T(se)?N(se):T(se.data)?N(se.data):null}(j)),(X=k.call(this,$))||(j instanceof Uint8Array||R==="RGBA"||(le=j,j=M(j)),X=this["process"+R.toUpperCase()](j,f.call(this),$,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:b.NONE}(J),le)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},z=e.__addimage__.convertBase64ToBinaryString=function(j,R){R=typeof R!="boolean"||R;var $,J="";if(typeof j=="string"){var X;$=(X=K(j))!==null&&X!==void 0?X:j;try{J=vh($)}catch(le){if(R)throw C($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(j){var R,$,J="";if(y(j)&&(j=p(j)),typeof j=="string"&&i(j)===n&&((J=z(j,!1))===""&&(J=e.loadFile(j)||""),j=J),$=i(j),!g($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(j instanceof Uint8Array||(j=M(j)),!(R=this["process"+$.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=$,R}})(ot.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};ot.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,g=0;g<c.length&&!f;g++)switch((r=c[g]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,k=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(_.objId),b=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(x(r.contents))+")",s+=" /Popup "+A.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(x(b))+") >>",_.content=s;var N=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",A.content=s,this.internal.write(_.objId,"0 R",A.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(k(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(k(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var T=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(n,o).length;a=Math.ceil(c*f)}else o=l,a=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,o,a,s),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ot.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=e.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&t[_.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&t[_.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&t[_.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&t[_.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&t[_.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(_){var A=0,x=n,b="",N=0;for(A=0;A<_.length;A+=1)x[_.charCodeAt(A)]!==void 0?(N++,typeof(x=x[_.charCodeAt(A)])=="number"&&(b+=String.fromCharCode(x),x=n,N=0),A===_.length-1&&(x=n,b+=_.charAt(A-(N-1)),A-=N-1,N=0)):(x=n,b+=_.charAt(A-N),A-=N,N=0);return b};e.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var y=e.__arabicParser__.getCorrectForm=function(_,A,x){return a(_)?s(_)===!1?-1:!c(_)||!a(A)&&!a(x)||!a(x)&&o(A)||o(_)&&!a(A)||o(_)&&l(A)||o(_)&&o(A)?0:f(_)&&a(A)&&!o(A)&&a(x)&&c(x)?3:o(_)||!a(x)?1:2:-1},p=function(_){var A=0,x=0,b=0,N="",C="",K="",T=(_=_||"").split("\\s+"),M=[];for(A=0;A<T.length;A+=1){for(M.push(""),x=0;x<T[A].length;x+=1)N=T[A][x],C=T[A][x-1],K=T[A][x+1],a(N)?(b=y(N,C,K),M[A]+=b!==-1?String.fromCharCode(t[N.charCodeAt(0)][b]):N):M[A]+=N;M[A]=g(M[A])}return M.join(" ")},k=e.__arabicParser__.processArabic=e.processArabic=function(){var _,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(A)){var b=0;for(x=[],b=0;b<A.length;b+=1)Array.isArray(A[b])?x.push([p(A[b][0]),A[b][1],A[b][2]]):x.push([p(A[b])]);_=x}else _=p(A);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};e.events.push(["preProcessText",k])}(ot.API),ot.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ot.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(_){k=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,k=0,_=0,A=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,C){return N.concat(A.splitTextToSize(C,x))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)p<(_=this.getStringUnitWidth(l[b],{font:g})*f)&&(p=_);return p!==0&&(k=l.length),{w:p/=y,h:Math.max((k*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,f,g,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var p,k,_,A,x=[],b=[],N=[],C={},K={},T=[],M=[],I=(y=y||{}).autoSize||!1,S=y.printHeaders!==!1,z=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,j=y.margins||Object.assign({width:this.getPageWidth()},t),R=typeof y.padding=="number"?y.padding:3,$=y.headerBackgroundColor||"#c8c8c8",J=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=J,this.setFontSize(z),g==null)b=x=Object.keys(f[0]),N=x.map(function(){return"left"});else if(Array.isArray(g)&&Zt(g[0])==="object")for(x=g.map(function(ve){return ve.name}),b=g.map(function(ve){return ve.prompt||ve.name||""}),N=g.map(function(ve){return ve.align||"left"}),p=0;p<g.length;p+=1)K[g[p].name]=.7499990551181103*g[p].width;else Array.isArray(g)&&typeof g[0]=="string"&&(b=x=g,N=x.map(function(){return"left"}));if(I||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<x.length;p+=1){for(C[A=x[p]]=f.map(function(ve){return ve[A]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=C[A],this.setFont(void 0,"normal"),_=0;_<k.length;_+=1)T.push(this.getTextDimensions(k[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[A]=Math.max.apply(null,T)+R+R,T=[]}if(S){var X={};for(p=0;p<x.length;p+=1)X[x[p]]={},X[x[p]].text=b[p],X[x[p]].align=N[p];var le=o.call(this,X,K);M=x.map(function(ve){return new s(l,c,K[ve],le,X[ve].text,void 0,X[ve].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var de=g.reduce(function(ve,fe){return ve[fe.name]=fe.align,ve},{});for(p=0;p<f.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:f[p]},this);var Z=o.call(this,f[p],K);for(_=0;_<x.length;_+=1){var se=f[p][x[_]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:_,data:se},this),a.call(this,new s(l,c,K[x[_]],Z,se,p+2,de[x[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var k=l[p];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,c[p]-f-f)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/y+f+f},this).reduce(function(p,k){return Math.max(p,k)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(k)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(ot.API);var Eb={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Lb=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],U1=Ab(Lb),Cb=[100,200,300,400,500,600,700,800,900],bA=Ab(Cb);function h0(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Eb[s=s||"normal"]?s:"normal"}(e.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(e.weight),i=function(s){return typeof U1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function vv(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var _A={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function xv(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function wv(e){return e.trimLeft()}function NA(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function kA(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var eh,bv,_v,rl,th,Nv,kv,Sv,f0=["times"];function jv(e,t,n,r,i){var s=4,a=Ev;switch(i){case ot.API.image_compression.FAST:s=1,a=Av;break;case ot.API.image_compression.MEDIUM:s=6,a=Lv;break;case ot.API.image_compression.SLOW:s=9,a=Cv}e=function(l,c,f,g){for(var y,p=l.length/c,k=new Uint8Array(l.length+p),_=[SA,Av,Ev,Lv,Cv],A=0;A<p;A+=1){var x=A*c,b=l.subarray(x,x+c);if(g)k.set(g(b,f,y),x+A);else{for(var N=_.length,C=[],K=0;K<N;K+=1)C[K]=_[K](b,f,y);var T=AA(C.concat());k.set(C[T],x+A)}y=b}return k}(e,t,Math.ceil(n*r/8),a);var o=j1(e,{level:s});return ot.API.__addimage__.arrayBufferToBinaryString(o)}function SA(e){var t=Array.apply([],e);return t.unshift(0),t}function Av(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=e[i-t]||0;r[i+1]=e[i]-s+256&255}return r}function Ev(e,t,n){var r=e.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var a=n&&n[s]||0;i[s+1]=e[s]-a+256&255}return i}function Lv(e,t,n){var r=e.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var a=e[s-t]||0,o=n&&n[s]||0;i[s+1]=e[s]+256-(a+o>>>1)&255}return i}function Cv(e,t,n){var r=e.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var a=jA(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);i[s+1]=e[s]-a+256&255}return i}function jA(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=i&&r<=s?e:i<=s?t:n}function AA(e){var t=e.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function p0(e,t,n){var r=t*n,i=Math.floor(r/8),s=16-(r-8*i+n),a=(1<<n)-1;return Pb(e,i)>>s&a}function Pv(e,t,n,r){var i=n*r,s=Math.floor(i/8),a=16-(i-8*s+r),o=(1<<r)-1,l=(t&o)<<a;(function(c,f,g){if(f+1<c.byteLength)c.setUint16(f,g,!1);else{var y=g>>8&255;c.setUint8(f,y)}})(e,s,Pb(e,s)&~(o<<a)&65535|l)}function Pb(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function EA(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,f=[],g=0,y=null,p=0,k=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,k=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=e[t++];g=e[t++]|e[t++]<<8,y=e[t++],1&_||(y=null),p=_>>2&7,t++;break;case 254:for(;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var A=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++],K=C>>6&1,T=1<<1+(7&C),M=o,I=l,S=!1;C>>7&&(S=!0,M=t,I=T,t+=3*T);var z=t;for(t++;;){var j;if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}f.push({x:A,y:x,width:b,height:N,has_local_palette:S,palette_offset:M,palette_size:I,data_offset:z,data_length:t-z,transparent_index:y,interlaced:!!K,delay:g,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return k},this.frameInfo=function(R){if(R<0||R>=f.length)throw new Error("Frame index out of range.");return f[R]},this.decodeAndBlitFrameBGRA=function(R,$){var J=this.frameInfo(R),X=J.width*J.height,le=new Uint8Array(X);Tv(e,J.data_offset,le,X);var de=J.palette_offset,Z=J.transparent_index;Z===null&&(Z=256);var se=J.width,ve=n-se,fe=se,P=4*(J.y*n+J.x),q=4*((J.y+J.height)*n+J.x),G=P,Y=4*ve;J.interlaced===!0&&(Y+=4*n*7);for(var Q=8,ae=0,te=le.length;ae<te;++ae){var ge=le[ae];if(fe===0&&(fe=se,(G+=Y)>=q&&(Y=4*ve+4*n*(Q-1),G=P+(se+ve)*(Q<<1),Q>>=1)),ge===Z)G+=4;else{var xe=e[de+3*ge],je=e[de+3*ge+1],Ue=e[de+3*ge+2];$[G++]=Ue,$[G++]=je,$[G++]=xe,$[G++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(R,$){var J=this.frameInfo(R),X=J.width*J.height,le=new Uint8Array(X);Tv(e,J.data_offset,le,X);var de=J.palette_offset,Z=J.transparent_index;Z===null&&(Z=256);var se=J.width,ve=n-se,fe=se,P=4*(J.y*n+J.x),q=4*((J.y+J.height)*n+J.x),G=P,Y=4*ve;J.interlaced===!0&&(Y+=4*n*7);for(var Q=8,ae=0,te=le.length;ae<te;++ae){var ge=le[ae];if(fe===0&&(fe=se,(G+=Y)>=q&&(Y=4*ve+4*n*(Q-1),G=P+(se+ve)*(Q<<1),Q>>=1)),ge===Z)G+=4;else{var xe=e[de+3*ge],je=e[de+3*ge+1],Ue=e[de+3*ge+2];$[G++]=xe,$[G++]=je,$[G++]=Ue,$[G++]=255}--fe}}}function Tv(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,f=0,g=0,y=0,p=e[t++],k=new Int32Array(4096),_=null;;){for(;f<16&&p!==0;)g|=e[t++]<<f,f+=8,p===1?p=e[t++]:--p;if(f<l)break;var A=g&c;if(g>>=l,f-=l,A!==s){if(A===a)break;for(var x=A<o?A:_,b=0,N=x;N>s;)N=k[N]>>8,++b;var C=N;if(y+b+(x!==A?1:0)>r)return void rn.log("Warning, gif stream longer than expected.");n[y++]=C;var K=y+=b;for(x!==A&&(n[y++]=C),N=x;b--;)N=k[N],n[--K]=255&N,N>>=8;_!==null&&o<4096&&(k[o++]=_<<8|C,o>=c+1&&l<12&&(++l,c=c<<1|1)),_=A}else o=a+1,c=(1<<(l=i+1))-1,_=null}return y!==r&&rn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function m0(e){var t,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),g=new Array(65535),y=new Array(65535),p=new Array(64),k=new Array(64),_=[],A=0,x=7,b=new Array(64),N=new Array(64),C=new Array(64),K=new Array(256),T=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(P,q){for(var G=0,Y=0,Q=new Array,ae=1;ae<=16;ae++){for(var te=1;te<=P[ae];te++)Q[q[Y]]=[],Q[q[Y]][0]=G,Q[q[Y]][1]=ae,Y++,G++;G*=2}return Q}function de(P){for(var q=P[0],G=P[1]-1;G>=0;)q&1<<G&&(A|=1<<x),G--,--x<0&&(A==255?(Z(255),Z(0)):Z(A),x=7,A=0)}function Z(P){_.push(P)}function se(P){Z(P>>8&255),Z(255&P)}function ve(P,q,G,Y,Q){for(var ae,te=Q[0],ge=Q[240],xe=function(we,Xe){var $e,Ye,et,Ut,Lt,ft,Ct,At,tt,pt,it=0;for(tt=0;tt<8;++tt){$e=we[it],Ye=we[it+1],et=we[it+2],Ut=we[it+3],Lt=we[it+4],ft=we[it+5],Ct=we[it+6];var xn=$e+(At=we[it+7]),Rt=$e-At,_t=Ye+Ct,Nt=Ye-Ct,sn=et+ft,lt=et-ft,_e=Ut+Lt,ce=Ut-Lt,Le=xn+_e,De=xn-_e,ye=_t+sn,Ne=_t-sn;we[it]=Le+ye,we[it+4]=Le-ye;var Oe=.707106781*(Ne+De);we[it+2]=De+Oe,we[it+6]=De-Oe;var qe=.382683433*((Le=ce+lt)-(Ne=Nt+Rt)),ut=.5411961*Le+qe,Bt=1.306562965*Ne+qe,Ve=.707106781*(ye=lt+Nt),Me=Rt+Ve,Ze=Rt-Ve;we[it+5]=Ze+ut,we[it+3]=Ze-ut,we[it+1]=Me+Bt,we[it+7]=Me-Bt,it+=8}for(it=0,tt=0;tt<8;++tt){$e=we[it],Ye=we[it+8],et=we[it+16],Ut=we[it+24],Lt=we[it+32],ft=we[it+40],Ct=we[it+48];var Xt=$e+(At=we[it+56]),ct=$e-At,It=Ye+Ct,Ot=Ye-Ct,dn=et+ft,Ln=et-ft,Ei=Ut+Lt,Mn=Ut-Lt,fr=Xt+Ei,Nr=Xt-Ei,He=It+dn,an=It-dn;we[it]=fr+He,we[it+32]=fr-He;var Wt=.707106781*(an+Nr);we[it+16]=Nr+Wt,we[it+48]=Nr-Wt;var wn=.382683433*((fr=Mn+Ln)-(an=Ot+ct)),en=.5411961*fr+wn,di=1.306562965*an+wn,Li=.707106781*(He=Ln+Ot),Wr=ct+Li,Ws=ct-Li;we[it+40]=Ws+en,we[it+24]=Ws-en,we[it+8]=Wr+di,we[it+56]=Wr-di,it++}for(tt=0;tt<64;++tt)pt=we[tt]*Xe[tt],p[tt]=pt>0?pt+.5|0:pt-.5|0;return p}(P,q),je=0;je<64;++je)k[M[je]]=xe[je];var Ue=k[0]-G;G=k[0],Ue==0?de(Y[0]):(de(Y[y[ae=32767+Ue]]),de(g[ae]));for(var Te=63;Te>0&&k[Te]==0;)Te--;if(Te==0)return de(te),G;for(var We,F=1;F<=Te;){for(var re=F;k[F]==0&&F<=Te;)++F;var Ie=F-re;if(Ie>=16){We=Ie>>4;for(var ze=1;ze<=We;++ze)de(ge);Ie&=15}ae=32767+k[F],de(Q[(Ie<<4)+y[ae]]),de(g[ae]),F++}return Te!=63&&de(te),G}function fe(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(q){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var Q=a((G[Y]*q+50)/100);Q=Math.min(Math.max(Q,1),255),o[M[Y]]=Q}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],te=0;te<64;te++){var ge=a((ae[te]*q+50)/100);ge=Math.min(Math.max(ge,1),255),l[M[te]]=ge}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,Ue=0;Ue<8;Ue++)for(var Te=0;Te<8;Te++)c[je]=1/(o[M[je]]*xe[Ue]*xe[Te]*8),f[je]=1/(l[M[je]]*xe[Ue]*xe[Te]*8),je++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,q){q&&fe(q),_=new Array,A=0,x=7,se(65496),se(65504),se(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),se(1),se(1),Z(0),Z(0),function(){se(65499),se(132),Z(0);for(var Ye=0;Ye<64;Ye++)Z(o[Ye]);Z(1);for(var et=0;et<64;et++)Z(l[et])}(),function(Ye,et){se(65472),se(17),Z(8),se(et),se(Ye),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(P.width,P.height),function(){se(65476),se(418),Z(0);for(var Ye=0;Ye<16;Ye++)Z(I[Ye+1]);for(var et=0;et<=11;et++)Z(S[et]);Z(16);for(var Ut=0;Ut<16;Ut++)Z(z[Ut+1]);for(var Lt=0;Lt<=161;Lt++)Z(j[Lt]);Z(1);for(var ft=0;ft<16;ft++)Z(R[ft+1]);for(var Ct=0;Ct<=11;Ct++)Z($[Ct]);Z(17);for(var At=0;At<16;At++)Z(J[At+1]);for(var tt=0;tt<=161;tt++)Z(X[tt])}(),se(65498),se(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var G=0,Y=0,Q=0;A=0,x=7,this.encode.displayName="_encode_";for(var ae,te,ge,xe,je,Ue,Te,We,F,re=P.data,Ie=P.width,ze=P.height,we=4*Ie,Xe=0;Xe<ze;){for(ae=0;ae<we;){for(je=we*Xe+ae,Te=-1,We=0,F=0;F<64;F++)Ue=je+(We=F>>3)*we+(Te=4*(7&F)),Xe+We>=ze&&(Ue-=we*(Xe+1+We-ze)),ae+Te>=we&&(Ue-=ae+Te-we+4),te=re[Ue++],ge=re[Ue++],xe=re[Ue++],b[F]=(T[te]+T[ge+256|0]+T[xe+512|0]>>16)-128,N[F]=(T[te+768|0]+T[ge+1024|0]+T[xe+1280|0]>>16)-128,C[F]=(T[te+1280|0]+T[ge+1536|0]+T[xe+1792|0]>>16)-128;G=ve(b,c,G,t,r),Y=ve(N,f,Y,n,i),Q=ve(C,f,Q,n,i),ae+=32}Xe+=8}if(x>=0){var $e=[];$e[1]=x+1,$e[0]=(1<<x+1)-1,de($e)}return se(65497),new Uint8Array(_)},e=e||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)K[q]=P(q)}(),t=le(I,S),n=le(R,$),r=le(z,j),i=le(J,X),function(){for(var P=1,q=2,G=1;G<=15;G++){for(var Y=P;Y<q;Y++)y[32767+Y]=G,g[32767+Y]=[],g[32767+Y][1]=G,g[32767+Y][0]=Y;for(var Q=-(q-1);Q<=-P;Q++)y[32767+Q]=G,g[32767+Q]=[],g[32767+Q][1]=G,g[32767+Q][0]=q-1+Q;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)T[P]=19595*P,T[P+256|0]=38470*P,T[P+512|0]=7471*P+32768,T[P+768|0]=-11059*P,T[P+1024|0]=-21709*P,T[P+1280|0]=32768*P+8421375,T[P+1536|0]=-27439*P,T[P+1792|0]=-5329*P}(),fe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Iv(e){function t(S){if(!S)throw Error("assert :P")}function n(S,z,j){for(var R=0;4>R;R++)if(S[z+R]!=j.charCodeAt(R))return!0;return!1}function r(S,z,j,R,$){for(var J=0;J<$;J++)S[z+J]=j[R+J]}function i(S,z,j,R){for(var $=0;$<R;$++)S[z+$]=j}function s(S){return new Int32Array(S)}function a(S,z){for(var j=[],R=0;R<S;R++)j.push(new z);return j}function o(S,z){var j=[];return function R($,J,X){for(var le=X[J],de=0;de<le&&($.push(X.length>J+1?[]:new z),!(X.length<J+1));de++)R($[de],J+1,X)}(j,0,S),j}var l=function(){var S=this;function z(u,h){for(var v=1<<h-1>>>0;u&v;)v>>>=1;return v?(u&v-1)+v:u}function j(u,h,v,w,L){t(!(w%v));do u[h+(w-=v)]=L;while(0<w)}function R(u,h,v,w,L){if(t(2328>=L),512>=L)var O=s(512);else if((O=s(L))==null)return 0;return function(D,U,B,H,ne,pe){var W,ie,ue=U,be=1<<B,he=s(16),ke=s(16);for(t(ne!=0),t(H!=null),t(D!=null),t(0<B),ie=0;ie<ne;++ie){if(15<H[ie])return 0;++he[H[ie]]}if(he[0]==ne)return 0;for(ke[1]=0,W=1;15>W;++W){if(he[W]>1<<W)return 0;ke[W+1]=ke[W]+he[W]}for(ie=0;ie<ne;++ie)W=H[ie],0<H[ie]&&(pe[ke[W]++]=ie);if(ke[15]==1)return(H=new $).g=0,H.value=pe[0],j(D,ue,1,be,H),be;var Ae,Re=-1,Pe=be-1,at=0,Ke=1,kt=1,nt=1<<B;for(ie=0,W=1,ne=2;W<=B;++W,ne<<=1){if(Ke+=kt<<=1,0>(kt-=he[W]))return 0;for(;0<he[W];--he[W])(H=new $).g=W,H.value=pe[ie++],j(D,ue+at,ne,nt,H),at=z(at,W)}for(W=B+1,ne=2;15>=W;++W,ne<<=1){if(Ke+=kt<<=1,0>(kt-=he[W]))return 0;for(;0<he[W];--he[W]){if(H=new $,(at&Pe)!=Re){for(ue+=nt,Ae=1<<(Re=W)-B;15>Re&&!(0>=(Ae-=he[Re]));)++Re,Ae<<=1;be+=nt=1<<(Ae=Re-B),D[U+(Re=at&Pe)].g=Ae+B,D[U+Re].value=ue-U-Re}H.g=W-B,H.value=pe[ie++],j(D,ue+(at>>B),ne,nt,H),at=z(at,W)}}return Ke!=2*ke[15]-1?0:be}(u,h,v,w,L,O)}function $(){this.value=this.g=0}function J(){this.value=this.g=0}function X(){this.G=a(5,$),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Xa,J)}function le(u,h,v,w){t(u!=null),t(h!=null),t(2147483648>w),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=v,u.Jd=h,u.Yc=v+w,u.Zc=4<=w?v+w-4+1:v,te(u)}function de(u,h){for(var v=0;0<h--;)v|=xe(u,128)<<h;return v}function Z(u,h){var v=de(u,h);return ge(u)?-v:v}function se(u,h,v,w){var L,O=0;for(t(u!=null),t(h!=null),t(4294967288>w),u.Sb=w,u.Ra=0,u.u=0,u.h=0,4<w&&(w=4),L=0;L<w;++L)O+=h[v+L]<<8*L;u.Ra=O,u.bb=w,u.oa=h,u.pa=v}function ve(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ys-8>>>0,++u.bb,u.u-=8;Y(u)&&(u.h=1,u.u=0)}function fe(u,h){if(t(0<=h),!u.h&&h<=Gr){var v=G(u)&Vr[h];return u.u+=h,ve(u),v}return u.h=1,u.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(u){return u.Ra>>>(u.u&Ys-1)>>>0}function Y(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ys}function Q(u,h){u.u=h,u.h=Y(u)}function ae(u){u.u>=ks&&(t(u.u>=ks),ve(u))}function te(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ge(u){return de(u,1)}function xe(u,h){var v=u.Ca;0>u.b&&te(u);var w=u.b,L=v*h>>>8,O=(u.I>>>w>L)+0;for(O?(v-=L,u.I-=L+1<<w>>>0):v=L+1,w=v,L=0;256<=w;)L+=8,w>>=8;return w=7^L+Zs[w],u.b-=w,u.Ca=(v<<w)-1,O}function je(u,h,v){u[h+0]=v>>24&255,u[h+1]=v>>16&255,u[h+2]=v>>8&255,u[h+3]=255&v}function Ue(u,h){return u[h+0]|u[h+1]<<8}function Te(u,h){return Ue(u,h)|u[h+2]<<16}function We(u,h){return Ue(u,h)|Ue(u,h+2)<<16}function F(u,h){var v=1<<h;return t(u!=null),t(0<h),u.X=s(v),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function re(u,h){t(u!=null),t(h!=null),t(u.Xa==h.Xa),r(h.X,0,u.X,0,1<<h.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function ze(u,h,v,w){t(v!=null),t(w!=null);var L=v[0],O=w[0];return L==0&&(L=(u*O+h/2)/h),O==0&&(O=(h*L+u/2)/u),0>=L||0>=O?0:(v[0]=L,w[0]=O,1)}function we(u,h){return u+(1<<h)-1>>>h}function Xe(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function $e(u,h){S[h]=function(v,w,L,O,D,U,B){var H;for(H=0;H<D;++H){var ne=S[u](U[B+H-1],L,O+H);U[B+H]=Xe(v[w+H],ne)}}}function Ye(){this.ud=this.hd=this.jd=0}function et(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function Ut(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Lt(u,h){return Ut(u+(u-h+.5>>1))}function ft(u,h,v){return Math.abs(h-v)-Math.abs(u-v)}function Ct(u,h,v,w,L,O,D){for(w=O[D-1],v=0;v<L;++v)O[D+v]=w=Xe(u[h+v],w)}function At(u,h,v,w,L){var O;for(O=0;O<v;++O){var D=u[h+O],U=D>>8&255,B=16711935&(B=(B=16711935&D)+((U<<16)+U));w[L+O]=(4278255360&D)+B>>>0}}function tt(u,h){h.jd=255&u,h.hd=u>>8&255,h.ud=u>>16&255}function pt(u,h,v,w,L,O){var D;for(D=0;D<w;++D){var U=h[v+D],B=U>>>8,H=U,ne=255&(ne=(ne=U>>>16)+((u.jd<<24>>24)*(B<<24>>24)>>>5));H=255&(H=(H+=(u.hd<<24>>24)*(B<<24>>24)>>>5)+((u.ud<<24>>24)*(ne<<24>>24)>>>5)),L[O+D]=(4278255360&U)+(ne<<16)+H}}function it(u,h,v,w,L){S[h]=function(O,D,U,B,H,ne,pe,W,ie){for(B=pe;B<W;++B)for(pe=0;pe<ie;++pe)H[ne++]=L(U[w(O[D++])])},S[u]=function(O,D,U,B,H,ne,pe){var W=8>>O.b,ie=O.Ea,ue=O.K[0],be=O.w;if(8>W)for(O=(1<<O.b)-1,be=(1<<W)-1;D<U;++D){var he,ke=0;for(he=0;he<ie;++he)he&O||(ke=w(B[H++])),ne[pe++]=L(ue[ke&be]),ke>>=W}else S["VP8LMapColor"+v](B,H,ue,be,ne,pe,D,U,ie)}}function xn(u,h,v,w,L){for(v=h+v;h<v;){var O=u[h++];w[L++]=O>>16&255,w[L++]=O>>8&255,w[L++]=255&O}}function Rt(u,h,v,w,L){for(v=h+v;h<v;){var O=u[h++];w[L++]=O>>16&255,w[L++]=O>>8&255,w[L++]=255&O,w[L++]=O>>24&255}}function _t(u,h,v,w,L){for(v=h+v;h<v;){var O=(D=u[h++])>>16&240|D>>12&15,D=240&D|D>>28&15;w[L++]=O,w[L++]=D}}function Nt(u,h,v,w,L){for(v=h+v;h<v;){var O=(D=u[h++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;w[L++]=O,w[L++]=D}}function sn(u,h,v,w,L){for(v=h+v;h<v;){var O=u[h++];w[L++]=255&O,w[L++]=O>>8&255,w[L++]=O>>16&255}}function lt(u,h,v,w,L,O){if(O==0)for(v=h+v;h<v;)je(w,((O=u[h++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),L+=32;else r(w,L,u,h,v)}function _e(u,h){S[h][0]=S[u+"0"],S[h][1]=S[u+"1"],S[h][2]=S[u+"2"],S[h][3]=S[u+"3"],S[h][4]=S[u+"4"],S[h][5]=S[u+"5"],S[h][6]=S[u+"6"],S[h][7]=S[u+"7"],S[h][8]=S[u+"8"],S[h][9]=S[u+"9"],S[h][10]=S[u+"10"],S[h][11]=S[u+"11"],S[h][12]=S[u+"12"],S[h][13]=S[u+"13"],S[h][14]=S[u+"0"],S[h][15]=S[u+"0"]}function ce(u){return u==Kf||u==Jf||u==pd||u==Yf}function Le(){this.eb=[],this.size=this.A=this.fb=0}function De(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ye(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Le,this.f.kb=new De,this.sd=null}function Ne(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Oe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qe(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function ut(u,h){var v=u.T,w=h.ba.f.RGBA,L=w.eb,O=w.fb+u.ka*w.A,D=vi[h.ba.S],U=u.y,B=u.O,H=u.f,ne=u.N,pe=u.ea,W=u.W,ie=h.cc,ue=h.dc,be=h.Mc,he=h.Nc,ke=u.ka,Ae=u.ka+u.T,Re=u.U,Pe=Re+1>>1;for(ke==0?D(U,B,null,null,H,ne,pe,W,H,ne,pe,W,L,O,null,null,Re):(D(h.ec,h.fc,U,B,ie,ue,be,he,H,ne,pe,W,L,O-w.A,L,O,Re),++v);ke+2<Ae;ke+=2)ie=H,ue=ne,be=pe,he=W,ne+=u.Rc,W+=u.Rc,O+=2*w.A,D(U,(B+=2*u.fa)-u.fa,U,B,ie,ue,be,he,H,ne,pe,W,L,O-w.A,L,O,Re);return B+=u.fa,u.j+Ae<u.o?(r(h.ec,h.fc,U,B,Re),r(h.cc,h.dc,H,ne,Pe),r(h.Mc,h.Nc,pe,W,Pe),v--):1&Ae||D(U,B,null,null,H,ne,pe,W,H,ne,pe,W,L,O+w.A,null,null,Re),v}function Bt(u,h,v){var w=u.F,L=[u.J];if(w!=null){var O=u.U,D=h.ba.S,U=D==fd||D==pd;h=h.ba.f.RGBA;var B=[0],H=u.ka;B[0]=u.T,u.Kb&&(H==0?--B[0]:(--H,L[0]-=u.width),u.j+u.ka+u.T==u.o&&(B[0]=u.o-u.j-H));var ne=h.eb;H=h.fb+H*h.A,u=og(w,L[0],u.width,O,B,ne,H+(U?0:3),h.A),t(v==B),u&&ce(D)&&yc(ne,H,U,O,B,h.A)}return 0}function Ve(u){var h=u.ma,v=h.ba.S,w=11>v,L=v==dd||v==hd||v==fd||v==Gf||v==12||ce(v);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!uc(h.Oa,u,L?11:12))return 0;if(L&&ce(v)&&oc(),u.da)alert("todo:use_scaling");else{if(w){if(h.Ib=qe,u.Kb){if(v=u.U+1>>1,h.memory=s(u.U+2*v),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+v,h.Ib=ut,oc()}}else alert("todo:EmitYUV");L&&(h.Jb=Bt,w&&Pi())}if(w&&!kg){for(u=0;256>u;++u)n_[u]=89858*(u-128)+gd>>md,s_[u]=-22014*(u-128)+gd,i_[u]=-45773*(u-128),r_[u]=113618*(u-128)+gd>>md;for(u=wc;u<Xf;++u)h=76283*(u-16)+gd>>md,a_[u-wc]=Ki(h,255),o_[u-wc]=Ki(h+8>>4,15);kg=1}return 1}function Me(u){var h=u.ma,v=u.U,w=u.T;return t(!(1&u.ka)),0>=v||0>=w?0:(v=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,v),h.Dc+=v,1)}function Ze(u){u.ma.memory=null}function Xt(u,h,v,w){return fe(u,8)!=47?0:(h[0]=fe(u,14)+1,v[0]=fe(u,14)+1,w[0]=fe(u,1),fe(u,3)!=0?0:!u.h)}function ct(u,h){if(4>u)return u+1;var v=u-2>>1;return(2+(1&u)<<v)+fe(h,v)+1}function It(u,h){return 120<h?h-120:1<=(v=((v=qb[h-1])>>4)*u+(8-(15&v)))?v:1;var v}function Ot(u,h,v){var w=G(v),L=u[h+=255&w].g-8;return 0<L&&(Q(v,v.u+8),w=G(v),h+=u[h].value,h+=w&(1<<L)-1),Q(v,v.u+u[h].g),u[h].value}function dn(u,h,v){return v.g+=u.g,v.value+=u.value<<h>>>0,t(8>=v.g),u.g}function Ln(u,h,v){var w=u.xc;return t((h=w==0?0:u.vc[u.md*(v>>w)+(h>>w)])<u.Wb),u.Ya[h]}function Ei(u,h,v,w){var L=u.ab,O=u.c*h,D=u.C;h=D+h;var U=v,B=w;for(w=u.Ta,v=u.Ua;0<L--;){var H=u.gc[L],ne=D,pe=h,W=U,ie=B,ue=(B=w,U=v,H.Ea);switch(t(ne<pe),t(pe<=H.nc),H.hc){case 2:Cn(W,ie,(pe-ne)*ue,B,U);break;case 0:var be=ne,he=pe,ke=B,Ae=U,Re=(nt=H).Ea;be==0&&(hc(W,ie,null,null,1,ke,Ae),Ct(W,ie+1,0,0,Re-1,ke,Ae+1),ie+=Re,Ae+=Re,++be);for(var Pe=1<<nt.b,at=Pe-1,Ke=we(Re,nt.b),kt=nt.K,nt=nt.w+(be>>nt.b)*Ke;be<he;){var Ft=kt,Vn=nt,St=1;for(Wo(W,ie,ke,Ae-Re,1,ke,Ae);St<Re;){var rt=(St&~at)+Pe;rt>Re&&(rt=Re),(0,pc[Ft[Vn++]>>8&15])(W,ie+ +St,ke,Ae+St-Re,rt-St,ke,Ae+St),St=rt}ie+=Re,Ae+=Re,++be&at||(nt+=Ke)}pe!=H.nc&&r(B,U-ue,B,U+(pe-ne-1)*ue,ue);break;case 1:for(ue=W,he=ie,Re=(W=H.Ea)-(Ae=W&~(ke=(ie=1<<H.b)-1)),be=we(W,H.b),Pe=H.K,H=H.w+(ne>>H.b)*be;ne<pe;){for(at=Pe,Ke=H,kt=new Ye,nt=he+Ae,Ft=he+W;he<nt;)tt(at[Ke++],kt),mc(kt,ue,he,ie,B,U),he+=ie,U+=ie;he<Ft&&(tt(at[Ke++],kt),mc(kt,ue,he,Re,B,U),he+=Re,U+=Re),++ne&ke||(H+=be)}break;case 3:if(W==B&&ie==U&&0<H.b){for(he=B,W=ue=U+(pe-ne)*ue-(Ae=(pe-ne)*we(H.Ea,H.b)),ie=B,ke=U,be=[],Ae=(Re=Ae)-1;0<=Ae;--Ae)be[Ae]=ie[ke+Ae];for(Ae=Re-1;0<=Ae;--Ae)he[W+Ae]=be[Ae];od(H,ne,pe,B,ue,B,U)}else od(H,ne,pe,W,ie,B,U)}U=w,B=v}B!=v&&r(w,v,U,B,O)}function Mn(u,h){var v=u.V,w=u.Ba+u.c*u.C,L=h-u.C;if(t(h<=u.l.o),t(16>=L),0<L){var O=u.l,D=u.Ta,U=u.Ua,B=O.width;if(Ei(u,L,v,w),L=U=[U],t((v=u.C)<(w=h)),t(O.v<O.va),w>O.o&&(w=O.o),v<O.j){var H=O.j-v;v=O.j,L[0]+=H*B}if(v>=w?v=0:(L[0]+=4*O.v,O.ka=v-O.j,O.U=O.va-O.v,O.T=w-v,v=1),v){if(U=U[0],11>(v=u.ca).S){var ne=v.f.RGBA,pe=(w=v.S,L=O.U,O=O.T,H=ne.eb,ne.A),W=O;for(ne=ne.fb+u.Ma*ne.A;0<W--;){var ie=D,ue=U,be=L,he=H,ke=ne;switch(w){case ud:gc(ie,ue,be,he,ke);break;case dd:Qs(ie,ue,be,he,ke);break;case Kf:Qs(ie,ue,be,he,ke),yc(he,ke,0,be,1,0);break;case pg:eo(ie,ue,be,he,ke);break;case hd:lt(ie,ue,be,he,ke,1);break;case Jf:lt(ie,ue,be,he,ke,1),yc(he,ke,0,be,1,0);break;case fd:lt(ie,ue,be,he,ke,0);break;case pd:lt(ie,ue,be,he,ke,0),yc(he,ke,1,be,1,0);break;case Gf:Xs(ie,ue,be,he,ke);break;case Yf:Xs(ie,ue,be,he,ke),ag(he,ke,be,1,0);break;case mg:ea(ie,ue,be,he,ke);break;default:t(0)}U+=B,ne+=pe}u.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=v.height)}}u.C=h,t(u.C<=u.i)}function fr(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var v=u.Ya[h].G,w=u.Ya[h].H;if(0<v[1][w[1]+0].g||0<v[2][w[2]+0].g||0<v[3][w[3]+0].g)return 0}return 1}function Nr(u,h,v,w,L,O){if(u.Z!=0){var D=u.qd,U=u.rd;for(t(ra[u.Z]!=null);h<v;++h)ra[u.Z](D,U,w,L,w,L,O),D=w,U=L,L+=O;u.qd=D,u.rd=U}}function He(u,h){var v=u.l.ma,w=v.Z==0||v.Z==1?u.l.j:u.C;if(w=u.C<w?w:u.C,t(h<=u.l.o),h>w){var L=u.l.width,O=v.ca,D=v.tb+L*w,U=u.V,B=u.Ba+u.c*w,H=u.gc;t(u.ab==1),t(H[0].hc==3),Qi(H[0],w,h,U,B,O,D),Nr(v,w,h,O,D,L)}u.C=u.Ma=h}function an(u,h,v,w,L,O,D){var U=u.$/w,B=u.$%w,H=u.m,ne=u.s,pe=v+u.$,W=pe;L=v+w*L;var ie=v+w*O,ue=280+ne.ua,be=u.Pb?U:16777216,he=0<ne.ua?ne.Wa:null,ke=ne.wc,Ae=pe<ie?Ln(ne,B,U):null;t(u.C<O),t(ie<=L);var Re=!1;e:for(;;){for(;Re||pe<ie;){var Pe=0;if(U>=be){var at=pe-v;t((be=u).Pb),be.wd=be.m,be.xd=at,0<be.s.ua&&re(be.s.Wa,be.s.vb),be=U+Hb}if(B&ke||(Ae=Ln(ne,B,U)),t(Ae!=null),Ae.Qb&&(h[pe]=Ae.qb,Re=!0),!Re)if(ae(H),Ae.jc){Pe=H,at=h;var Ke=pe,kt=Ae.pd[G(Pe)&Xa-1];t(Ae.jc),256>kt.g?(Q(Pe,Pe.u+kt.g),at[Ke]=kt.value,Pe=0):(Q(Pe,Pe.u+kt.g-256),t(256<=kt.value),Pe=kt.value),Pe==0&&(Re=!0)}else Pe=Ot(Ae.G[0],Ae.H[0],H);if(H.h)break;if(Re||256>Pe){if(!Re)if(Ae.nd)h[pe]=(Ae.qb|Pe<<8)>>>0;else{if(ae(H),Re=Ot(Ae.G[1],Ae.H[1],H),ae(H),at=Ot(Ae.G[2],Ae.H[2],H),Ke=Ot(Ae.G[3],Ae.H[3],H),H.h)break;h[pe]=(Ke<<24|Re<<16|Pe<<8|at)>>>0}if(Re=!1,++pe,++B>=w&&(B=0,++U,D!=null&&U<=O&&!(U%16)&&D(u,U),he!=null))for(;W<pe;)Pe=h[W++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe}else if(280>Pe){if(Pe=ct(Pe-256,H),at=Ot(Ae.G[4],Ae.H[4],H),ae(H),at=It(w,at=ct(at,H)),H.h)break;if(pe-v<at||L-pe<Pe)break e;for(Ke=0;Ke<Pe;++Ke)h[pe+Ke]=h[pe+Ke-at];for(pe+=Pe,B+=Pe;B>=w;)B-=w,++U,D!=null&&U<=O&&!(U%16)&&D(u,U);if(t(pe<=L),B&ke&&(Ae=Ln(ne,B,U)),he!=null)for(;W<pe;)Pe=h[W++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe}else{if(!(Pe<ue))break e;for(Re=Pe-280,t(he!=null);W<pe;)Pe=h[W++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe;Pe=pe,t(!(Re>>>(at=he).Xa)),h[Pe]=at.X[Re],Re=!0}Re||t(H.h==Y(H))}if(u.Pb&&H.h&&pe<L)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&re(u.s.vb,u.s.Wa);else{if(H.h)break e;D!=null&&D(u,U>O?O:U),u.a=0,u.$=pe-v}return 1}return u.a=3,0}function Wt(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,t(u!=null)}function wn(){var u=new ht;return u==null?null:(u.a=0,u.xb=yg,_e("Predictor","VP8LPredictors"),_e("Predictor","VP8LPredictors_C"),_e("PredictorAdd","VP8LPredictorsAdd"),_e("PredictorAdd","VP8LPredictorsAdd_C"),Cn=At,mc=pt,gc=xn,Qs=Rt,Xs=_t,ea=Nt,eo=sn,S.VP8LMapColor32b=Zi,S.VP8LMapColor8b=fc,u)}function en(u,h,v,w,L){var O=1,D=[u],U=[h],B=w.m,H=w.s,ne=null,pe=0;e:for(;;){if(v)for(;O&&fe(B,1);){var W=D,ie=U,ue=w,be=1,he=ue.m,ke=ue.gc[ue.ab],Ae=fe(he,2);if(ue.Oc&1<<Ae)O=0;else{switch(ue.Oc|=1<<Ae,ke.hc=Ae,ke.Ea=W[0],ke.nc=ie[0],ke.K=[null],++ue.ab,t(4>=ue.ab),Ae){case 0:case 1:ke.b=fe(he,3)+2,be=en(we(ke.Ea,ke.b),we(ke.nc,ke.b),0,ue,ke.K),ke.K=ke.K[0];break;case 3:var Re,Pe=fe(he,8)+1,at=16<Pe?0:4<Pe?1:2<Pe?2:3;if(W[0]=we(ke.Ea,at),ke.b=at,Re=be=en(Pe,1,0,ue,ke.K)){var Ke,kt=Pe,nt=ke,Ft=1<<(8>>nt.b),Vn=s(Ft);if(Vn==null)Re=0;else{var St=nt.K[0],rt=nt.w;for(Vn[0]=nt.K[0][0],Ke=1;Ke<1*kt;++Ke)Vn[Ke]=Xe(St[rt+Ke],Vn[Ke-1]);for(;Ke<4*Ft;++Ke)Vn[Ke]=0;nt.K[0]=null,nt.K[0]=Vn,Re=1}}be=Re;break;case 2:break;default:t(0)}O=be}}if(D=D[0],U=U[0],O&&fe(B,1)&&!(O=1<=(pe=fe(B,4))&&11>=pe)){w.a=3;break e}var Be;if(Be=O)t:{var Tn,xt,zt,hn=w,sr=D,Sr=U,Sn=pe,pr=v,jr=hn.m,Gn=hn.s,$t=[null],Kt=1,jn=0,Jt=$b[Sn];n:for(;;){if(pr&&fe(jr,1)){var ar=fe(jr,3)+2,Ii=we(sr,ar),In=we(Sr,ar),Or=Ii*In;if(!en(Ii,In,0,hn,$t))break n;for($t=$t[0],Gn.xc=ar,Tn=0;Tn<Or;++Tn){var nn=$t[Tn]>>8&65535;$t[Tn]=nn,nn>=Kt&&(Kt=nn+1)}}if(jr.h)break n;for(xt=0;5>xt;++xt){var Kn=gg[xt];!xt&&0<Sn&&(Kn+=1<<Sn),jn<Kn&&(jn=Kn)}var Jr=a(Kt*Jt,$),Ar=Kt,Yr=a(Ar,X);if(Yr==null)var Zr=null;else t(65536>=Ar),Zr=Yr;var Fr=s(jn);if(Zr==null||Fr==null||Jr==null){hn.a=1;break n}var Qr=Jr;for(Tn=zt=0;Tn<Kt;++Tn){var ln=Zr[Tn],Xr=ln.G,Ri=ln.H,no=0,As=1,or=0;for(xt=0;5>xt;++xt){Kn=gg[xt],Xr[xt]=Qr,Ri[xt]=zt,!xt&&0<Sn&&(Kn+=1<<Sn);i:{var yd,ep=Kn,xd=hn,bc=Fr,u_=Qr,d_=zt,tp=0,ia=xd.m,h_=fe(ia,1);if(i(bc,0,0,ep),h_){var f_=fe(ia,1)+1,p_=fe(ia,1),Ag=fe(ia,p_==0?1:8);bc[Ag]=1,f_==2&&(bc[Ag=fe(ia,8)]=1);var wd=1}else{var Eg=s(19),Lg=fe(ia,4)+4;if(19<Lg){xd.a=3;var bd=0;break i}for(yd=0;yd<Lg;++yd)Eg[zb[yd]]=fe(ia,3);var np=void 0,_c=void 0,Cg=xd,m_=Eg,_d=ep,Pg=bc,rp=0,sa=Cg.m,Tg=8,Ig=a(128,$);r:for(;R(Ig,0,7,m_,19);){if(fe(sa,1)){var g_=2+2*fe(sa,3);if((np=2+fe(sa,g_))>_d)break r}else np=_d;for(_c=0;_c<_d&&np--;){ae(sa);var Rg=Ig[0+(127&G(sa))];Q(sa,sa.u+Rg.g);var Go=Rg.value;if(16>Go)Pg[_c++]=Go,Go!=0&&(Tg=Go);else{var v_=Go==16,Og=Go-16,y_=Ub[Og],Fg=fe(sa,Mb[Og])+y_;if(_c+Fg>_d)break r;for(var x_=v_?Tg:0;0<Fg--;)Pg[_c++]=x_}}rp=1;break r}rp||(Cg.a=3),wd=rp}(wd=wd&&!ia.h)&&(tp=R(u_,d_,8,bc,ep)),wd&&tp!=0?bd=tp:(xd.a=3,bd=0)}if(bd==0)break n;if(As&&Bb[xt]==1&&(As=Qr[zt].g==0),no+=Qr[zt].g,zt+=bd,3>=xt){var Nc,ip=Fr[0];for(Nc=1;Nc<Kn;++Nc)Fr[Nc]>ip&&(ip=Fr[Nc]);or+=ip}}if(ln.nd=As,ln.Qb=0,As&&(ln.qb=(Xr[3][Ri[3]+0].value<<24|Xr[1][Ri[1]+0].value<<16|Xr[2][Ri[2]+0].value)>>>0,no==0&&256>Xr[0][Ri[0]+0].value&&(ln.Qb=1,ln.qb+=Xr[0][Ri[0]+0].value<<8)),ln.jc=!ln.Qb&&6>or,ln.jc){var Nd,Es=ln;for(Nd=0;Nd<Xa;++Nd){var aa=Nd,oa=Es.pd[aa],kd=Es.G[0][Es.H[0]+aa];256<=kd.value?(oa.g=kd.g+256,oa.value=kd.value):(oa.g=0,oa.value=0,aa>>=dn(kd,8,oa),aa>>=dn(Es.G[1][Es.H[1]+aa],16,oa),aa>>=dn(Es.G[2][Es.H[2]+aa],0,oa),dn(Es.G[3][Es.H[3]+aa],24,oa))}}}Gn.vc=$t,Gn.Wb=Kt,Gn.Ya=Zr,Gn.yc=Jr,Be=1;break t}Be=0}if(!(O=Be)){w.a=3;break e}if(0<pe){if(H.ua=1<<pe,!F(H.Wa,pe)){w.a=1,O=0;break e}}else H.ua=0;var sp=w,Dg=D,w_=U,ap=sp.s,op=ap.xc;if(sp.c=Dg,sp.i=w_,ap.md=we(Dg,op),ap.wc=op==0?-1:(1<<op)-1,v){w.xb=Zb;break e}if((ne=s(D*U))==null){w.a=1,O=0;break e}O=(O=an(w,ne,0,D,U,U,null))&&!B.h;break e}return O?(L!=null?L[0]=ne:(t(ne==null),t(v)),w.$=0,v||Wt(H)):Wt(H),O}function di(u,h){var v=u.c*u.i,w=v+h+16*h;return t(u.c<=h),u.V=s(w),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+v+h,1)}function Li(u,h){var v=u.C,w=h-v,L=u.V,O=u.Ba+u.c*v;for(t(h<=u.l.o);0<w;){var D=16<w?16:w,U=u.l.ma,B=u.l.width,H=B*D,ne=U.ca,pe=U.tb+B*v,W=u.Ta,ie=u.Ua;Ei(u,D,L,O),lg(W,ie,ne,pe,H),Nr(U,v,v+D,ne,pe,B),w-=D,L+=D*u.c,v+=D}t(v==h),u.C=u.Ma=h}function Wr(){this.ub=this.yd=this.td=this.Rb=0}function Ws(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Vs(){this.Yb=function(){var u=[];return function h(v,w,L){for(var O=L[w],D=0;D<O&&(v.push(L.length>w+1?[]:0),!(L.length<w+1));D++)h(v[D],w+1,L)}(u,0,[3,11]),u}()}function Do(){this.jb=s(3),this.Wc=o([4,8],Vs),this.Xc=o([4,17],Vs)}function Hu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hi(){this.ld=this.La=this.dd=this.tc=0}function Zl(){this.Na=this.la=0}function Wu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ql(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vu(){this.uc=this.M=this.Nb=0,this.wa=Array(new hi),this.Y=0,this.ya=Array(new Ql),this.aa=0,this.l=new Mo}function Gu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ku(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Wr,this.Kc=new Ws,this.ed=new Hu,this.Qa=new Fo,this.Ic=this.$c=this.Aa=0,this.D=new Vu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,P),this.ia=0,this.pb=a(4,Wu),this.Pa=new Do,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gu),this.Hd=0,this.rb=Array(new Zl),this.sb=0,this.wa=Array(new hi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ql),this.L=this.aa=0,this.gd=o([4,2],hi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ki(u,h){return 0>u?0:u>h?h:u}function Mo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pf(){var u=new Ku;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,xc||(xc=Uo)),u}function Un(u,h,v){return u.a==0&&(u.a=h,u.sc=v,u.cb=0),0}function Ju(u,h,v){return 3<=v&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function Ji(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return Un(u,2,"null VP8Io passed to VP8GetHeaders()");var v=h.data,w=h.w,L=h.ha;if(4>L)return Un(u,7,"Truncated header.");var O=v[w+0]|v[w+1]<<8|v[w+2]<<16,D=u.Od;if(D.Rb=!(1&O),D.td=O>>1&7,D.yd=O>>4&1,D.ub=O>>5,3<D.td)return Un(u,3,"Incorrect keyframe parameters.");if(!D.yd)return Un(u,4,"Frame not displayable.");w+=3,L-=3;var U=u.Kc;if(D.Rb){if(7>L)return Un(u,7,"cannot parse picture header");if(!Ju(v,w,L))return Un(u,3,"Bad code word");U.c=16383&(v[w+4]<<8|v[w+3]),U.Td=v[w+4]>>6,U.i=16383&(v[w+6]<<8|v[w+5]),U.Ud=v[w+6]>>6,w+=7,L-=7,u.za=U.c+15>>4,u.Ub=U.i+15>>4,h.width=U.c,h.height=U.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((O=u.Pa).jb,0,255,O.jb.length),t((O=u.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(D.ub>L)return Un(u,7,"bad partition length");le(O=u.m,v,w,D.ub),w+=D.ub,L-=D.ub,D.Rb&&(U.Ld=ge(O),U.Kd=ge(O)),U=u.Qa;var B,H=u.Pa;if(t(O!=null),t(U!=null),U.Cb=ge(O),U.Cb){if(U.Bb=ge(O),ge(O)){for(U.Fb=ge(O),B=0;4>B;++B)U.Zb[B]=ge(O)?Z(O,7):0;for(B=0;4>B;++B)U.Lb[B]=ge(O)?Z(O,6):0}if(U.Bb)for(B=0;3>B;++B)H.jb[B]=ge(O)?de(O,8):255}else U.Bb=0;if(O.Ka)return Un(u,3,"cannot parse segment header");if((U=u.ed).zd=ge(O),U.Tb=de(O,6),U.wb=de(O,3),U.Pc=ge(O),U.Pc&&ge(O)){for(H=0;4>H;++H)ge(O)&&(U.vd[H]=Z(O,6));for(H=0;4>H;++H)ge(O)&&(U.od[H]=Z(O,6))}if(u.L=U.Tb==0?0:U.zd?1:2,O.Ka)return Un(u,3,"cannot parse filter header");var ne=L;if(L=B=w,w=B+ne,U=ne,u.Xb=(1<<de(u.m,2))-1,ne<3*(H=u.Xb))v=7;else{for(B+=3*H,U-=3*H,ne=0;ne<H;++ne){var pe=v[L+0]|v[L+1]<<8|v[L+2]<<16;pe>U&&(pe=U),le(u.Jc[+ne],v,B,pe),B+=pe,U-=pe,L+=3}le(u.Jc[+H],v,B,U),v=B<w?0:5}if(v!=0)return Un(u,v,"cannot parse partitions");for(v=de(B=u.m,7),L=ge(B)?Z(B,4):0,w=ge(B)?Z(B,4):0,U=ge(B)?Z(B,4):0,H=ge(B)?Z(B,4):0,B=ge(B)?Z(B,4):0,ne=u.Qa,pe=0;4>pe;++pe){if(ne.Cb){var W=ne.Zb[pe];ne.Fb||(W+=v)}else{if(0<pe){u.pb[pe]=u.pb[0];continue}W=v}var ie=u.pb[pe];ie.Sc[0]=Zf[Ki(W+L,127)],ie.Sc[1]=Qf[Ki(W+0,127)],ie.Eb[0]=2*Zf[Ki(W+w,127)],ie.Eb[1]=101581*Qf[Ki(W+U,127)]>>16,8>ie.Eb[1]&&(ie.Eb[1]=8),ie.Qc[0]=Zf[Ki(W+H,117)],ie.Qc[1]=Qf[Ki(W+B,127)],ie.lc=W+B}if(!D.Rb)return Un(u,4,"Not a key frame.");for(ge(O),D=u.Pa,v=0;4>v;++v){for(L=0;8>L;++L)for(w=0;3>w;++w)for(U=0;11>U;++U)H=xe(O,Jb[v][L][w][U])?de(O,8):Gb[v][L][w][U],D.Wc[v][L].Yb[w][U]=H;for(L=0;17>L;++L)D.Xc[v][L]=D.Wc[v][Yb[L]]}return u.kc=ge(O),u.kc&&(u.Bd=de(O,8)),u.cb=1}function Uo(u,h,v,w,L,O,D){var U=h[L].Yb[v];for(v=0;16>L;++L){if(!xe(u,U[v+0]))return L;for(;!xe(u,U[v+1]);)if(U=h[++L].Yb[0],v=0,L==16)return 16;var B=h[L+1].Yb;if(xe(u,U[v+2])){var H=u,ne=0;if(xe(H,(W=U)[(pe=v)+3]))if(xe(H,W[pe+6])){for(U=0,pe=2*(ne=xe(H,W[pe+8]))+(W=xe(H,W[pe+9+ne])),ne=0,W=Wb[pe];W[U];++U)ne+=ne+xe(H,W[U]);ne+=3+(8<<pe)}else xe(H,W[pe+7])?(ne=7+2*xe(H,165),ne+=xe(H,145)):ne=5+xe(H,159);else ne=xe(H,W[pe+4])?3+xe(H,W[pe+5]):2;U=B[2]}else ne=1,U=B[1];B=D+Vb[L],0>(H=u).b&&te(H);var pe,W=H.b,ie=(pe=H.Ca>>1)-(H.I>>W)>>31;--H.b,H.Ca+=ie,H.Ca|=1,H.I-=(pe+1&ie)<<W,O[B]=((ne^ie)-ie)*w[(0<L)+0]}return 16}function Yu(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function fi(u,h,v,w,L){L=u[h+v+32*w]+(L>>3),u[h+v+32*w]=-256&L?0>L?0:255:L}function $n(u,h,v,w,L,O){fi(u,h,0,v,w+L),fi(u,h,1,v,w+O),fi(u,h,2,v,w-O),fi(u,h,3,v,w-L)}function ps(u){return(20091*u>>16)+u}function Zu(u,h,v,w){var L,O=0,D=s(16);for(L=0;4>L;++L){var U=u[h+0]+u[h+8],B=u[h+0]-u[h+8],H=(35468*u[h+4]>>16)-ps(u[h+12]),ne=ps(u[h+4])+(35468*u[h+12]>>16);D[O+0]=U+ne,D[O+1]=B+H,D[O+2]=B-H,D[O+3]=U-ne,O+=4,h++}for(L=O=0;4>L;++L)U=(u=D[O+0]+4)+D[O+8],B=u-D[O+8],H=(35468*D[O+4]>>16)-ps(D[O+12]),fi(v,w,0,0,U+(ne=ps(D[O+4])+(35468*D[O+12]>>16))),fi(v,w,1,0,B+H),fi(v,w,2,0,B-H),fi(v,w,3,0,U-ne),O++,w+=32}function Tf(u,h,v,w){var L=u[h+0]+4,O=35468*u[h+4]>>16,D=ps(u[h+4]),U=35468*u[h+1]>>16;$n(v,w,0,L+D,u=ps(u[h+1]),U),$n(v,w,1,L+O,u,U),$n(v,w,2,L-O,u,U),$n(v,w,3,L-D,u,U)}function If(u,h,v,w,L){Zu(u,h,v,w),L&&Zu(u,h+16,v,w+4)}function Yi(u,h,v,w){to(u,h+0,v,w,1),to(u,h+32,v,w+128,1)}function Qu(u,h,v,w){var L;for(u=u[h+0]+4,L=0;4>L;++L)for(h=0;4>h;++h)fi(v,w,h,L,u)}function Xu(u,h,v,w){u[h+0]&&Gt(u,h+0,v,w),u[h+16]&&Gt(u,h+16,v,w+4),u[h+32]&&Gt(u,h+32,v,w+128),u[h+48]&&Gt(u,h+48,v,w+128+4)}function Bo(u,h,v,w){var L,O=s(16);for(L=0;4>L;++L){var D=u[h+0+L]+u[h+12+L],U=u[h+4+L]+u[h+8+L],B=u[h+4+L]-u[h+8+L],H=u[h+0+L]-u[h+12+L];O[0+L]=D+U,O[8+L]=D-U,O[4+L]=H+B,O[12+L]=H-B}for(L=0;4>L;++L)D=(u=O[0+4*L]+3)+O[3+4*L],U=O[1+4*L]+O[2+4*L],B=O[1+4*L]-O[2+4*L],H=u-O[3+4*L],v[w+0]=D+U>>3,v[w+16]=H+B>>3,v[w+32]=D-U>>3,v[w+48]=H-B>>3,w+=64}function $a(u,h,v){var w,L=h-32,O=Kr,D=255-u[L-1];for(w=0;w<v;++w){var U,B=O,H=D+u[h-1];for(U=0;U<v;++U)u[h+U]=B[H+u[L+U]];h+=32}}function Rf(u,h){$a(u,h,4)}function Of(u,h){$a(u,h,8)}function Ff(u,h){$a(u,h,16)}function Xl(u,h){var v;for(v=0;16>v;++v)r(u,h+32*v,u,h-32,16)}function ed(u,h){var v;for(v=16;0<v;--v)i(u,h,u[h-1],16),h+=32}function Ci(u,h,v){var w;for(w=0;16>w;++w)i(h,v+32*w,u,16)}function Df(u,h){var v,w=16;for(v=0;16>v;++v)w+=u[h-1+32*v]+u[h+v-32];Ci(w>>5,u,h)}function Ha(u,h){var v,w=8;for(v=0;16>v;++v)w+=u[h-1+32*v];Ci(w>>4,u,h)}function ec(u,h){var v,w=8;for(v=0;16>v;++v)w+=u[h+v-32];Ci(w>>4,u,h)}function Mf(u,h){Ci(128,u,h)}function mt(u,h,v){return u+2*h+v+2>>2}function Uf(u,h){var v,w=h-32;for(w=new Uint8Array([mt(u[w-1],u[w+0],u[w+1]),mt(u[w+0],u[w+1],u[w+2]),mt(u[w+1],u[w+2],u[w+3]),mt(u[w+2],u[w+3],u[w+4])]),v=0;4>v;++v)r(u,h+32*v,w,0,w.length)}function Bf(u,h){var v=u[h-1],w=u[h-1+32],L=u[h-1+64],O=u[h-1+96];je(u,h+0,16843009*mt(u[h-1-32],v,w)),je(u,h+32,16843009*mt(v,w,L)),je(u,h+64,16843009*mt(w,L,O)),je(u,h+96,16843009*mt(L,O,O))}function zf(u,h){var v,w=4;for(v=0;4>v;++v)w+=u[h+v-32]+u[h-1+32*v];for(w>>=3,v=0;4>v;++v)i(u,h+32*v,w,4)}function ms(u,h){var v=u[h-1+0],w=u[h-1+32],L=u[h-1+64],O=u[h-1-32],D=u[h+0-32],U=u[h+1-32],B=u[h+2-32],H=u[h+3-32];u[h+0+96]=mt(w,L,u[h-1+96]),u[h+1+96]=u[h+0+64]=mt(v,w,L),u[h+2+96]=u[h+1+64]=u[h+0+32]=mt(O,v,w),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=mt(D,O,v),u[h+3+64]=u[h+2+32]=u[h+1+0]=mt(U,D,O),u[h+3+32]=u[h+2+0]=mt(B,U,D),u[h+3+0]=mt(H,B,U)}function gs(u,h){var v=u[h+1-32],w=u[h+2-32],L=u[h+3-32],O=u[h+4-32],D=u[h+5-32],U=u[h+6-32],B=u[h+7-32];u[h+0+0]=mt(u[h+0-32],v,w),u[h+1+0]=u[h+0+32]=mt(v,w,L),u[h+2+0]=u[h+1+32]=u[h+0+64]=mt(w,L,O),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=mt(L,O,D),u[h+3+32]=u[h+2+64]=u[h+1+96]=mt(O,D,U),u[h+3+64]=u[h+2+96]=mt(D,U,B),u[h+3+96]=mt(U,B,B)}function qf(u,h){var v=u[h-1+0],w=u[h-1+32],L=u[h-1+64],O=u[h-1-32],D=u[h+0-32],U=u[h+1-32],B=u[h+2-32],H=u[h+3-32];u[h+0+0]=u[h+1+64]=O+D+1>>1,u[h+1+0]=u[h+2+64]=D+U+1>>1,u[h+2+0]=u[h+3+64]=U+B+1>>1,u[h+3+0]=B+H+1>>1,u[h+0+96]=mt(L,w,v),u[h+0+64]=mt(w,v,O),u[h+0+32]=u[h+1+96]=mt(v,O,D),u[h+1+32]=u[h+2+96]=mt(O,D,U),u[h+2+32]=u[h+3+96]=mt(D,U,B),u[h+3+32]=mt(U,B,H)}function $f(u,h){var v=u[h+0-32],w=u[h+1-32],L=u[h+2-32],O=u[h+3-32],D=u[h+4-32],U=u[h+5-32],B=u[h+6-32],H=u[h+7-32];u[h+0+0]=v+w+1>>1,u[h+1+0]=u[h+0+64]=w+L+1>>1,u[h+2+0]=u[h+1+64]=L+O+1>>1,u[h+3+0]=u[h+2+64]=O+D+1>>1,u[h+0+32]=mt(v,w,L),u[h+1+32]=u[h+0+96]=mt(w,L,O),u[h+2+32]=u[h+1+96]=mt(L,O,D),u[h+3+32]=u[h+2+96]=mt(O,D,U),u[h+3+64]=mt(D,U,B),u[h+3+96]=mt(U,B,H)}function zo(u,h){var v=u[h-1+0],w=u[h-1+32],L=u[h-1+64],O=u[h-1+96];u[h+0+0]=v+w+1>>1,u[h+2+0]=u[h+0+32]=w+L+1>>1,u[h+2+32]=u[h+0+64]=L+O+1>>1,u[h+1+0]=mt(v,w,L),u[h+3+0]=u[h+1+32]=mt(w,L,O),u[h+3+32]=u[h+1+64]=mt(L,O,O),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=O}function tc(u,h){var v=u[h-1+0],w=u[h-1+32],L=u[h-1+64],O=u[h-1+96],D=u[h-1-32],U=u[h+0-32],B=u[h+1-32],H=u[h+2-32];u[h+0+0]=u[h+2+32]=v+D+1>>1,u[h+0+32]=u[h+2+64]=w+v+1>>1,u[h+0+64]=u[h+2+96]=L+w+1>>1,u[h+0+96]=O+L+1>>1,u[h+3+0]=mt(U,B,H),u[h+2+0]=mt(D,U,B),u[h+1+0]=u[h+3+32]=mt(v,D,U),u[h+1+32]=u[h+3+64]=mt(w,v,D),u[h+1+64]=u[h+3+96]=mt(L,w,v),u[h+1+96]=mt(O,L,w)}function Wa(u,h){var v;for(v=0;8>v;++v)r(u,h+32*v,u,h-32,8)}function Hf(u,h){var v;for(v=0;8>v;++v)i(u,h,u[h-1],8),h+=32}function vs(u,h,v){var w;for(w=0;8>w;++w)i(h,v+32*w,u,8)}function Wf(u,h){var v,w=8;for(v=0;8>v;++v)w+=u[h+v-32]+u[h-1+32*v];vs(w>>4,u,h)}function nc(u,h){var v,w=4;for(v=0;8>v;++v)w+=u[h+v-32];vs(w>>3,u,h)}function rc(u,h){var v,w=4;for(v=0;8>v;++v)w+=u[h-1+32*v];vs(w>>3,u,h)}function td(u,h){vs(128,u,h)}function ys(u,h,v){var w=u[h-v],L=u[h+0],O=3*(L-w)+Vf[1020+u[h-2*v]-u[h+v]],D=cd[112+(O+4>>3)];u[h-v]=Kr[255+w+cd[112+(O+3>>3)]],u[h+0]=Kr[255+L-D]}function ic(u,h,v,w){var L=u[h+0],O=u[h+v];return gi[255+u[h-2*v]-u[h-v]]>w||gi[255+O-L]>w}function qo(u,h,v,w){return 4*gi[255+u[h-v]-u[h+0]]+gi[255+u[h-2*v]-u[h+v]]<=w}function sc(u,h,v,w,L){var O=u[h-3*v],D=u[h-2*v],U=u[h-v],B=u[h+0],H=u[h+v],ne=u[h+2*v],pe=u[h+3*v];return 4*gi[255+U-B]+gi[255+D-H]>w?0:gi[255+u[h-4*v]-O]<=L&&gi[255+O-D]<=L&&gi[255+D-U]<=L&&gi[255+pe-ne]<=L&&gi[255+ne-H]<=L&&gi[255+H-B]<=L}function Va(u,h,v,w){var L=2*w+1;for(w=0;16>w;++w)qo(u,h+w,v,L)&&ys(u,h+w,v)}function ac(u,h,v,w){var L=2*w+1;for(w=0;16>w;++w)qo(u,h+w*v,1,L)&&ys(u,h+w*v,1)}function nd(u,h,v,w){var L;for(L=3;0<L;--L)Va(u,h+=4*v,v,w)}function rd(u,h,v,w){var L;for(L=3;0<L;--L)ac(u,h+=4,v,w)}function xs(u,h,v,w,L,O,D,U){for(O=2*O+1;0<L--;){if(sc(u,h,v,O,D))if(ic(u,h,v,U))ys(u,h,v);else{var B=u,H=h,ne=v,pe=B[H-2*ne],W=B[H-ne],ie=B[H+0],ue=B[H+ne],be=B[H+2*ne],he=27*(Ae=Vf[1020+3*(ie-W)+Vf[1020+pe-ue]])+63>>7,ke=18*Ae+63>>7,Ae=9*Ae+63>>7;B[H-3*ne]=Kr[255+B[H-3*ne]+Ae],B[H-2*ne]=Kr[255+pe+ke],B[H-ne]=Kr[255+W+he],B[H+0]=Kr[255+ie-he],B[H+ne]=Kr[255+ue-ke],B[H+2*ne]=Kr[255+be-Ae]}h+=w}}function ws(u,h,v,w,L,O,D,U){for(O=2*O+1;0<L--;){if(sc(u,h,v,O,D))if(ic(u,h,v,U))ys(u,h,v);else{var B=u,H=h,ne=v,pe=B[H-ne],W=B[H+0],ie=B[H+ne],ue=cd[112+(4+(be=3*(W-pe))>>3)],be=cd[112+(be+3>>3)],he=ue+1>>1;B[H-2*ne]=Kr[255+B[H-2*ne]+he],B[H-ne]=Kr[255+pe+be],B[H+0]=Kr[255+W-ue],B[H+ne]=Kr[255+ie-he]}h+=w}}function id(u,h,v,w,L,O){xs(u,h,v,1,16,w,L,O)}function Ga(u,h,v,w,L,O){xs(u,h,1,v,16,w,L,O)}function sd(u,h,v,w,L,O){var D;for(D=3;0<D;--D)ws(u,h+=4*v,v,1,16,w,L,O)}function m(u,h,v,w,L,O){var D;for(D=3;0<D;--D)ws(u,h+=4,1,v,16,w,L,O)}function E(u,h,v,w,L,O,D,U){xs(u,h,L,1,8,O,D,U),xs(v,w,L,1,8,O,D,U)}function V(u,h,v,w,L,O,D,U){xs(u,h,1,L,8,O,D,U),xs(v,w,1,L,8,O,D,U)}function ee(u,h,v,w,L,O,D,U){ws(u,h+4*L,L,1,8,O,D,U),ws(v,w+4*L,L,1,8,O,D,U)}function oe(u,h,v,w,L,O,D,U){ws(u,h+4,1,L,8,O,D,U),ws(v,w+4,1,L,8,O,D,U)}function Se(){this.ba=new ye,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Oe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ce(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new $}function ht(){this.xb=this.a=0,this.l=new Mo,this.ca=new ye,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=a(4,Qe),this.Oc=0}function wt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Mo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qt(u,h,v,w,L,O,D){for(u=u==null?0:u[h+0],h=0;h<D;++h)L[O+h]=u+v[w+h]&255,u=L[O+h]}function bn(u,h,v,w,L,O,D){var U;if(u==null)qt(null,null,v,w,L,O,D);else for(U=0;U<D;++U)L[O+U]=u[h+U]+v[w+U]&255}function Bn(u,h,v,w,L,O,D){if(u==null)qt(null,null,v,w,L,O,D);else{var U,B=u[h+0],H=B,ne=B;for(U=0;U<D;++U)H=ne+(B=u[h+U])-H,ne=v[w+U]+(-256&H?0>H?0:255:H)&255,H=B,L[O+U]=ne}}function on(u,h,v,w){var L=h.width,O=h.o;if(t(u!=null&&h!=null),0>v||0>=w||v+w>O)return null;if(!u.Cc){if(u.ga==null){var D;if(u.ga=new wt,(D=u.ga==null)||(D=h.width*h.o,t(u.Gb.length==0),u.Gb=s(D),u.Uc=0,u.Gb==null?D=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,D=1),D=!D),!D){D=u.ga;var U=u.Fa,B=u.P,H=u.qc,ne=u.mb,pe=u.nb,W=B+1,ie=H-1,ue=D.l;if(t(U!=null&&ne!=null&&h!=null),ra[0]=null,ra[1]=qt,ra[2]=bn,ra[3]=Bn,D.ca=ne,D.tb=pe,D.c=h.width,D.i=h.height,t(0<D.c&&0<D.i),1>=H)h=0;else if(D.$a=3&U[B+0],D.Z=U[B+0]>>2&3,D.Lc=U[B+0]>>4&3,B=U[B+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||B)h=0;else if(ue.put=Me,ue.ac=Ve,ue.bc=Ze,ue.ma=D,ue.width=h.width,ue.height=h.height,ue.Da=h.Da,ue.v=h.v,ue.va=h.va,ue.j=h.j,ue.o=h.o,D.$a)e:{t(D.$a==1),h=wn();t:for(;;){if(h==null){h=0;break e}if(t(D!=null),D.mc=h,h.c=D.c,h.i=D.i,h.l=D.l,h.l.ma=D,h.l.width=D.c,h.l.height=D.i,h.a=0,se(h.m,U,W,ie),!en(D.c,D.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&fr(h.s)?(D.ic=1,U=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(U),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(D.ic=0,h=di(h,D.c)),!h))break t;h=1;break e}D.mc=null,h=0}else h=ie>=D.c*D.i;D=!h}if(D)return null;u.ga.Lc!=1?u.Ga=0:w=O-v}t(u.ga!=null),t(v+w<=O);e:{if(h=(U=u.ga).c,O=U.l.o,U.$a==0){if(W=u.rc,ie=u.Vc,ue=u.Fa,B=u.P+1+v*h,H=u.mb,ne=u.nb+v*h,t(B<=u.P+u.qc),U.Z!=0)for(t(ra[U.Z]!=null),D=0;D<w;++D)ra[U.Z](W,ie,ue,B,H,ne,h),W=H,ie=ne,ne+=h,B+=h;else for(D=0;D<w;++D)r(H,ne,ue,B,h),W=H,ie=ne,ne+=h,B+=h;u.rc=W,u.Vc=ie}else{if(t(U.mc!=null),h=v+w,t((D=U.mc)!=null),t(h<=D.i),D.C>=h)h=1;else if(U.ic||Pi(),U.ic){U=D.V,W=D.Ba,ie=D.c;var be=D.i,he=(ue=1,B=D.$/ie,H=D.$%ie,ne=D.m,pe=D.s,D.$),ke=ie*be,Ae=ie*h,Re=pe.wc,Pe=he<Ae?Ln(pe,H,B):null;t(he<=ke),t(h<=be),t(fr(pe));t:for(;;){for(;!ne.h&&he<Ae;){if(H&Re||(Pe=Ln(pe,H,B)),t(Pe!=null),ae(ne),256>(be=Ot(Pe.G[0],Pe.H[0],ne)))U[W+he]=be,++he,++H>=ie&&(H=0,++B<=h&&!(B%16)&&He(D,B));else{if(!(280>be)){ue=0;break t}be=ct(be-256,ne);var at,Ke=Ot(Pe.G[4],Pe.H[4],ne);if(ae(ne),!(he>=(Ke=It(ie,Ke=ct(Ke,ne)))&&ke-he>=be)){ue=0;break t}for(at=0;at<be;++at)U[W+he+at]=U[W+he+at-Ke];for(he+=be,H+=be;H>=ie;)H-=ie,++B<=h&&!(B%16)&&He(D,B);he<Ae&&H&Re&&(Pe=Ln(pe,H,B))}t(ne.h==Y(ne))}He(D,B>h?h:B);break t}!ue||ne.h&&he<ke?(ue=0,D.a=ne.h?5:3):D.$=he,h=ue}else h=an(D,D.V,D.Ba,D.c,D.i,h,Li);if(!h){w=0;break e}}v+w>=O&&(u.Cc=1),w=1}if(!w)return null;if(u.Cc&&((w=u.ga)!=null&&(w.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+v*L}function Hn(u,h,v,w,L,O){for(;0<L--;){var D,U=u,B=h+(v?1:0),H=u,ne=h+(v?0:3);for(D=0;D<w;++D){var pe=H[ne+4*D];pe!=255&&(pe*=32897,U[B+4*D+0]=U[B+4*D+0]*pe>>23,U[B+4*D+1]=U[B+4*D+1]*pe>>23,U[B+4*D+2]=U[B+4*D+2]*pe>>23)}h+=O}}function zn(u,h,v,w,L){for(;0<w--;){var O;for(O=0;O<v;++O){var D=u[h+2*O+0],U=15&(H=u[h+2*O+1]),B=4369*U,H=(240&H|H>>4)*B>>16;u[h+2*O+0]=(240&D|D>>4)*B>>16&240|(15&D|D<<4)*B>>16>>4&15,u[h+2*O+1]=240&H|U}h+=L}}function rr(u,h,v,w,L,O,D,U){var B,H,ne=255;for(H=0;H<L;++H){for(B=0;B<w;++B){var pe=u[h+B];O[D+4*B]=pe,ne&=pe}h+=v,D+=U}return ne!=255}function bs(u,h,v,w,L){var O;for(O=0;O<L;++O)v[w+O]=u[h+O]>>8}function Pi(){yc=Hn,ag=zn,og=rr,lg=bs}function _s(u,h,v){S[u]=function(w,L,O,D,U,B,H,ne,pe,W,ie,ue,be,he,ke,Ae,Re){var Pe,at=Re-1>>1,Ke=U[B+0]|H[ne+0]<<16,kt=pe[W+0]|ie[ue+0]<<16;t(w!=null);var nt=3*Ke+kt+131074>>2;for(h(w[L+0],255&nt,nt>>16,be,he),O!=null&&(nt=3*kt+Ke+131074>>2,h(O[D+0],255&nt,nt>>16,ke,Ae)),Pe=1;Pe<=at;++Pe){var Ft=U[B+Pe]|H[ne+Pe]<<16,Vn=pe[W+Pe]|ie[ue+Pe]<<16,St=Ke+Ft+kt+Vn+524296,rt=St+2*(Ft+kt)>>3;nt=rt+Ke>>1,Ke=(St=St+2*(Ke+Vn)>>3)+Ft>>1,h(w[L+2*Pe-1],255&nt,nt>>16,be,he+(2*Pe-1)*v),h(w[L+2*Pe-0],255&Ke,Ke>>16,be,he+(2*Pe-0)*v),O!=null&&(nt=St+kt>>1,Ke=rt+Vn>>1,h(O[D+2*Pe-1],255&nt,nt>>16,ke,Ae+(2*Pe-1)*v),h(O[D+2*Pe+0],255&Ke,Ke>>16,ke,Ae+(2*Pe+0)*v)),Ke=Ft,kt=Vn}1&Re||(nt=3*Ke+kt+131074>>2,h(w[L+Re-1],255&nt,nt>>16,be,he+(Re-1)*v),O!=null&&(nt=3*kt+Ke+131074>>2,h(O[D+Re-1],255&nt,nt>>16,ke,Ae+(Re-1)*v)))}}function oc(){vi[ud]=Qb,vi[dd]=xg,vi[pg]=Xb,vi[hd]=wg,vi[fd]=bg,vi[Gf]=_g,vi[mg]=e_,vi[Kf]=xg,vi[Jf]=wg,vi[pd]=bg,vi[Yf]=_g}function $o(u){return u&~t_?0>u?0:255:u>>Ng}function Gs(u,h){return $o((19077*u>>8)+(26149*h>>8)-14234)}function Ka(u,h,v){return $o((19077*u>>8)-(6419*h>>8)-(13320*v>>8)+8708)}function Ja(u,h){return $o((19077*u>>8)+(33050*h>>8)-17685)}function Ks(u,h,v,w,L){w[L+0]=Gs(u,v),w[L+1]=Ka(u,h,v),w[L+2]=Ja(u,h)}function ir(u,h,v,w,L){w[L+0]=Ja(u,h),w[L+1]=Ka(u,h,v),w[L+2]=Gs(u,v)}function Ya(u,h,v,w,L){var O=Ka(u,h,v);h=O<<3&224|Ja(u,h)>>3,w[L+0]=248&Gs(u,v)|O>>5,w[L+1]=h}function Za(u,h,v,w,L){var O=240&Ja(u,h)|15;w[L+0]=240&Gs(u,v)|Ka(u,h,v)>>4,w[L+1]=O}function lc(u,h,v,w,L){w[L+0]=255,Ks(u,h,v,w,L+1)}function cc(u,h,v,w,L){ir(u,h,v,w,L),w[L+3]=255}function kr(u,h,v,w,L){Ks(u,h,v,w,L),w[L+3]=255}function Ns(u,h,v){S[u]=function(w,L,O,D,U,B,H,ne,pe){for(var W=ne+(-2&pe)*v;ne!=W;)h(w[L+0],O[D+0],U[B+0],H,ne),h(w[L+1],O[D+0],U[B+0],H,ne+v),L+=2,++D,++B,ne+=2*v;1&pe&&h(w[L+0],O[D+0],U[B+0],H,ne)}}function Ho(u,h,v){return v==0?u==0?h==0?6:5:h==0?4:0:v}function ad(u,h,v,w,L){switch(u>>>30){case 3:to(h,v,w,L,0);break;case 2:mi(h,v,w,L);break;case 1:Gt(h,v,w,L)}}function pi(u,h){var v,w,L=h.M,O=h.Nb,D=u.oc,U=u.pc+40,B=u.oc,H=u.pc+584,ne=u.oc,pe=u.pc+600;for(v=0;16>v;++v)D[U+32*v-1]=129;for(v=0;8>v;++v)B[H+32*v-1]=129,ne[pe+32*v-1]=129;for(0<L?D[U-1-32]=B[H-1-32]=ne[pe-1-32]=129:(i(D,U-32-1,127,21),i(B,H-32-1,127,9),i(ne,pe-32-1,127,9)),w=0;w<u.za;++w){var W=h.ya[h.aa+w];if(0<w){for(v=-1;16>v;++v)r(D,U+32*v-4,D,U+32*v+12,4);for(v=-1;8>v;++v)r(B,H+32*v-4,B,H+32*v+4,4),r(ne,pe+32*v-4,ne,pe+32*v+4,4)}var ie=u.Gd,ue=u.Hd+w,be=W.ad,he=W.Hc;if(0<L&&(r(D,U-32,ie[ue].y,0,16),r(B,H-32,ie[ue].f,0,8),r(ne,pe-32,ie[ue].ea,0,8)),W.Za){var ke=D,Ae=U-32+16;for(0<L&&(w>=u.za-1?i(ke,Ae,ie[ue].y[15],4):r(ke,Ae,ie[ue+1].y,0,4)),v=0;4>v;v++)ke[Ae+128+v]=ke[Ae+256+v]=ke[Ae+384+v]=ke[Ae+0+v];for(v=0;16>v;++v,he<<=2)ke=D,Ae=U+Sg[v],Ti[W.Ob[v]](ke,Ae),ad(he,be,16*+v,ke,Ae)}else if(ke=Ho(w,L,W.Ob[0]),na[ke](D,U),he!=0)for(v=0;16>v;++v,he<<=2)ad(he,be,16*+v,D,U+Sg[v]);for(v=W.Gc,ke=Ho(w,L,W.Dd),js[ke](B,H),js[ke](ne,pe),he=be,ke=B,Ae=H,255&(W=0|v)&&(170&W?Xi(he,256,ke,Ae):tn(he,256,ke,Ae)),W=ne,he=pe,255&(v>>=8)&&(170&v?Xi(be,320,W,he):tn(be,320,W,he)),L<u.Ub-1&&(r(ie[ue].y,0,D,U+480,16),r(ie[ue].f,0,B,H+224,8),r(ie[ue].ea,0,ne,pe+224,8)),v=8*O*u.B,ie=u.sa,ue=u.ta+16*w+16*O*u.R,be=u.qa,W=u.ra+8*w+v,he=u.Ha,ke=u.Ia+8*w+v,v=0;16>v;++v)r(ie,ue+v*u.R,D,U+32*v,16);for(v=0;8>v;++v)r(be,W+v*u.B,B,H+32*v,8),r(he,ke+v*u.B,ne,pe+32*v,8)}}function Qa(u,h,v,w,L,O,D,U,B){var H=[0],ne=[0],pe=0,W=B!=null?B.kd:0,ie=B??new Ce;if(u==null||12>v)return 7;ie.data=u,ie.w=h,ie.ha=v,h=[h],v=[v],ie.gb=[ie.gb];e:{var ue=h,be=v,he=ie.gb;if(t(u!=null),t(be!=null),t(he!=null),he[0]=0,12<=be[0]&&!n(u,ue[0],"RIFF")){if(n(u,ue[0]+8,"WEBP")){he=3;break e}var ke=We(u,ue[0]+4);if(12>ke||4294967286<ke){he=3;break e}if(W&&ke>be[0]-8){he=7;break e}he[0]=ke,ue[0]+=12,be[0]-=12}he=0}if(he!=0)return he;for(ke=0<ie.gb[0],v=v[0];;){e:{var Ae=u;be=h,he=v;var Re=H,Pe=ne,at=ue=[0];if((nt=pe=[pe])[0]=0,8>he[0])he=7;else{if(!n(Ae,be[0],"VP8X")){if(We(Ae,be[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var Ke=We(Ae,be[0]+8),kt=1+Te(Ae,be[0]+12);if(2147483648<=kt*(Ae=1+Te(Ae,be[0]+15))){he=3;break e}at!=null&&(at[0]=Ke),Re!=null&&(Re[0]=kt),Pe!=null&&(Pe[0]=Ae),be[0]+=18,he[0]-=18,nt[0]=1}he=0}}if(pe=pe[0],ue=ue[0],he!=0)return he;if(be=!!(2&ue),!ke&&pe)return 3;if(O!=null&&(O[0]=!!(16&ue)),D!=null&&(D[0]=be),U!=null&&(U[0]=0),D=H[0],ue=ne[0],pe&&be&&B==null){he=0;break}if(4>v){he=7;break}if(ke&&pe||!ke&&!pe&&!n(u,h[0],"ALPH")){v=[v],ie.na=[ie.na],ie.P=[ie.P],ie.Sa=[ie.Sa];e:{Ke=u,he=h,ke=v;var nt=ie.gb;Re=ie.na,Pe=ie.P,at=ie.Sa,kt=22,t(Ke!=null),t(ke!=null),Ae=he[0];var Ft=ke[0];for(t(Re!=null),t(at!=null),Re[0]=null,Pe[0]=null,at[0]=0;;){if(he[0]=Ae,ke[0]=Ft,8>Ft){he=7;break e}var Vn=We(Ke,Ae+4);if(4294967286<Vn){he=3;break e}var St=8+Vn+1&-2;if(kt+=St,0<nt&&kt>nt){he=3;break e}if(!n(Ke,Ae,"VP8 ")||!n(Ke,Ae,"VP8L")){he=0;break e}if(Ft[0]<St){he=7;break e}n(Ke,Ae,"ALPH")||(Re[0]=Ke,Pe[0]=Ae+8,at[0]=Vn),Ae+=St,Ft-=St}}if(v=v[0],ie.na=ie.na[0],ie.P=ie.P[0],ie.Sa=ie.Sa[0],he!=0)break}v=[v],ie.Ja=[ie.Ja],ie.xa=[ie.xa];e:if(nt=u,he=h,ke=v,Re=ie.gb[0],Pe=ie.Ja,at=ie.xa,Ke=he[0],Ae=!n(nt,Ke,"VP8 "),kt=!n(nt,Ke,"VP8L"),t(nt!=null),t(ke!=null),t(Pe!=null),t(at!=null),8>ke[0])he=7;else{if(Ae||kt){if(nt=We(nt,Ke+4),12<=Re&&nt>Re-12){he=3;break e}if(W&&nt>ke[0]-8){he=7;break e}Pe[0]=nt,he[0]+=8,ke[0]-=8,at[0]=kt}else at[0]=5<=ke[0]&&nt[Ke+0]==47&&!(nt[Ke+4]>>5),Pe[0]=ke[0];he=0}if(v=v[0],ie.Ja=ie.Ja[0],ie.xa=ie.xa[0],h=h[0],he!=0)break;if(4294967286<ie.Ja)return 3;if(U==null||be||(U[0]=ie.xa?2:1),D=[D],ue=[ue],ie.xa){if(5>v){he=7;break}U=D,W=ue,be=O,u==null||5>v?u=0:5<=v&&u[h+0]==47&&!(u[h+4]>>5)?(ke=[0],nt=[0],Re=[0],se(Pe=new q,u,h,v),Xt(Pe,ke,nt,Re)?(U!=null&&(U[0]=ke[0]),W!=null&&(W[0]=nt[0]),be!=null&&(be[0]=Re[0]),u=1):u=0):u=0}else{if(10>v){he=7;break}U=ue,u==null||10>v||!Ju(u,h+3,v-3)?u=0:(W=u[h+0]|u[h+1]<<8|u[h+2]<<16,be=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&W||3<(W>>1&7)||!(W>>4&1)||W>>5>=ie.Ja||!be||!u?u=0:(D&&(D[0]=be),U&&(U[0]=u),u=1))}if(!u||(D=D[0],ue=ue[0],pe&&(H[0]!=D||ne[0]!=ue)))return 3;B!=null&&(B[0]=ie,B.offset=h-B.w,t(4294967286>h-B.w),t(B.offset==B.ha-v));break}return he==0||he==7&&pe&&B==null?(O!=null&&(O[0]|=ie.na!=null&&0<ie.na.length),w!=null&&(w[0]=D),L!=null&&(L[0]=ue),0):he}function uc(u,h,v){var w=h.width,L=h.height,O=0,D=0,U=w,B=L;if(h.Da=u!=null&&0<u.Da,h.Da&&(U=u.cd,B=u.bd,O=u.v,D=u.j,11>v||(O&=-2,D&=-2),0>O||0>D||0>=U||0>=B||O+U>w||D+B>L))return 0;if(h.v=O,h.j=D,h.va=O+U,h.o=D+B,h.U=U,h.T=B,h.da=u!=null&&0<u.da,h.da){if(!ze(U,B,v=[u.ib],O=[u.hb]))return 0;h.ib=v[0],h.hb=O[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*L/4,h.Kb=0),1}function dc(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function Js(u,h,v,w){if(w==null||0>=u||0>=h)return 2;if(v!=null){if(v.Da){var L=v.cd,O=v.bd,D=-2&v.v,U=-2&v.j;if(0>D||0>U||0>=L||0>=O||D+L>u||U+O>h)return 2;u=L,h=O}if(v.da){if(!ze(u,h,L=[v.ib],O=[v.hb]))return 2;u=L[0],h=O[0]}}w.width=u,w.height=h;e:{var B=w.width,H=w.height;if(u=w.S,0>=B||0>=H||!(u>=ud&&13>u))u=2;else{if(0>=w.Rd&&w.sd==null){D=O=L=h=0;var ne=(U=B*jg[u])*H;if(11>u||(O=(H+1)/2*(h=(B+1)/2),u==12&&(D=(L=B)*H)),(H=s(ne+2*O+D))==null){u=1;break e}w.sd=H,11>u?((B=w.f.RGBA).eb=H,B.fb=0,B.A=U,B.size=ne):((B=w.f.kb).y=H,B.O=0,B.fa=U,B.Fd=ne,B.f=H,B.N=0+ne,B.Ab=h,B.Cd=O,B.ea=H,B.W=0+ne+O,B.Db=h,B.Ed=O,u==12&&(B.F=H,B.J=0+ne+2*O),B.Tc=D,B.lb=L)}if(h=1,L=w.S,O=w.width,D=w.height,L>=ud&&13>L)if(11>L)u=w.f.RGBA,h&=(U=Math.abs(u.A))*(D-1)+O<=u.size,h&=U>=O*jg[L],h&=u.eb!=null;else{u=w.f.kb,U=(O+1)/2,ne=(D+1)/2,B=Math.abs(u.fa),H=Math.abs(u.Ab);var pe=Math.abs(u.Db),W=Math.abs(u.lb),ie=W*(D-1)+O;h&=B*(D-1)+O<=u.Fd,h&=H*(ne-1)+U<=u.Cd,h=(h&=pe*(ne-1)+U<=u.Ed)&B>=O&H>=U&pe>=U,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,L==12&&(h&=W>=O,h&=ie<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||v!=null&&v.fd&&(u=dc(w)),u}var Xa=64,Vr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gr=24,Ys=32,ks=8,Zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(u){return u},S.Predictor2=function(u,h,v){return h[v+0]},S.Predictor3=function(u,h,v){return h[v+1]},S.Predictor4=function(u,h,v){return h[v-1]},S.Predictor5=function(u,h,v){return et(et(u,h[v+1]),h[v+0])},S.Predictor6=function(u,h,v){return et(u,h[v-1])},S.Predictor7=function(u,h,v){return et(u,h[v+0])},S.Predictor8=function(u,h,v){return et(h[v-1],h[v+0])},S.Predictor9=function(u,h,v){return et(h[v+0],h[v+1])},S.Predictor10=function(u,h,v){return et(et(u,h[v-1]),et(h[v+0],h[v+1]))},S.Predictor11=function(u,h,v){var w=h[v+0];return 0>=ft(w>>24&255,u>>24&255,(h=h[v-1])>>24&255)+ft(w>>16&255,u>>16&255,h>>16&255)+ft(w>>8&255,u>>8&255,h>>8&255)+ft(255&w,255&u,255&h)?w:u},S.Predictor12=function(u,h,v){var w=h[v+0];return(Ut((u>>24&255)+(w>>24&255)-((h=h[v-1])>>24&255))<<24|Ut((u>>16&255)+(w>>16&255)-(h>>16&255))<<16|Ut((u>>8&255)+(w>>8&255)-(h>>8&255))<<8|Ut((255&u)+(255&w)-(255&h)))>>>0},S.Predictor13=function(u,h,v){var w=h[v-1];return(Lt((u=et(u,h[v+0]))>>24&255,w>>24&255)<<24|Lt(u>>16&255,w>>16&255)<<16|Lt(u>>8&255,w>>8&255)<<8|Lt(255&u,255&w))>>>0};var hc=S.PredictorAdd0;S.PredictorAdd1=Ct,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var Wo=S.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Cn,od=S.ColorIndexInverseTransform,Zi=S.MapARGB,Qi=S.VP8LColorIndexInverseTransformAlpha,fc=S.MapAlpha,pc=S.VP8LPredictorsAdd=[];pc.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var mc,gc,Qs,Xs,ea,eo,ta,to,mi,Xi,Gt,tn,Pn,Wn,Ss,vc,Vo,ld,eg,tg,ng,rg,ig,sg,yc,ag,og,lg,cg=s(511),ug=s(2041),dg=s(225),hg=s(767),fg=0,Vf=ug,cd=dg,Kr=hg,gi=cg,ud=0,dd=1,pg=2,hd=3,fd=4,Gf=5,mg=6,Kf=7,Jf=8,pd=9,Yf=10,Mb=[2,3,7],Ub=[3,3,11],gg=[280,256,256,256,40],Bb=[0,1,1,1,0],zb=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$b=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Hb=8,Zf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Qf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xc=null,Wb=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Vb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gb=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Kb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Jb=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],na=[],Ti=[],js=[],Zb=1,yg=2,ra=[],vi=[];_s("UpsampleRgbLinePair",Ks,3),_s("UpsampleBgrLinePair",ir,3),_s("UpsampleRgbaLinePair",kr,4),_s("UpsampleBgraLinePair",cc,4),_s("UpsampleArgbLinePair",lc,4),_s("UpsampleRgba4444LinePair",Za,2),_s("UpsampleRgb565LinePair",Ya,2);var Qb=S.UpsampleRgbLinePair,Xb=S.UpsampleBgrLinePair,xg=S.UpsampleRgbaLinePair,wg=S.UpsampleBgraLinePair,bg=S.UpsampleArgbLinePair,_g=S.UpsampleRgba4444LinePair,e_=S.UpsampleRgb565LinePair,md=16,gd=1<<md-1,wc=-227,Xf=482,Ng=6,t_=(256<<Ng)-1,kg=0,n_=s(256),r_=s(256),i_=s(256),s_=s(256),a_=s(Xf-wc),o_=s(Xf-wc);Ns("YuvToRgbRow",Ks,3),Ns("YuvToBgrRow",ir,3),Ns("YuvToRgbaRow",kr,4),Ns("YuvToBgraRow",cc,4),Ns("YuvToArgbRow",lc,4),Ns("YuvToRgba4444Row",Za,2),Ns("YuvToRgb565Row",Ya,2);var Sg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vd=[0,2,8],l_=[8,7,6,4,4,2,2,2,1,1,1,1],c_=1;this.WebPDecodeRGBA=function(u,h,v,w,L){var O=dd,D=new Se,U=new ye;D.ba=U,U.S=O,U.width=[U.width],U.height=[U.height];var B=U.width,H=U.height,ne=new Ne;if(ne==null||u==null)var pe=2;else t(ne!=null),pe=Qa(u,h,v,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(pe!=0?B=0:(B!=null&&(B[0]=ne.width[0]),H!=null&&(H[0]=ne.height[0]),B=1),B){U.width=U.width[0],U.height=U.height[0],w!=null&&(w[0]=U.width),L!=null&&(L[0]=U.height);e:{if(w=new Mo,(L=new Ce).data=u,L.w=h,L.ha=v,L.kd=1,h=[0],t(L!=null),((u=Qa(L.data,L.w,L.ha,null,null,null,h,null,L))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(t(D!=null),w.data=L.data,w.w=L.w+L.offset,w.ha=L.ha-L.offset,w.put=Me,w.ac=Ve,w.bc=Ze,w.ma=D,L.xa){if((u=wn())==null){D=1;break e}if(function(W,ie){var ue=[0],be=[0],he=[0];t:for(;;){if(W==null)return 0;if(ie==null)return W.a=2,0;if(W.l=ie,W.a=0,se(W.m,ie.data,ie.w,ie.ha),!Xt(W.m,ue,be,he)){W.a=3;break t}if(W.xb=yg,ie.width=ue[0],ie.height=be[0],!en(ue[0],be[0],1,W,null))break t;return 1}return t(W.a!=0),0}(u,w)){if(w=(h=Js(w.width,w.height,D.Oa,D.ba))==0){t:{w=u;n:for(;;){if(w==null){w=0;break t}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((v=w.l)!=null),t((L=v.ma)!=null),w.xb!=0){if(w.ca=L.ba,w.tb=L.tb,t(w.ca!=null),!uc(L.Oa,v,hd)){w.a=2;break n}if(!di(w,v.width)||v.da)break n;if((v.da||ce(w.ca.S))&&Pi(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&Pi()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!F(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!an(w,w.V,w.Ba,w.c,w.i,v.o,Mn))break n;L.Dc=w.Ma,w=1;break t}t(w.a!=0),w=0}w=!w}w&&(h=u.a)}else h=u.a}else{if((u=new Pf)==null){D=1;break e}if(u.Fa=L.na,u.P=L.P,u.qc=L.Sa,Ji(u,w)){if((h=Js(w.width,w.height,D.Oa,D.ba))==0){if(u.Aa=0,v=D.Oa,t((L=u)!=null),v!=null){if(0<(B=0>(B=v.Md)?0:100<B?255:255*B/100)){for(H=ne=0;4>H;++H)12>(pe=L.pb[H]).lc&&(pe.ia=B*l_[0>pe.lc?0:pe.lc]>>3),ne|=pe.ia;ne&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=v.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}(function(W,ie){if(W==null)return 0;if(ie==null)return Un(W,2,"NULL VP8Io parameter in VP8Decode().");if(!W.cb&&!Ji(W,ie))return 0;if(t(W.cb),ie.ac==null||ie.ac(ie)){ie.ob&&(W.L=0);var ue=vd[W.L];if(W.L==2?(W.yb=0,W.zb=0):(W.yb=ie.v-ue>>4,W.zb=ie.j-ue>>4,0>W.yb&&(W.yb=0),0>W.zb&&(W.zb=0)),W.Va=ie.o+15+ue>>4,W.Hb=ie.va+15+ue>>4,W.Hb>W.za&&(W.Hb=W.za),W.Va>W.Ub&&(W.Va=W.Ub),0<W.L){var be=W.ed;for(ue=0;4>ue;++ue){var he;if(W.Qa.Cb){var ke=W.Qa.Lb[ue];W.Qa.Fb||(ke+=be.Tb)}else ke=be.Tb;for(he=0;1>=he;++he){var Ae=W.gd[ue][he],Re=ke;if(be.Pc&&(Re+=be.vd[0],he&&(Re+=be.od[0])),0<(Re=0>Re?0:63<Re?63:Re)){var Pe=Re;0<be.wb&&(Pe=4<be.wb?Pe>>2:Pe>>1)>9-be.wb&&(Pe=9-be.wb),1>Pe&&(Pe=1),Ae.dd=Pe,Ae.tc=2*Re+Pe,Ae.ld=40<=Re?2:15<=Re?1:0}else Ae.tc=0;Ae.La=he}}}ue=0}else Un(W,6,"Frame setup failed"),ue=W.a;if(ue=ue==0){if(ue){W.$c=0,0<W.Aa||(W.Ic=c_);t:{ue=W.Ic,be=4*(Pe=W.za);var at=32*Pe,Ke=Pe+1,kt=0<W.L?Pe*(0<W.Aa?2:1):0,nt=(W.Aa==2?2:1)*Pe;if((Ae=be+832+(he=3*(16*ue+vd[W.L])/2*at)+(ke=W.Fa!=null&&0<W.Fa.length?W.Kc.c*W.Kc.i:0))!=Ae)ue=0;else{if(Ae>W.Vb){if(W.Vb=0,W.Ec=s(Ae),W.Fc=0,W.Ec==null){ue=Un(W,1,"no memory during frame initialization.");break t}W.Vb=Ae}Ae=W.Ec,Re=W.Fc,W.Ac=Ae,W.Bc=Re,Re+=be,W.Gd=a(at,Gu),W.Hd=0,W.rb=a(Ke+1,Zl),W.sb=1,W.wa=kt?a(kt,hi):null,W.Y=0,W.D.Nb=0,W.D.wa=W.wa,W.D.Y=W.Y,0<W.Aa&&(W.D.Y+=Pe),t(!0),W.oc=Ae,W.pc=Re,Re+=832,W.ya=a(nt,Ql),W.aa=0,W.D.ya=W.ya,W.D.aa=W.aa,W.Aa==2&&(W.D.aa+=Pe),W.R=16*Pe,W.B=8*Pe,Pe=(at=vd[W.L])*W.R,at=at/2*W.B,W.sa=Ae,W.ta=Re+Pe,W.qa=W.sa,W.ra=W.ta+16*ue*W.R+at,W.Ha=W.qa,W.Ia=W.ra+8*ue*W.B+at,W.$c=0,Re+=he,W.mb=ke?Ae:null,W.nb=ke?Re:null,t(Re+ke<=W.Fc+W.Vb),Yu(W),i(W.Ac,W.Bc,0,be),ue=1}}if(ue){if(ie.ka=0,ie.y=W.sa,ie.O=W.ta,ie.f=W.qa,ie.N=W.ra,ie.ea=W.Ha,ie.Vd=W.Ia,ie.fa=W.R,ie.Rc=W.B,ie.F=null,ie.J=0,!fg){for(ue=-255;255>=ue;++ue)cg[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)ug[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)dg[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)hg[255+ue]=0>ue?0:255<ue?255:ue;fg=1}ta=Bo,to=If,Xi=Yi,Gt=Qu,tn=Xu,mi=Tf,Pn=id,Wn=Ga,Ss=E,vc=V,Vo=sd,ld=m,eg=ee,tg=oe,ng=Va,rg=ac,ig=nd,sg=rd,Ti[0]=zf,Ti[1]=Rf,Ti[2]=Uf,Ti[3]=Bf,Ti[4]=ms,Ti[5]=qf,Ti[6]=gs,Ti[7]=$f,Ti[8]=tc,Ti[9]=zo,na[0]=Df,na[1]=Ff,na[2]=Xl,na[3]=ed,na[4]=Ha,na[5]=ec,na[6]=Mf,js[0]=Wf,js[1]=Of,js[2]=Wa,js[3]=Hf,js[4]=rc,js[5]=nc,js[6]=td,ue=1}else ue=0}ue&&(ue=function(Ft,Vn){for(Ft.M=0;Ft.M<Ft.Va;++Ft.M){var St,rt=Ft.Jc[Ft.M&Ft.Xb],Be=Ft.m,Tn=Ft;for(St=0;St<Tn.za;++St){var xt=Be,zt=Tn,hn=zt.Ac,sr=zt.Bc+4*St,Sr=zt.zc,Sn=zt.ya[zt.aa+St];if(zt.Qa.Bb?Sn.$b=xe(xt,zt.Pa.jb[0])?2+xe(xt,zt.Pa.jb[2]):xe(xt,zt.Pa.jb[1]):Sn.$b=0,zt.kc&&(Sn.Ad=xe(xt,zt.Bd)),Sn.Za=!xe(xt,145)+0,Sn.Za){var pr=Sn.Ob,jr=0;for(zt=0;4>zt;++zt){var Gn,$t=Sr[0+zt];for(Gn=0;4>Gn;++Gn){$t=Kb[hn[sr+Gn]][$t];for(var Kt=vg[xe(xt,$t[0])];0<Kt;)Kt=vg[2*Kt+xe(xt,$t[Kt])];$t=-Kt,hn[sr+Gn]=$t}r(pr,jr,hn,sr,4),jr+=4,Sr[0+zt]=$t}}else $t=xe(xt,156)?xe(xt,128)?1:3:xe(xt,163)?2:0,Sn.Ob[0]=$t,i(hn,sr,$t,4),i(Sr,0,$t,4);Sn.Dd=xe(xt,142)?xe(xt,114)?xe(xt,183)?1:3:2:0}if(Tn.m.Ka)return Un(Ft,7,"Premature end-of-partition0 encountered.");for(;Ft.ja<Ft.za;++Ft.ja){if(Tn=rt,xt=(Be=Ft).rb[Be.sb-1],hn=Be.rb[Be.sb+Be.ja],St=Be.ya[Be.aa+Be.ja],sr=Be.kc?St.Ad:0)xt.la=hn.la=0,St.Za||(xt.Na=hn.Na=0),St.Hc=0,St.Gc=0,St.ia=0;else{var jn,Jt;if(xt=hn,hn=Tn,sr=Be.Pa.Xc,Sr=Be.ya[Be.aa+Be.ja],Sn=Be.pb[Sr.$b],zt=Sr.ad,pr=0,jr=Be.rb[Be.sb-1],$t=Gn=0,i(zt,pr,0,384),Sr.Za)var ar=0,Ii=sr[3];else{Kt=s(16);var In=xt.Na+jr.Na;if(In=xc(hn,sr[1],In,Sn.Eb,0,Kt,0),xt.Na=jr.Na=(0<In)+0,1<In)ta(Kt,0,zt,pr);else{var Or=Kt[0]+3>>3;for(Kt=0;256>Kt;Kt+=16)zt[pr+Kt]=Or}ar=1,Ii=sr[0]}var nn=15&xt.la,Kn=15&jr.la;for(Kt=0;4>Kt;++Kt){var Jr=1&Kn;for(Or=Jt=0;4>Or;++Or)nn=nn>>1|(Jr=(In=xc(hn,Ii,In=Jr+(1&nn),Sn.Sc,ar,zt,pr))>ar)<<7,Jt=Jt<<2|(3<In?3:1<In?2:zt[pr+0]!=0),pr+=16;nn>>=4,Kn=Kn>>1|Jr<<7,Gn=(Gn<<8|Jt)>>>0}for(Ii=nn,ar=Kn>>4,jn=0;4>jn;jn+=2){for(Jt=0,nn=xt.la>>4+jn,Kn=jr.la>>4+jn,Kt=0;2>Kt;++Kt){for(Jr=1&Kn,Or=0;2>Or;++Or)In=Jr+(1&nn),nn=nn>>1|(Jr=0<(In=xc(hn,sr[2],In,Sn.Qc,0,zt,pr)))<<3,Jt=Jt<<2|(3<In?3:1<In?2:zt[pr+0]!=0),pr+=16;nn>>=2,Kn=Kn>>1|Jr<<5}$t|=Jt<<4*jn,Ii|=nn<<4<<jn,ar|=(240&Kn)<<jn}xt.la=Ii,jr.la=ar,Sr.Hc=Gn,Sr.Gc=$t,Sr.ia=43690&$t?0:Sn.ia,sr=!(Gn|$t)}if(0<Be.L&&(Be.wa[Be.Y+Be.ja]=Be.gd[St.$b][St.Za],Be.wa[Be.Y+Be.ja].La|=!sr),Tn.Ka)return Un(Ft,7,"Premature end-of-file encountered.")}if(Yu(Ft),Be=Vn,Tn=1,St=(rt=Ft).D,xt=0<rt.L&&rt.M>=rt.zb&&rt.M<=rt.Va,rt.Aa==0)t:{if(St.M=rt.M,St.uc=xt,pi(rt,St),Tn=1,St=(Jt=rt.D).Nb,xt=($t=vd[rt.L])*rt.R,hn=$t/2*rt.B,Kt=16*St*rt.R,Or=8*St*rt.B,sr=rt.sa,Sr=rt.ta-xt+Kt,Sn=rt.qa,zt=rt.ra-hn+Or,pr=rt.Ha,jr=rt.Ia-hn+Or,Kn=(nn=Jt.M)==0,Gn=nn>=rt.Va-1,rt.Aa==2&&pi(rt,Jt),Jt.uc)for(Jr=(In=rt).D.M,t(In.D.uc),Jt=In.yb;Jt<In.Hb;++Jt){ar=Jt,Ii=Jr;var Ar=(Yr=(or=In).D).Nb;jn=or.R;var Yr=Yr.wa[Yr.Y+ar],Zr=or.sa,Fr=or.ta+16*Ar*jn+16*ar,Qr=Yr.dd,ln=Yr.tc;if(ln!=0)if(t(3<=ln),or.L==1)0<ar&&rg(Zr,Fr,jn,ln+4),Yr.La&&sg(Zr,Fr,jn,ln),0<Ii&&ng(Zr,Fr,jn,ln+4),Yr.La&&ig(Zr,Fr,jn,ln);else{var Xr=or.B,Ri=or.qa,no=or.ra+8*Ar*Xr+8*ar,As=or.Ha,or=or.Ia+8*Ar*Xr+8*ar;Ar=Yr.ld,0<ar&&(Wn(Zr,Fr,jn,ln+4,Qr,Ar),vc(Ri,no,As,or,Xr,ln+4,Qr,Ar)),Yr.La&&(ld(Zr,Fr,jn,ln,Qr,Ar),tg(Ri,no,As,or,Xr,ln,Qr,Ar)),0<Ii&&(Pn(Zr,Fr,jn,ln+4,Qr,Ar),Ss(Ri,no,As,or,Xr,ln+4,Qr,Ar)),Yr.La&&(Vo(Zr,Fr,jn,ln,Qr,Ar),eg(Ri,no,As,or,Xr,ln,Qr,Ar))}}if(rt.ia&&alert("todo:DitherRow"),Be.put!=null){if(Jt=16*nn,nn=16*(nn+1),Kn?(Be.y=rt.sa,Be.O=rt.ta+Kt,Be.f=rt.qa,Be.N=rt.ra+Or,Be.ea=rt.Ha,Be.W=rt.Ia+Or):(Jt-=$t,Be.y=sr,Be.O=Sr,Be.f=Sn,Be.N=zt,Be.ea=pr,Be.W=jr),Gn||(nn-=$t),nn>Be.o&&(nn=Be.o),Be.F=null,Be.J=null,rt.Fa!=null&&0<rt.Fa.length&&Jt<nn&&(Be.J=on(rt,Be,Jt,nn-Jt),Be.F=rt.mb,Be.F==null&&Be.F.length==0)){Tn=Un(rt,3,"Could not decode alpha data.");break t}Jt<Be.j&&($t=Be.j-Jt,Jt=Be.j,t(!(1&$t)),Be.O+=rt.R*$t,Be.N+=rt.B*($t>>1),Be.W+=rt.B*($t>>1),Be.F!=null&&(Be.J+=Be.width*$t)),Jt<nn&&(Be.O+=Be.v,Be.N+=Be.v>>1,Be.W+=Be.v>>1,Be.F!=null&&(Be.J+=Be.v),Be.ka=Jt-Be.j,Be.U=Be.va-Be.v,Be.T=nn-Jt,Tn=Be.put(Be))}St+1!=rt.Ic||Gn||(r(rt.sa,rt.ta-xt,sr,Sr+16*rt.R,xt),r(rt.qa,rt.ra-hn,Sn,zt+8*rt.B,hn),r(rt.Ha,rt.Ia-hn,pr,jr+8*rt.B,hn))}if(!Tn)return Un(Ft,6,"Output aborted.")}return 1}(W,ie)),ie.bc!=null&&ie.bc(ie),ue&=1}return ue?(W.cb=0,ue):0})(u,w)||(h=u.a)}}else h=u.a}h==0&&D.Oa!=null&&D.Oa.fd&&(h=dc(D.ba))}D=h}O=D!=0?null:11>O?U.f.RGBA.eb:U.f.kb.y}else O=null;return O};var jg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(S,z){for(var j="",R=0;R<4;R++)j+=String.fromCharCode(S[z++]);return j}function f(S,z){return S[z+0]|S[z+1]<<8}function g(S,z){return(S[z+0]|S[z+1]<<8|S[z+2]<<16)>>>0}function y(S,z){return(S[z+0]|S[z+1]<<8|S[z+2]<<16|S[z+3]<<24)>>>0}new l;var p=[0],k=[0],_=[],A=new l,x=e,b=function(S,z){var j={},R=0,$=!1,J=0,X=0;if(j.frames=[],!function(P,q){for(var G=0;G<4;G++)if(P[q+G]!="RIFF".charCodeAt(G))return!0;return!1}(S,z)){for(y(S,z+=4),z+=8;z<S.length;){var le=c(S,z),de=y(S,z+=4);z+=4;var Z=de+(1&de);switch(le){case"VP8 ":case"VP8L":j.frames[R]===void 0&&(j.frames[R]={}),(fe=j.frames[R]).src_off=$?X:z-8,fe.src_size=J+de+8,R++,$&&($=!1,J=0,X=0);break;case"VP8X":(fe=j.header={}).feature_flags=S[z];var se=z+4;fe.canvas_width=1+g(S,se),se+=3,fe.canvas_height=1+g(S,se),se+=3;break;case"ALPH":$=!0,J=Z+8,X=z-8;break;case"ANIM":(fe=j.header).bgcolor=y(S,z),se=z+4,fe.loop_count=f(S,se),se+=2;break;case"ANMF":var ve,fe;(fe=j.frames[R]={}).offset_x=2*g(S,z),z+=3,fe.offset_y=2*g(S,z),z+=3,fe.width=1+g(S,z),z+=3,fe.height=1+g(S,z),z+=3,fe.duration=g(S,z),z+=3,ve=S[z++],fe.dispose=1&ve,fe.blend=ve>>1&1}le!="ANMF"&&(z+=Z)}return j}}(x,0);b.response=x,b.rgbaoutput=!0,b.dataurl=!1;var N=b.header?b.header:null,C=b.frames?b.frames:null;if(N){N.loop_counter=N.loop_count,p=[N.canvas_height],k=[N.canvas_width];for(var K=0;K<C.length&&C[K].blend!=0;K++);}var T=C[0],M=A.WebPDecodeRGBA(x,T.src_off,T.src_size,k,p);T.rgba=M,T.imgwidth=k[0],T.imgheight=p[0];for(var I=0;I<k[0]*p[0]*4;I++)_[I]=M[I];return this.width=k,this.height=p,this.data=_,this}(function(e){var t,n,r,i,s,a,o,l,c,f=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(F){G=!!F}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(F){Y=!!F}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(F){isNaN(F)||(Q=F)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(F){isNaN(F)||(ae=F)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(F){var re;typeof F=="number"?re=[F,F,F,F]:((re=new Array(4))[0]=F[0],re[1]=F.length>=2?F[1]:re[0],re[2]=F.length>=3?F[2]:re[0],re[3]=F.length>=4?F[3]:re[1]),c.margin=re}});var te=!1;Object.defineProperty(this,"autoPaging",{get:function(){return te},set:function(F){te=F}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(F){ge=F}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(F){xe=F}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(F){F instanceof f&&(c=F)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(F){c.path=F}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(F){je=F}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(F){var re;re=y(F),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(F){var re=y(F);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(F){["butt","round","square"].indexOf(F)!==-1&&(this.ctx.lineCap=F,this.pdf.setLineCap(F))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(F){isNaN(F)||(this.ctx.lineWidth=F,this.pdf.setLineWidth(F))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(F){["bevel","round","miter"].indexOf(F)!==-1&&(this.ctx.lineJoin=F,this.pdf.setLineJoin(F))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(F){isNaN(F)||(this.ctx.miterLimit=F,this.pdf.setMiterLimit(F))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(F){this.ctx.textBaseline=F}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(F){["right","end","center","left","start"].indexOf(F)!==-1&&(this.ctx.textAlign=F)}});var Ue=null,Te=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(F){Ue=null,Te=null,We=F}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(F){var re;if(this.ctx.font=F,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(F))!==null){var Ie=re[1];re[2];var ze=re[3],we=re[4];re[5];var Xe=re[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(we)[2];we=Math.floor($e==="px"?parseFloat(we)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(we)*this.pdf.getFontSize():parseFloat(we)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(we);var Ye=function(it){var xn,Rt,_t=[],Nt=it.trim();if(Nt==="")return f0;if(Nt in yv)return[yv[Nt]];for(;Nt!=="";){switch(Rt=null,xn=(Nt=wv(Nt)).charAt(0)){case'"':case"'":Rt=NA(Nt.substring(1),xn);break;default:Rt=kA(Nt)}if(Rt===null||(_t.push(Rt[0]),(Nt=wv(Rt[1]))!==""&&Nt.charAt(0)!==","))return f0;Nt=Nt.replace(/^,/,"")}return _t}(Xe);if(this.fontFaces){var et=function(it,xn){var Rt=it.getFontList(),_t=JSON.stringify(Rt);if(Ue===null||Te!==_t){var Nt=function(sn){var lt=[];return Object.keys(sn).forEach(function(_e){sn[_e].forEach(function(ce){var Le=null;switch(ce){case"bold":Le={family:_e,weight:"bold"};break;case"italic":Le={family:_e,style:"italic"};break;case"bolditalic":Le={family:_e,weight:"bold",style:"italic"};break;case"":case"normal":Le={family:_e}}Le!==null&&(Le.ref={name:_e,style:ce},lt.push(Le))})}),lt}(Rt);Ue=function(sn){for(var lt={},_e=0;_e<sn.length;++_e){var ce=h0(sn[_e]),Le=ce.family,De=ce.stretch,ye=ce.style,Ne=ce.weight;lt[Le]=lt[Le]||{},lt[Le][De]=lt[Le][De]||{},lt[Le][De][ye]=lt[Le][De][ye]||{},lt[Le][De][ye][Ne]=ce}return lt}(Nt.concat(xn)),Te=_t}return Ue}(this.pdf,this.fontFaces),Ut=Ye.map(function(it){return{family:it,stretch:"normal",weight:ze,style:Ie}}),Lt=function(it,xn,Rt){for(var _t=(Rt=Rt||{}).defaultFontFamily||"times",Nt=Object.assign({},_A,Rt.genericFontFamilies||{}),sn=null,lt=null,_e=0;_e<xn.length;++_e)if(Nt[(sn=h0(xn[_e])).family]&&(sn.family=Nt[sn.family]),it.hasOwnProperty(sn.family)){lt=it[sn.family];break}if(!(lt=lt||it[_t]))throw new Error("Could not find a font-family for the rule '"+xv(sn)+"' and default family '"+_t+"'.");if(lt=function(ce,Le){if(Le[ce])return Le[ce];var De=U1[ce],ye=De<=U1.normal?-1:1,Ne=vv(Le,Lb,De,ye);if(!Ne)throw new Error("Could not find a matching font-stretch value for "+ce);return Ne}(sn.stretch,lt),lt=function(ce,Le){if(Le[ce])return Le[ce];for(var De=Eb[ce],ye=0;ye<De.length;++ye)if(Le[De[ye]])return Le[De[ye]];throw new Error("Could not find a matching font-style for "+ce)}(sn.style,lt),!(lt=function(ce,Le){if(Le[ce])return Le[ce];if(ce===400&&Le[500])return Le[500];if(ce===500&&Le[400])return Le[400];var De=bA[ce],ye=vv(Le,Cb,De,ce<400?-1:1);if(!ye)throw new Error("Could not find a matching font-weight for value "+ce);return ye}(sn.weight,lt)))throw new Error("Failed to resolve a font for the rule '"+xv(sn)+"'.");return lt}(et,Ut);this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var ft="";(ze==="bold"||parseInt(ze,10)>=700||Ie==="bold")&&(ft="bold"),Ie==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var Ct="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tt=0;tt<Ye.length;tt++){if(this.pdf.internal.getFont(Ye[tt],ft,{noFallback:!0,disableWarning:!0})!==void 0){Ct=Ye[tt];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Ye[tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=Ye[tt],ft="bold";else if(this.pdf.internal.getFont(Ye[tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=Ye[tt],ft="normal";break}}if(Ct===""){for(var pt=0;pt<Ye.length;pt++)if(At[Ye[pt]]){Ct=At[Ye[pt]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(F){this.ctx.globalCompositeOperation=F}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(F){this.ctx.globalAlpha=F}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(F){this.ctx.lineDashOffset=F,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(F){this.ctx.lineDash=F,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(F){this.ctx.ignoreClearRect=!!F}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){C.call(this,"fill",!1)},g.prototype.stroke=function(){C.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw rn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new a(P,q)},g.prototype.closePath=function(){var P=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Zt(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},g.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw rn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new a(G.x,G.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,q,G,Y){if(isNaN(G)||isNaN(Y)||isNaN(P)||isNaN(q))throw rn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(G,Y)),ae=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},g.prototype.bezierCurveTo=function(P,q,G,Y,Q,ae){if(isNaN(Q)||isNaN(ae)||isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y))throw rn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var te=this.ctx.transform.applyToPoint(new a(Q,ae)),ge=this.ctx.transform.applyToPoint(new a(P,q)),xe=this.ctx.transform.applyToPoint(new a(G,Y));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:xe.x,y2:xe.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},g.prototype.arc=function(P,q,G,Y,Q,ae){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y)||isNaN(Q))throw rn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var te=this.ctx.transform.applyToPoint(new a(P,q));P=te.x,q=te.y;var ge=this.ctx.transform.applyToPoint(new a(0,G)),xe=this.ctx.transform.applyToPoint(new a(0,0));G=Math.sqrt(Math.pow(ge.x-xe.x,2)+Math.pow(ge.y-xe.y,2))}Math.abs(Q-Y)>=2*Math.PI&&(Y=0,Q=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:G,startAngle:Y,endAngle:Q,counterclockwise:ae})},g.prototype.arcTo=function(P,q,G,Y,Q){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,q,G,Y){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y))throw rn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+G,q),this.lineTo(P+G,q+Y),this.lineTo(P,q+Y),this.lineTo(P,q),this.lineTo(P+G,q),this.lineTo(P,q)},g.prototype.fillRect=function(P,q,G,Y){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y))throw rn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,G,Y),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},g.prototype.strokeRect=function(P,q,G,Y){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y))throw rn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(P,q,G,Y),this.stroke())},g.prototype.clearRect=function(P,q,G,Y){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y))throw rn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,G,Y))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(P){var q,G,Y,Q;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,G=0,Y=0,Q=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ae!==null)q=parseInt(ae[1]),G=parseInt(ae[2]),Y=parseInt(ae[3]),Q=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(ae[1]),G=parseInt(ae[2]),Y=parseInt(ae[3]),Q=parseFloat(ae[4]);else{if(Q=1,typeof P=="string"&&P.charAt(0)!=="#"){var te=new bb(P);P=te.ok?te.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,G=P.substring(2,3),G+=G,Y=P.substring(3,4),Y+=Y):(q=P.substring(1,3),G=P.substring(3,5),Y=P.substring(5,7)),q=parseInt(q,16),G=parseInt(G,16),Y=parseInt(Y,16)}}return{r:q,g:G,b:Y,a:Q,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,q,G,Y){if(isNaN(q)||isNaN(G)||typeof P!="string")throw rn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var Q=Z(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;R.call(this,{text:P,x:q,y:G,scale:ae,angle:Q,align:this.textAlign,maxWidth:Y})}},g.prototype.strokeText=function(P,q,G,Y){if(isNaN(q)||isNaN(G)||typeof P!="string")throw rn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){Y=isNaN(Y)?void 0:Y;var Q=Z(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;R.call(this,{text:P,x:q,y:G,scale:ae,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:Y})}},g.prototype.measureText=function(P){if(typeof P!="string")throw rn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,G=this.pdf.internal.scaleFactor,Y=q.internal.getFontSize(),Q=q.getStringUnitWidth(P)*Y/q.internal.scaleFactor;return new function(ae){var te=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this}({width:Q*=Math.round(96*G/72*1e4)/1e4})},g.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw rn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},g.prototype.rotate=function(P){if(isNaN(P))throw rn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},g.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw rn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(G)},g.prototype.transform=function(P,q,G,Y,Q,ae){if(isNaN(P)||isNaN(q)||isNaN(G)||isNaN(Y)||isNaN(Q)||isNaN(ae))throw rn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var te=new l(P,q,G,Y,Q,ae);this.ctx.transform=this.ctx.transform.multiply(te)},g.prototype.setTransform=function(P,q,G,Y,Q,ae){P=isNaN(P)?1:P,q=isNaN(q)?0:q,G=isNaN(G)?0:G,Y=isNaN(Y)?1:Y,Q=isNaN(Q)?0:Q,ae=isNaN(ae)?0:ae,this.ctx.transform=new l(P,q,G,Y,Q,ae)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,q,G,Y,Q,ae,te,ge,xe){var je=this.pdf.getImageProperties(P),Ue=1,Te=1,We=1,F=1;Y!==void 0&&ge!==void 0&&(We=ge/Y,F=xe/Q,Ue=je.width/Y*ge/Y,Te=je.height/Q*xe/Q),ae===void 0&&(ae=q,te=G,q=0,G=0),Y!==void 0&&ge===void 0&&(ge=Y,xe=Q),Y===void 0&&ge===void 0&&(ge=je.width,xe=je.height);var re=this.ctx.transform.decompose(),Ie=Z(re.rotate.shx),ze=new l,we=(ze=(ze=(ze=ze.multiply(re.translate)).multiply(re.skew)).multiply(re.scale)).applyToRectangle(new o(ae-q*We,te-G*F,Y*Ue,Q*Te));if(this.autoPaging){for(var Xe,$e=A.call(this,we),Ye=[],et=0;et<$e.length;et+=1)Ye.indexOf($e[et])===-1&&Ye.push($e[et]);N(Ye);for(var Ut=Ye[0],Lt=Ye[Ye.length-1],ft=Ut;ft<Lt+1;ft++){this.pdf.setPage(ft);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=ft===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=ft===1?0:tt+(ft-2)*pt;if(this.ctx.clip_path.length!==0){var xn=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Xe,this.posX+this.margin[3],-it+At+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=xn}var Rt=JSON.parse(JSON.stringify(we));Rt=b([Rt],this.posX+this.margin[3],-it+At+this.ctx.prevPageLastElemOffset)[0];var _t=(ft>Ut||ft<Lt)&&_.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,pt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,Ie),_t&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",we.x,we.y,we.w,we.h,null,null,Ie)};var A=function(P,q,G){var Y=[];q=q||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Y.push(Math.floor((P.y+Q)/G)+1);break;case"arc":Y.push(Math.floor((P.y+Q-P.radius)/G)+1),Y.push(Math.floor((P.y+Q+P.radius)/G)+1);break;case"qct":var ae=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Y.push(Math.floor((ae.y+Q)/G)+1),Y.push(Math.floor((ae.y+ae.h+Q)/G)+1);break;case"bct":var te=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Y.push(Math.floor((te.y+Q)/G)+1),Y.push(Math.floor((te.y+te.h+Q)/G)+1);break;case"rect":Y.push(Math.floor((P.y+Q)/G)+1),Y.push(Math.floor((P.y+P.h+Q)/G)+1)}for(var ge=0;ge<Y.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ge];)x.call(this);return Y},x=function(){var P=this.fillStyle,q=this.strokeStyle,G=this.font,Y=this.lineCap,Q=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=G,this.lineCap=Y,this.lineWidth=Q,this.lineJoin=ae},b=function(P,q,G){for(var Y=0;Y<P.length;Y++)switch(P[Y].type){case"bct":P[Y].x2+=q,P[Y].y2+=G;case"qct":P[Y].x1+=q,P[Y].y1+=G;default:P[Y].x+=q,P[Y].y+=G}return P},N=function(P){return P.sort(function(q,G){return q-G})},C=function(P,q){var G=this.fillStyle,Y=this.strokeStyle,Q=this.lineCap,ae=this.lineWidth,te=Math.abs(ae*this.ctx.transform.scaleX),ge=this.lineJoin;if(this.autoPaging){for(var xe,je,Ue=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),We=[],F=0;F<Te.length;F++)if(Te[F].x!==void 0)for(var re=A.call(this,Te[F]),Ie=0;Ie<re.length;Ie+=1)We.indexOf(re[Ie])===-1&&We.push(re[Ie]);for(var ze=0;ze<We.length;ze++)for(;this.pdf.internal.getNumberOfPages()<We[ze];)x.call(this);N(We);for(var we=We[0],Xe=We[We.length-1],$e=we;$e<Xe+1;$e++){this.pdf.setPage($e),this.fillStyle=G,this.strokeStyle=Y,this.lineCap=Q,this.lineWidth=te,this.lineJoin=ge;var Ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=$e===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=$e===1?0:Ut+($e-2)*Lt;if(this.ctx.clip_path.length!==0){var Ct=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(xe,this.posX+this.margin[3],-ft+et+this.ctx.prevPageLastElemOffset),K.call(this,P,!0),this.path=Ct}if(je=JSON.parse(JSON.stringify(Ue)),this.path=b(je,this.posX+this.margin[3],-ft+et+this.ctx.prevPageLastElemOffset),q===!1||$e===0){var At=($e>we||$e<Xe)&&_.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,Lt,null).clip().discardPath()),K.call(this,P,q),At&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}this.path=Ue}else this.lineWidth=te,K.call(this,P,q),this.lineWidth=ae},K=function(P,q){if((P!=="stroke"||q||!k.call(this))&&(P==="stroke"||q||!p.call(this))){for(var G,Y,Q=[],ae=this.path,te=0;te<ae.length;te++){var ge=ae[te];switch(ge.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:ge,deltas:[],abs:[]});break;case"lt":var xe=Q.length;if(ae[te-1]&&!isNaN(ae[te-1].x)&&(G=[ge.x-ae[te-1].x,ge.y-ae[te-1].y],xe>0)){for(;xe>=0;xe--)if(Q[xe-1].close!==!0&&Q[xe-1].begin!==!0){Q[xe-1].deltas.push(G),Q[xe-1].abs.push(ge);break}}break;case"bct":G=[ge.x1-ae[te-1].x,ge.y1-ae[te-1].y,ge.x2-ae[te-1].x,ge.y2-ae[te-1].y,ge.x-ae[te-1].x,ge.y-ae[te-1].y],Q[Q.length-1].deltas.push(G);break;case"qct":var je=ae[te-1].x+2/3*(ge.x1-ae[te-1].x),Ue=ae[te-1].y+2/3*(ge.y1-ae[te-1].y),Te=ge.x+2/3*(ge.x1-ge.x),We=ge.y+2/3*(ge.y1-ge.y),F=ge.x,re=ge.y;G=[je-ae[te-1].x,Ue-ae[te-1].y,Te-ae[te-1].x,We-ae[te-1].y,F-ae[te-1].x,re-ae[te-1].y],Q[Q.length-1].deltas.push(G);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(ge)}}Y=q?null:P==="stroke"?"stroke":"fill";for(var Ie=!1,ze=0;ze<Q.length;ze++)if(Q[ze].arc)for(var we=Q[ze].abs,Xe=0;Xe<we.length;Xe++){var $e=we[Xe];$e.type==="arc"?I.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,q,!Ie):$.call(this,$e.x,$e.y),Ie=!0}else if(Q[ze].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(Q[ze].begin!==!0){var Ye=Q[ze].start.x,et=Q[ze].start.y;J.call(this,Q[ze].deltas,Ye,et),Ie=!0}Y&&S.call(this,Y),q&&z.call(this)}},T=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-G;case"top":return P+q-G;case"hanging":return P+q-2*G;case"middle":return P+q/2-G;default:return P}},M=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,G){this.colorStops.push([q,G])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(P,q,G,Y,Q,ae,te,ge,xe){for(var je=le.call(this,G,Y,Q,ae),Ue=0;Ue<je.length;Ue++){var Te=je[Ue];Ue===0&&(xe?j.call(this,Te.x1+P,Te.y1+q):$.call(this,Te.x1+P,Te.y1+q)),X.call(this,P,q,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}ge?z.call(this):S.call(this,te)},S=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(P,q){this.pdf.internal.out(n(P)+" "+r(q)+" m")},R=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var G,Y,Q,ae=this.pdf.getTextDimensions(P.text),te=T.call(this,P.y),ge=M.call(this,te)-ae.h,xe=this.ctx.transform.applyToPoint(new a(P.x,te));if(this.autoPaging){var je=this.ctx.transform.decompose(),Ue=new l;Ue=(Ue=(Ue=Ue.multiply(je.translate)).multiply(je.skew)).multiply(je.scale);for(var Te=this.ctx.transform.applyToRectangle(new o(P.x,te,ae.w,ae.h)),We=Ue.applyToRectangle(new o(P.x,ge,ae.w,ae.h)),F=A.call(this,We),re=[],Ie=0;Ie<F.length;Ie+=1)re.indexOf(F[Ie])===-1&&re.push(F[Ie]);N(re);for(var ze=re[0],we=re[re.length-1],Xe=ze;Xe<we+1;Xe++){this.pdf.setPage(Xe);var $e=Xe===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],Ut=et-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],ft=Lt-this.margin[3],Ct=Xe===1?0:Ye+(Xe-2)*Ut;if(this.ctx.clip_path.length!==0){var At=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-1*Ct+$e),K.call(this,"fill",!0),this.path=At}var tt=b([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Ct+$e+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*P.scale),Q=this.lineWidth,this.lineWidth=Q*P.scale);var pt=this.autoPaging!=="text";if(pt||tt.y+tt.h<=et){if(pt||tt.y>=$e&&tt.x<=Lt){var it=pt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Lt-tt.x)[0],xn=b([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-Ct+$e+this.ctx.prevPageLastElemOffset)[0],Rt=pt&&(Xe>ze||Xe<we)&&_.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ut,null).clip().discardPath()),this.pdf.text(it,xn.x,xn.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else tt.y<et&&(this.ctx.prevPageLastElemOffset+=et-tt.y);P.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=Q)}}else P.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*P.scale),Q=this.lineWidth,this.lineWidth=Q*P.scale),this.pdf.text(P.text,xe.x+this.posX,xe.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=Q)},$=function(P,q,G,Y){G=G||0,Y=Y||0,this.pdf.internal.out(n(P+G)+" "+r(q+Y)+" l")},J=function(P,q,G){return this.pdf.lines(P,q,G,null,null)},X=function(P,q,G,Y,Q,ae,te,ge){this.pdf.internal.out([t(i(G+P)),t(s(Y+q)),t(i(Q+P)),t(s(ae+q)),t(i(te+P)),t(s(ge+q)),"c"].join(" "))},le=function(P,q,G,Y){for(var Q=2*Math.PI,ae=Math.PI/2;q>G;)q-=Q;var te=Math.abs(G-q);te<Q&&Y&&(te=Q-te);for(var ge=[],xe=Y?-1:1,je=q;te>1e-5;){var Ue=je+xe*Math.min(te,ae);ge.push(de.call(this,P,je,Ue)),te-=Math.abs(Ue-je),je=Ue}return ge},de=function(P,q,G){var Y=(G-q)/2,Q=P*Math.cos(Y),ae=P*Math.sin(Y),te=Q,ge=-ae,xe=te*te+ge*ge,je=xe+te*Q+ge*ae,Ue=4/3*(Math.sqrt(2*xe*je)-je)/(te*ae-ge*Q),Te=te-Ue*ge,We=ge+Ue*te,F=Te,re=-We,Ie=Y+q,ze=Math.cos(Ie),we=Math.sin(Ie);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:Te*ze-We*we,y2:Te*we+We*ze,x3:F*ze-re*we,y3:F*we+re*ze,x4:P*Math.cos(G),y4:P*Math.sin(G)}},Z=function(P){return 180*P/Math.PI},se=function(P,q,G,Y,Q,ae){var te=P+.5*(G-P),ge=q+.5*(Y-q),xe=Q+.5*(G-Q),je=ae+.5*(Y-ae),Ue=Math.min(P,Q,te,xe),Te=Math.max(P,Q,te,xe),We=Math.min(q,ae,ge,je),F=Math.max(q,ae,ge,je);return new o(Ue,We,Te-Ue,F-We)},ve=function(P,q,G,Y,Q,ae,te,ge){var xe,je,Ue,Te,We,F,re,Ie,ze,we,Xe,$e,Ye,et,Ut=G-P,Lt=Y-q,ft=Q-G,Ct=ae-Y,At=te-Q,tt=ge-ae;for(je=0;je<41;je++)ze=(re=(Ue=P+(xe=je/40)*Ut)+xe*((We=G+xe*ft)-Ue))+xe*(We+xe*(Q+xe*At-We)-re),we=(Ie=(Te=q+xe*Lt)+xe*((F=Y+xe*Ct)-Te))+xe*(F+xe*(ae+xe*tt-F)-Ie),je==0?(Xe=ze,$e=we,Ye=ze,et=we):(Xe=Math.min(Xe,ze),$e=Math.min($e,we),Ye=Math.max(Ye,ze),et=Math.max(et,we));return new o(Math.round(Xe),Math.round($e),Math.round(Ye-Xe),Math.round(et-$e))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,G=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(ot.API),function(e){var t=function(a){var o,l,c,f,g,y,p,k,_,A;for(l=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(g=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(y=(g=((g=((g=((g=(g-(A=g%85))/85)-(_=g%85))/85)-(k=g%85))/85)-(p=g%85))/85)%85,l.push(y+33,p+33,k+33,_+33,A+33)):l.push(122);return function(x,b){for(var N=b;N>0;N--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var o,l,c,f,g,y=String,p="length",k=255,_="charCodeAt",A="slice",x="replace";for(a[A](-2),a=a[A](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],f=0,g=(a+=o="uuuuu"[A](a[p]%5||5))[p];g>f;f+=5)l=52200625*(a[_](f)-33)+614125*(a[_](f+1)-33)+7225*(a[_](f+2)-33)+85*(a[_](f+3)-33)+(a[_](f+4)-33),c.push(k&l>>24,k&l>>16,k&l>>8,k&l);return function(b,N){for(var C=N;C>0;C--)b.pop()}(c,o[p]),y.fromCharCode.apply(y,c)},r=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=j1(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(a,o){var l=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(ot.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,f){var g=new XMLHttpRequest,y=0,p=function(k){var _=k.length,A=[],x=String.fromCharCode;for(y=0;y<_;y+=1)A.push(x(255&k.charCodeAt(y)));return A.join("")};if(g.open("GET",l,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?f(p(this.responseText)):f(void 0)}),g.send(null),c&&g.status===200)return p(g.responseText)}(i,s,a)}catch{}return o}(t,n,r)},e.loadImageFile=e.loadFile}(ot.API),function(e){function t(){return(dt.html2canvas?Promise.resolve(dt.html2canvas):Pa(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(dt.DOMPurify?Promise.resolve(dt.DOMPurify):Pa(()=>import("./purify.es-C5KSVp3G.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Zt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function o(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)c!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(o(g,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return(f=f.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var p=0;p<f.length;++p){var k=f[p],_=k.src.find(function(A){return A.format==="truetype"});_&&c.addFont(_.url,k.ref.name,k.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,f){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,f){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(f,g){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,f),y}).then(f,g).then(function(y){return c.updateProgress(1),y})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),l&&(l=l.bind(f));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:a.convert(Object.assign({},f),Promise.prototype),y=c.call(g,o,l);return a.convert(y,f.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ot.getPageSize=function(o,l,c){if(Zt(o)==="object"){var f=o;o=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var k,_=0,A=0;if(p.hasOwnProperty(y))_=p[y][1]/g,A=p[y][0]/g;else try{_=c[1],A=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",A>_&&(k=A,A=_,_=k);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>A&&(k=A,A=_,_=k)}return{width:A,height:_,unit:l,k:g,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(h0):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(ot.API),ot.API.addJS=function(e){return _v=e,this.internal.events.subscribe("postPutResources",function(){eh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_v+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){eh!==void 0&&bv!==void 0&&this.internal.out("/Names <</JavaScript "+eh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var g=n.internal.newObject();f.push(g);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ot.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,o){var l,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var y,p=256*g.charCodeAt(4)+g.charCodeAt(5),k=g.length,_={width:0,height:0,numcomponents:1},A=4;A<k;A+=2){if(A+=p,t.indexOf(g.charCodeAt(A+1))!==-1){y=256*g.charCodeAt(A+5)+g.charCodeAt(A+6),_={width:256*g.charCodeAt(A+7)+g.charCodeAt(A+8),height:y,numcomponents:g.charCodeAt(A+9)};break}p=256*g.charCodeAt(A+2)+g.charCodeAt(A+3)}return _}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}}(ot.API),ot.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=oA(e,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,f=s.depth;i=c&&l===1?function(I){for(var S=I.width,z=I.height,j=I.data,R=I.palette,$=I.depth,J=!1,X=[],le=[],de=void 0,Z=!1,se=0,ve=0;ve<R.length;ve++){var fe=g5(R[ve],4),P=fe[0],q=fe[1],G=fe[2],Y=fe[3];X.push(P,q,G),Y!=null&&(Y===0?(se++,le.length<1&&le.push(ve)):Y<255&&(Z=!0))}if(Z||se>1){J=!0,le=void 0;var Q=S*z;de=new Uint8Array(Q);for(var ae=new DataView(j.buffer),te=0;te<Q;te++){var ge=p0(ae,te,$),xe=g5(R[ge],4)[3];de[te]=xe}}else se===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:j,alphaBytes:de,needSMask:J,palette:X,mask:le}}(s):l===2||l===4?function(I){for(var S=I.data,z=I.width,j=I.height,R=I.channels,$=I.depth,J=R===2?"DeviceGray":"DeviceRGB",X=R-1,le=z*j,de=X,Z=le*de,se=1*le,ve=Math.ceil(Z*$/8),fe=Math.ceil(se*$/8),P=new Uint8Array(ve),q=new Uint8Array(fe),G=new DataView(S.buffer),Y=new DataView(P.buffer),Q=new DataView(q.buffer),ae=!1,te=0;te<le;te++){for(var ge=te*R,xe=0;xe<de;xe++)Pv(Y,p0(G,ge+xe,$),te*de+xe,$);var je=p0(G,ge+de,$);je<(1<<$)-1&&(ae=!0),Pv(Q,je,1*te,$)}return{colorSpace:J,colorsPerPixel:X,sMaskBitsPerComponent:ae?$:void 0,colorBytes:P,alphaBytes:q,needSMask:ae}}(s):function(I){var S=I.data,z=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?function(j){for(var R=j.length,$=new Uint8Array(2*R),J=new DataView($.buffer,$.byteOffset,$.byteLength),X=0;X<R;X++)J.setUint16(2*X,j[X],!1);return $}(S):S,needSMask:!1}}(s);var g,y,p,k=i,_=k.colorSpace,A=k.colorsPerPixel,x=k.sMaskBitsPerComponent,b=k.colorBytes,N=k.alphaBytes,C=k.needSMask,K=k.palette,T=k.mask,M=null;return r!==ot.API.image_compression.NONE&&typeof j1=="function"?(M=function(I){var S;switch(I){case ot.API.image_compression.FAST:S=11;break;case ot.API.image_compression.MEDIUM:S=13;break;case ot.API.image_compression.SLOW:S=14;break;default:S=12}return S}(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(M," /Colors ").concat(A," /BitsPerComponent ").concat(f," /Columns ").concat(a),e=jv(b,Math.ceil(a*A*f/8),A,f,r),C&&(p=jv(N,Math.ceil(a*x/8),1,x,r))):(g=void 0,y=void 0,e=b,C&&(p=N)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:e,index:t,filter:g,decodeParameters:y,transparency:T,palette:K,sMask:p,predictor:M,width:a,height:o,bitsPerComponent:f,sMaskBitsPerComponent:x,colorSpace:_}}},function(e){e.processGIF89A=function(t,n,r,i){var s=new EA(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},f=new m0(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)},e.processGIF87A=e.processGIF89A}(ot.API),Fi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){rn.log("bit decode error:"+n)}},Fi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Fi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Fi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Fi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=a,this.data[f+3]=c}this.pos+=e}},Fi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=255}this.pos+=e}},Fi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Fi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Fi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Fi(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new m0(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(ot.API),Iv.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Iv(t),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new m0(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(ot.API),ot.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var f=r[c],g=r[c+1],y=r[c+2],p=r[c+3];s[o++]=f,s[o++]=g,s[o++]=y,a[l++]=p}var k=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:k,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ot.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rl=ot.API,th=rl.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,g=t.doKerning!==!1,y=0,p=e.length,k=0,_=o[0]||l,A=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?A.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(y=g&&Zt(c[r])==="object"&&!isNaN(parseInt(c[r][k],10))?c[r][k]/f:0,A.push((o[r]||_)/l+y)),k=r;return A},Nv=rl.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return rl.processArabic&&(e=rl.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:th.apply(this,arguments).reduce(function(s,a){return s+a},0)},kv=function(e,t,n,r){for(var i=[],s=0,a=e.length,o=0;s!==a&&o+t[s]<n;)o+=t[s],s++;i.push(e.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>r&&(i.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&i.push(e.slice(l,s)),i},Sv=function(e,t,n){n||(n={});var r,i,s,a,o,l,c,f=[],g=[f],y=n.textIndent||0,p=0,k=0,_=e.split(" "),A=th.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),b=[];_.map(function(C){(C=C.split(/\s*\n/)).length>1?b=b.concat(C.map(function(K,T){return(T&&K.length?`
`:"")+K})):b.push(C[0])}),_=b,l=Nv.apply(this,[x,n])}for(s=0,a=_.length;s<a;s++){var N=0;if(r=_[s],l&&r[0]==`
`&&(r=r.substr(1),N=1),y+p+(k=(i=th.apply(this,[r,n])).reduce(function(C,K){return C+K},0))>t||N){if(k>t){for(o=kv.apply(this,[r,i,t-(y+p),t]),f.push(o.shift()),f=[o.pop()];o.length;)g.push([o.shift()]);k=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(C,K){return C+K},0)}else f=[r];g.push(f),y=k+l,p=A}else f.push(r),y+=p+k,p=A}return c=l?function(C,K){return(K?x:"")+C.join(" ")}:function(C){return C.join(" ")},g.map(c)},rl.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(Sv.apply(this,[r[o],a,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=t[s],i[t[s]]=n[s];var a=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var p,k,_,A,x=["{"];for(var b in y){if(p=y[b],isNaN(parseInt(b,10))?k="'"+b+"'":(b=parseInt(b,10),k=(k=a(b).slice(2)).slice(0,-1)+i[k.slice(-1)]),typeof p=="number")p<0?(_=a(p).slice(3),A="-"):(_=a(p).slice(2),A=""),_=A+_.slice(0,-1)+i[_.slice(-1)];else{if(Zt(p)!=="object")throw new Error("Don't know what to do with value type "+Zt(p)+".");_=o(p)}x.push(k+_)}return x.push("}"),x.join("")},l=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,k,_,A,x={},b=1,N=x,C=[],K="",T="",M=y.length-1,I=1;I<M;I+=1)(A=y[I])=="'"?p?(_=p.join(""),p=void 0):p=[]:p?p.push(A):A=="{"?(C.push([N,_]),N={},_=void 0):A=="}"?((k=C.pop())[0][k[1]]=N,_=void 0,N=k[0]):A=="-"?b=-1:_===void 0?r.hasOwnProperty(A)?(K+=r[A],_=parseInt(K,16)*b,b=1,K=""):K+=A:r.hasOwnProperty(A)?(T+=r[A],N[_]=parseInt(T,16)*b,b=1,_=void 0,T=""):T+=A;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var p=y.font,k=g.Unicode[p.postScriptName];k&&(p.metadata.Unicode={},p.metadata.Unicode.widths=k.widths,p.metadata.Unicode.kerning=k.kerning);var _=f.Unicode[p.postScriptName];_&&(p.metadata.Unicode.encoding=_,p.encoding=_.codePages[0])}])}(ot.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(vh(o)),a.metadata=e.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(ot),ot.API.addSvgAsImage=function(e,t,n,r,i,s,a,o){if(isNaN(t)||isNaN(n))throw rn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw rn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(dt.canvg?Promise.resolve(dt.canvg):Pa(()=>import("./index.es-wP3RTugr.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),t,n,r,i,a,o)})},ot.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},ot.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,f=0,g=0;function y(k,_){var A,x=!1;for(A=0;A<k.length;A+=1)k[A]===_&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(g=0;g<p;g+=1)n[o[g]].value=n[o[g]].defaultValue,n[o[g]].explicitSet=!1}if(Zt(e)==="object"){for(i in e)if(s=e[i],y(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,_=[];for(k in n)n[k].explicitSet===!0&&(n[k].type==="name"?_.push("/"+k+" /"+n[k].value):_.push("/"+k+" "+n[k].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(ot.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],g=0,y=s.length;g<y;++g){if(o=a.metadata.characterToGlyph(s.charCodeAt(g)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(g),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(c[4-o.length],o)}return f.join("")},r=function(s){var a,o,l,c,f,g,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(o=Object.keys(s).sort(function(p,k){return p-k})).length;g<y;g++)a=o[g],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var g=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",k=0;k<y.length;k++)p+=String.fromCharCode(y[k]);var _=c();f({data:p,addLength1:!0,objectId:_}),l("endobj");var A=c();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ol(o.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ol(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+e.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+A+" 0 R"),l("/BaseFont /"+ol(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var g=o.metadata.rawData,y="",p=0;p<g.length;p++)y+=String.fromCharCode(g[p]);var k=c();f({data:y,addLength1:!0,objectId:k}),l("endobj");var _=c();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var A=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+k+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+ol(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+ol(o.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,f=s.options||{},g=s.mutex||{},y=g.pdfEscape,p=g.activeFontKey,k=g.fonts,_=p,A="",x=0,b="",N=k[_].encoding;if(k[_].encoding!=="Identity-H")return{text:o,x:l,y:c,options:f,mutex:g};for(b=o,_=p,Array.isArray(o)&&(b=o[0]),x=0;x<b.length;x+=1)k[_].metadata.hasOwnProperty("cmap")&&(a=k[_].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),a||b[x].charCodeAt(0)<256&&k[_].metadata.hasOwnProperty("Unicode")?A+=b[x]:A+="";var C="";return parseInt(_.slice(1))<14||N==="WinAnsiEncoding"?C=y(A,_).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=n(A,k[_])),g.isHex=!0,{text:C,x:l,y:c,options:f,mutex:g}};t.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(ot),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ot.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,o,l,c,f,g=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,N=0;this.__bidiEngine__={};var C=function(j){var R=j.charCodeAt(),$=R>>8,J=_[$];return J!==void 0?g[256*J+(255&R)]:$===252||$===253?"AL":x.test($)?"L":$===8?"R":"N"},K=function(j){for(var R,$=0;$<j.length;$++){if((R=C(j.charAt($)))==="L")return!1;if(R==="R")return!0}return!1},T=function(j,R,$,J){var X,le,de,Z,se=R[J];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(se="AN");break;case"AL":b=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":J<1||J+1>=R.length||(X=$[J-1])!=="EN"&&X!=="AN"||(le=R[J+1])!=="EN"&&le!=="AN"?se="N":b&&(le="AN"),se=le===X?le:"N";break;case"ES":se=(X=J>0?$[J-1]:"B")==="EN"&&J+1<R.length&&R[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&$[J-1]==="EN"){se="EN";break}if(b){se="N";break}for(de=J+1,Z=R.length;de<Z&&R[de]==="ET";)de++;se=de<Z&&R[de]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(Z=R.length,de=J+1;de<Z&&R[de]==="NSM";)de++;if(de<Z){var ve=j[J],fe=ve>=1425&&ve<=2303||ve===64286;if(X=R[de],fe&&(X==="R"||X==="AL")){se="R";break}}}se=J<1||(X=R[J-1])==="B"?"N":$[J-1];break;case"B":b=!1,i=!0,se=N;break;case"S":s=!0,se="N"}return se},M=function(j,R,$){var J=j.split("");return $&&I(J,$,{hiLevel:N}),J.reverse(),R&&R.reverse(),J.join("")},I=function(j,R,$){var J,X,le,de,Z,se=-1,ve=j.length,fe=0,P=[],q=N?p:y,G=[];for(b=!1,i=!1,s=!1,X=0;X<ve;X++)G[X]=C(j[X]);for(le=0;le<ve;le++){if(Z=fe,P[le]=T(j,G,P,le),J=240&(fe=q[Z][k[P[le]]]),fe&=15,R[le]=de=q[fe][5],J>0)if(J===16){for(X=se;X<le;X++)R[X]=1;se=-1}else se=-1;if(q[fe][6])se===-1&&(se=le);else if(se>-1){for(X=se;X<le;X++)R[X]=de;se=-1}G[le]==="B"&&(R[le]=0),$.hiLevel|=de}s&&function(Y,Q,ae){for(var te=0;te<ae;te++)if(Y[te]==="S"){Q[te]=N;for(var ge=te-1;ge>=0&&Y[ge]==="WS";ge--)Q[ge]=N}}(G,R,ve)},S=function(j,R,$,J,X){if(!(X.hiLevel<j)){if(j===1&&N===1&&!i)return R.reverse(),void($&&$.reverse());for(var le,de,Z,se,ve=R.length,fe=0;fe<ve;){if(J[fe]>=j){for(Z=fe+1;Z<ve&&J[Z]>=j;)Z++;for(se=fe,de=Z-1;se<de;se++,de--)le=R[se],R[se]=R[de],R[de]=le,$&&(le=$[se],$[se]=$[de],$[de]=le);fe=Z}fe++}}},z=function(j,R,$){var J=j.split(""),X={hiLevel:N};return $||($=[]),I(J,$,X),function(le,de,Z){if(Z.hiLevel!==0&&f)for(var se,ve=0;ve<le.length;ve++)de[ve]===1&&(se=A.indexOf(le[ve]))>=0&&(le[ve]=A[se+1])}(J,$,X),S(2,J,R,$,X),S(1,J,R,$,X),J.join("")};return this.__bidiEngine__.doBidiReorder=function(j,R,$){if(function(X,le){if(le)for(var de=0;de<X.length;de++)le[de]=de;o===void 0&&(o=K(X)),c===void 0&&(c=K(X))}(j,R),a||!l||c)if(a&&l&&o^c)N=o?1:0,j=M(j,R,$);else if(!a&&l&&c)N=o?1:0,j=z(j,R,$),j=M(j,R);else if(!a||o||l||c){if(a&&!l&&o^c)j=M(j,R),o?(N=0,j=z(j,R,$)):(N=1,j=z(j,R,$),j=M(j,R));else if(a&&o&&!l&&c)N=1,j=z(j,R,$),j=M(j,R);else if(!a&&!l&&o^c){var J=f;o?(N=1,j=z(j,R,$),N=0,f=!1,j=z(j,R,$),f=J):(N=0,j=z(j,R,$),j=M(j,R),N=1,f=!1,j=z(j,R,$),f=J,j=M(j,R))}}else N=0,j=z(j,R,$);else N=o?1:0,j=z(j,R,$);return j},this.__bidiEngine__.setOptions=function(j){j&&(a=j.isInputVisual,l=j.isOutputVisual,o=j.isInputRtl,c=j.isOutputRtl,f=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ot),ot.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ma(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new $A(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new LA(this.contents),this.head=new PA(this),this.name=new FA(this),this.cmap=new Tb(this),this.toUnicode={},this.hhea=new TA(this),this.maxp=new DA(this),this.hmtx=new MA(this),this.post=new RA(this),this.os2=new IA(this),this.loca=new qA(this),this.glyf=new UA(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,o;for(a=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Gi,Ma=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,o,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),LA=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,o,l,c,f,g,y,p,k,_;for(_ in p=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(p)/l),a=Math.floor(g/l),f=16*p-g,(i=new Ma).writeInt(this.scalarType),i.writeShort(p),i.writeShort(g),i.writeShort(a),i.writeShort(f),s=16*p,c=i.pos+s,o=null,k=[],n)for(y=n[_],i.writeString(_),i.writeInt(e(y)),i.writeInt(c),i.writeInt(y.length),k=k.concat(y),_==="head"&&(o=c),c+=y.length;c%4;)k.push(0),c++;return i.write(k),r=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=Ib.call(n);n.length%4;)n.push(0);for(s=new Ma(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),CA={}.hasOwnProperty,fs=function(e,t){for(var n in t)CA.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Gi=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var PA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ma).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Rv=function(){function e(t,n){var r,i,s,a,o,l,c,f,g,y,p,k,_,A,x,b,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),y=p/2,t.pos+=6,s=function(){var C,K;for(K=[],l=C=0;0<=y?C<y:C>y;l=0<=y?++C:--C)K.push(t.readUInt16());return K}(),t.pos+=2,_=function(){var C,K;for(K=[],l=C=0;0<=y?C<y:C>y;l=0<=y?++C:--C)K.push(t.readUInt16());return K}(),c=function(){var C,K;for(K=[],l=C=0;0<=y?C<y:C>y;l=0<=y?++C:--C)K.push(t.readUInt16());return K}(),f=function(){var C,K;for(K=[],l=C=0;0<=y?C<y:C>y;l=0<=y?++C:--C)K.push(t.readUInt16());return K}(),i=(this.length-t.pos+this.offset)/2,o=function(){var C,K;for(K=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)K.push(t.readUInt16());return K}(),l=x=0,N=s.length;x<N;l=++x)for(A=s[l],r=b=k=_[l];k<=A?b<=A:b>=A;r=k<=A?++b:--b)f[l]===0?a=r+c[l]:(a=o[f[l]/2+(r-k)-(y-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}t.pos=g}return e.encode=function(t,n){var r,i,s,a,o,l,c,f,g,y,p,k,_,A,x,b,N,C,K,T,M,I,S,z,j,R,$,J,X,le,de,Z,se,ve,fe,P,q,G,Y,Q,ae,te,ge,xe,je,Ue;switch(J=new Ma,a=Object.keys(t).sort(function(Te,We){return Te-We}),n){case"macroman":for(_=0,A=function(){var Te=[];for(k=0;k<256;++k)Te.push(0);return Te}(),b={0:0},s={},X=0,se=a.length;X<se;X++)b[ge=t[i=a[X]]]==null&&(b[ge]=++_),s[i]={old:t[i],new:b[t[i]]},A[i]=b[t[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(A),{charMap:s,subtable:J.data,maxGlyphID:_+1};case"unicode":for(R=[],g=[],N=0,b={},r={},x=c=null,le=0,ve=a.length;le<ve;le++)b[K=t[i=a[le]]]==null&&(b[K]=++N),r[i]={old:K,new:b[K]},o=b[K]-i,x!=null&&o===c||(x&&g.push(x),R.push(i),c=o),x=i;for(x&&g.push(x),g.push(65535),R.push(65535),z=2*(S=R.length),I=2*Math.pow(Math.log(S)/Math.LN2,2),y=Math.log(I/2)/Math.LN2,M=2*S-I,l=[],T=[],p=[],k=de=0,fe=R.length;de<fe;k=++de){if(j=R[k],f=g[k],j===65535){l.push(0),T.push(0);break}if(j-($=r[j].new)>=32768)for(l.push(0),T.push(2*(p.length+S-k)),i=Z=j;j<=f?Z<=f:Z>=f;i=j<=f?++Z:--Z)p.push(r[i].new);else l.push($-j),T.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*S+2*p.length),J.writeUInt16(0),J.writeUInt16(z),J.writeUInt16(I),J.writeUInt16(y),J.writeUInt16(M),ae=0,P=g.length;ae<P;ae++)i=g[ae],J.writeUInt16(i);for(J.writeUInt16(0),te=0,q=R.length;te<q;te++)i=R[te],J.writeUInt16(i);for(xe=0,G=l.length;xe<G;xe++)o=l[xe],J.writeUInt16(o);for(je=0,Y=T.length;je<Y;je++)C=T[je],J.writeUInt16(C);for(Ue=0,Q=p.length;Ue<Q;Ue++)_=p[Ue],J.writeUInt16(_);return{charMap:r,subtable:J.data,maxGlyphID:N+1}}},e}(),Tb=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new Rv(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,i;return n==null&&(n="macroman"),r=Rv.encode(t,n),(i=new Ma).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),TA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),IA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),RA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(t.readUInt32());return l}).call(this)}},e}(),OA=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},FA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,i,s,a,o,l,c,f,g,y;for(t.pos=this.offset,t.readShort(),n=t.readShort(),o=t.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(l={},s=f=0,g=r.length;f<g;s=++f)i=r[s],t.pos=i.offset,c=t.readString(i.length),a=new OA(c,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),DA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),MA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,i,s,a,o,l;for(t.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,f;for(f=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)f.push(t.readInt16());return f}(),this.widths=(function(){var c,f,g,y;for(y=[],c=0,f=(g=this.metrics).length;c<f;c++)s=g[c],y.push(s.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],n=a=0;0<=i?a<i:a>i;n=0<=i?++a:--a)l.push(this.widths.push(r));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Ib=[].slice,UA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,i,s,a,o,l,c,f,g;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,a=(o=new Ma(n.read(i))).readShort(),c=o.readShort(),g=o.readShort(),l=o.readShort(),f=o.readShort(),this.cache[t]=a===-1?new zA(o,c,g,l,f):new BA(o,a,c,g,l,f),this.cache[t]))},e.prototype.encode=function(t,n,r){var i,s,a,o,l;for(a=[],s=[],o=0,l=n.length;o<l;o++)i=t[n[o]],s.push(a.length),i&&(a=a.concat(i.encode(r)));return s.push(a.length),{table:a,offsets:s}},e}(),BA=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),zA=function(){function e(t,n,r,i,s){var a,o;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ma(Ib.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),qA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fs(e,Gi),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<r.length;++a)if(r[a]=i,s<n.length&&n[s]==a){++s,r[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*r.length),f=0;f<r.length;++f)c[4*f+3]=255&r[f],c[4*f+2]=(65280&r[f])>>8,c[4*f+1]=(16711680&r[f])>>16,c[4*f]=(4278190080&r[f])>>24;return c},e}(),$A=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,o,l;for(i={},a=0,o=t.length;a<o;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,o,l,c,f,g,y,p,k,_,A,x;for(i in r=Tb.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),p={0:0},x=r.charMap)p[(l=x[i]).old]=l.new;for(k in y=r.maxGlyphID,a)k in p||(p[k]=y++);return f=function(b){var N,C;for(N in C={},b)C[b[N]]=N;return C}(p),g=Object.keys(f).sort(function(b,N){return b-N}),_=function(){var b,N,C;for(C=[],b=0,N=g.length;b<N;b++)o=g[b],C.push(f[o]);return C}(),s=this.font.glyf.encode(a,_,p),c=this.font.loca.encode(s.offsets,_),A={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},e}();ot.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();const g0=e=>e==null?"":String(e);async function HA(e){try{const n=await(await fetch(e)).blob();return new Promise(r=>{const i=new FileReader;i.onloadend=()=>r(i.result),i.onerror=()=>r(null),i.readAsDataURL(n)})}catch{return null}}async function Xm(e,t,n="estimate",r){try{const i=new ot,s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),o=15,l=s-15;let c=15;const f=[15,23,42],g=[71,85,105],y=[241,245,249],p=[226,232,240],k=[148,163,184],_=n==="invoice";if(t!=null&&t.logoUrl){const z=await HA(t.logoUrl);z&&i.addImage(z,"PNG",o,c,20,20)}i.setFontSize(28),i.setFont("helvetica","bold"),i.setTextColor(f[0],f[1],f[2]);const A=_?"TAX INVOICE":"ESTIMATE";i.text(A,l,c+8,{align:"right"}),c+=25;const x=(s-30)/2;if(i.setFontSize(10),i.setTextColor(g[0],g[1],g[2]),i.setFont("helvetica","bold"),i.text("FROM",o,c),c+=5,i.setFontSize(11),i.setTextColor(f[0],f[1],f[2]),i.setFont("helvetica","bold"),i.text(g0((t==null?void 0:t.businessName)||"Business Name"),o,c),i.setFontSize(9),i.setFont("helvetica","normal"),i.setTextColor(g[0],g[1],g[2]),c+=5,t!=null&&t.abn&&(i.text(`ABN: ${t.abn}`,o,c),c+=4),t!=null&&t.businessAddress){const z=i.splitTextToSize(t.businessAddress,x);i.text(z,o,c),c+=z.length*4}t!=null&&t.phone&&(i.text(t.phone,o,c),c+=4),t!=null&&t.email&&i.text(t.email,o,c);const b=c-(t!=null&&t.logoUrl?15:10);let N=40;i.setFillColor(y[0],y[1],y[2]),i.rect(l-70,N,70,25,"F"),i.setFontSize(9),i.setFont("helvetica","bold"),i.setTextColor(g[0],g[1],g[2]),i.text(_?"INVOICE #":"QUOTE #",l-65,N+7),i.text("DATE",l-65,N+14),_&&i.text("DUE DATE",l-65,N+21),i.setTextColor(f[0],f[1],f[2]),i.setFont("helvetica","normal");const C=r||e.id.substring(0,8).toUpperCase(),K=new Date().toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"}),T=e.timeline||"On Receipt";if(i.text(C,l-5,N+7,{align:"right"}),i.text(K,l-5,N+14,{align:"right"}),_&&i.text(T,l-5,N+21,{align:"right"}),N+=35,i.setFontSize(10),i.setTextColor(g[0],g[1],g[2]),i.setFont("helvetica","bold"),i.text("BILL TO",l-70,N),N+=5,i.setFontSize(11),i.setTextColor(f[0],f[1],f[2]),i.text(g0(e.clientName),l-70,N),i.setFontSize(9),i.setFont("helvetica","normal"),i.setTextColor(g[0],g[1],g[2]),N+=5,e.clientAddress){const z=i.splitTextToSize(e.clientAddress,70);i.text(z,l-70,N),N+=z.length*4}e.clientEmail&&(i.text(e.clientEmail,l-70,N),N+=4),e.clientPhone&&i.text(e.clientPhone,l-70,N),c=Math.max(c+15,N+15),e.jobTitle&&(i.setFontSize(12),i.setFont("helvetica","bold"),i.setTextColor(f[0],f[1],f[2]),i.text("PROJECT:",o,c),i.setFont("helvetica","normal"),i.text(g0(e.jobTitle),o+25,c),c+=10),e.scopeOfWork&&e.scopeOfWork.length>0&&(i.setFontSize(10),i.setFont("helvetica","bold"),i.setTextColor(g[0],g[1],g[2]),i.text("SCOPE OF WORK",o,c),c+=5,i.setFont("helvetica","normal"),i.setTextColor(f[0],f[1],f[2]),e.scopeOfWork.forEach(z=>{const j=i.splitTextToSize(` ${z}`,s-30);c+j.length*5>a-20&&(i.addPage(),c=20),i.text(j,o,c),c+=j.length*5}),c+=5),c+=5,i.setFillColor(f[0],f[1],f[2]),i.rect(o,c,s-30,10,"F"),i.setFontSize(9),i.setFont("helvetica","bold"),i.setTextColor(255,255,255),i.text("DESCRIPTION",o+5,c+6.5),i.text("QTY",l-55,c+6.5,{align:"right"}),i.text("RATE",l-30,c+6.5,{align:"right"}),i.text("AMOUNT",l-5,c+6.5,{align:"right"}),c+=10,i.setTextColor(f[0],f[1],f[2]),i.setFont("helvetica","normal"),i.setFontSize(10);const M=(z,j,R,$)=>{const J=i.splitTextToSize(z,s-100),X=Math.max(J.length*5,8);c+X>a-60&&(i.addPage(),c=20),i.text(J,o+5,c+5),i.text(j,l-55,c+5,{align:"right"}),i.text(R,l-30,c+5,{align:"right"}),i.text($,l-5,c+5,{align:"right"}),c+=X,i.setDrawColor(p[0],p[1],p[2]),i.line(o,c,l,c)};e.materials&&e.materials.length>0&&e.materials.forEach(z=>{M(z.name,`${z.quantity} ${z.unit}`,gt(z.rate),gt(z.quantity*z.rate))}),e.labour&&e.labour.hours>0&&M("Labour",`${e.labour.hours} hrs`,gt(e.labour.rate),gt(e.labour.hours*e.labour.rate)),e.additionalFees&&e.additionalFees.length>0&&e.additionalFees.forEach(z=>{M(z.description,"1",gt(z.amount),gt(z.amount))});const I=Da(e);c+=10;const S=l-70;if(i.setFontSize(10),i.setTextColor(g[0],g[1],g[2]),i.text("Subtotal:",S,c),i.text(gt(I.subtotal),l-5,c,{align:"right"}),c+=6,i.text(`GST (${(e.gstRate*100).toFixed(0)}%):`,S,c),i.text(gt(I.gst),l-5,c,{align:"right"}),c+=8,i.setFillColor(f[0],f[1],f[2]),i.rect(S-5,c-5,75,12,"F"),i.setFontSize(12),i.setFont("helvetica","bold"),i.setTextColor(255,255,255),i.text("TOTAL DUE",S,c+3),i.text(gt(I.total),l-5,c+3,{align:"right"}),c+=20,_&&t&&(t.bankName||t.accountNumber)&&(c>a-50&&(i.addPage(),c=20),i.setTextColor(f[0],f[1],f[2]),i.setFontSize(10),i.setFont("helvetica","bold"),i.text("HOW TO PAY",o,c),c+=6,i.setFontSize(9),i.setFont("helvetica","normal"),i.setTextColor(g[0],g[1],g[2]),[t.bankName?`Bank: ${t.bankName}`:"",t.accountName?`Account Name: ${t.accountName}`:"",t.bsbRouting?`BSB: ${t.bsbRouting}`:"",t.accountNumber?`Account Number: ${t.accountNumber}`:""].filter(Boolean).forEach(j=>{i.text(j,o,c),c+=4}),t.paymentInstructions)){c+=2;const j=i.splitTextToSize(t.paymentInstructions,s-100);i.text(j,o,c),c+=j.length*4}return i.setFontSize(9),i.setTextColor(k[0]||148,k[1]||163,k[2]||184),i.text("Thank you for your business.",s/2,a-15,{align:"center"}),i.output("blob")}catch(i){throw console.error("[PDFGenerator] Failed:",i),i}}const Rb=({estimate:e,userProfile:t,onBack:n,onEdit:r,onSend:i,isPublic:s=!1,onApprove:a,onStatusChange:o,onViewInvoice:l,onDelete:c,onConvertToInvoice:f,type:g="estimate"})=>{const{materialsTotal:y,labourTotal:p,subtotal:k,gst:_,total:A}=Da(e),[x,b]=me.useState(!1),N=g==="invoice",C=async()=>{try{b(!0),console.log("[EstimatePreview] Starting PDF generation...");const T=await Xm(e,t,g,e.id),M=URL.createObjectURL(T),I=document.createElement("a");I.href=M;const S=e.id.substring(0,6).toUpperCase();I.download=`${N?"Invoice":"Estimate"}-${S}.pdf`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(M),console.log("[EstimatePreview] PDF downloaded successfully")}catch(T){console.error("[EstimatePreview] PDF generation failed:",T),alert("Failed to generate PDF. Please try again.")}finally{b(!1)}},K=()=>{if(s)return d.jsxs(d.Fragment,{children:[d.jsxs(Et,{variant:"outline",className:"flex-1",onClick:C,disabled:x,children:[d.jsx(c1,{size:16,className:"mr-2"}),x?"Generating...":"PDF"]}),d.jsx(Et,{variant:"primary",className:"flex-1",onClick:a,children:"Approve Quote"})]});if(N)return d.jsxs(d.Fragment,{children:[d.jsx(Et,{variant:"secondary",className:"flex-1 font-semibold",onClick:r,children:"Edit"}),d.jsx(Et,{variant:"primary",className:"flex-[2] font-bold shadow-xl shadow-brand/10",onClick:i,children:"Send Invoice"})]});switch(e.status){case yt.DRAFT:return d.jsxs(d.Fragment,{children:[d.jsx(Et,{variant:"secondary",className:"flex-1 font-semibold",onClick:r,children:"Edit"}),d.jsx(Et,{variant:"primary",className:"flex-1 font-bold shadow-xl shadow-brand/10",onClick:i,children:"Send Estimate"}),f&&d.jsx(Et,{variant:"accent",className:"flex-1 font-bold shadow-xl shadow-accent/20",onClick:f,children:"Send as Invoice"})]});case yt.SENT:return d.jsxs(d.Fragment,{children:[d.jsx(Et,{variant:"secondary",className:"flex-1 font-semibold",onClick:i,children:"Resend"}),d.jsxs(Et,{variant:"success",className:"flex-[2] font-bold shadow-xl shadow-accent/20",onClick:()=>o==null?void 0:o(yt.APPROVED),children:[d.jsx(Gh,{size:18,className:"mr-2"}),"Approve to Invoice"]})]});case yt.APPROVED:case yt.PAID:return d.jsxs(Et,{variant:"accent",fullWidth:!0,className:"font-bold shadow-xl shadow-accent/20",onClick:l,children:[d.jsx("span",{className:"mr-2",children:"View Invoice"}),d.jsx(Vh,{size:18})]});default:return null}};return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] pb-40",children:[s?d.jsx("div",{className:"h-[70px] flex items-center justify-center bg-white border-b border-slate-100 mb-6 sticky top-0 z-30",children:d.jsxs("h1",{className:"font-bold text-xl tracking-tighter text-slate-900 uppercase flex items-center justify-center gap-0.5",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1 h-1 rounded-full bg-accent mt-1.5 shadow-[0_0_8px_rgba(212,255,0,0.4)]"})]})}):d.jsx(Tr,{title:N?"Invoice":"Estimate",left:d.jsx("button",{onClick:n,className:"w-10 h-10 flex items-center justify-center -ml-2 text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})}),right:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:C,disabled:x,className:"w-9 h-9 flex items-center justify-center text-slate-900 hover:bg-slate-100 rounded-full transition-colors disabled:opacity-50",children:d.jsx(c1,{size:18})}),c&&d.jsx("button",{onClick:c,className:"w-9 h-9 flex items-center justify-center text-red-500 hover:bg-red-50 rounded-full transition-colors",children:d.jsx(Om,{size:18})})]})}),d.jsxs("div",{className:"flex flex-col mt-2",children:[d.jsx(ri,{title:"Summary",children:d.jsxs(pn,{className:"flex flex-col gap-5",children:[t&&d.jsxs("div",{className:"flex items-center gap-3.5 pb-5 border-b border-slate-50",children:[d.jsx("div",{className:"w-12 h-11 rounded-[14px] bg-slate-50 border border-slate-100 flex items-center justify-center shrink-0",children:t.logoUrl?d.jsx("img",{src:t.logoUrl,alt:t.businessName,className:"w-full h-full rounded-[14px] object-cover"}):d.jsx(To,{size:20,className:"text-slate-900"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h3",{className:"text-[15px] font-bold text-slate-900 tracking-tight leading-tight",children:t.businessName}),d.jsx("p",{className:"text-[12px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:t.tradeType})]})]}),d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("h2",{className:"text-[24px] font-bold text-slate-900 tracking-tight leading-tight",children:e.jobTitle}),!N&&d.jsxs("p",{className:"text-[11px] text-tertiary font-bold uppercase tracking-wider",children:["Estimate #",e.id.substring(0,6).toUpperCase()]}),d.jsxs("div",{className:"flex flex-col gap-0.5",children:[d.jsx("p",{className:"text-[15px] font-bold text-slate-600 truncate",children:e.clientName}),e.clientAddress&&d.jsx("p",{className:"text-[13px] text-slate-400 font-medium leading-relaxed",children:e.clientAddress})]})]}),d.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-2.5 bg-slate-50 rounded-[14px] w-fit border border-slate-100",children:[d.jsx(wf,{size:16,className:"text-slate-900"}),d.jsxs("span",{className:"text-[13px] font-bold text-slate-900 uppercase tracking-wider",children:[N?"Issued:":"Timeline:"," ",d.jsx("span",{className:"text-slate-500",children:e.timeline})]})]})]})}),d.jsx(ri,{title:"Scope of Work",children:d.jsx(pn,{className:"p-6",children:d.jsx("ul",{className:"space-y-4",children:e.scopeOfWork.map((T,M)=>d.jsxs("li",{className:"flex gap-4 text-[15px] text-slate-900 leading-relaxed font-bold",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-accent mt-2 shrink-0 shadow-sm"}),d.jsx("span",{children:T})]},M))})})}),d.jsx(ri,{title:"Breakdown",children:d.jsx(pn,{noPadding:!0,className:"overflow-hidden border border-slate-100 shadow-sm",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-50 text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-slate-100",children:[d.jsx("th",{className:"px-6 py-4",children:"Item"}),d.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),d.jsxs("tbody",{children:[d.jsx("tr",{className:"bg-slate-50",children:d.jsx("td",{colSpan:2,className:"px-6 py-3",children:d.jsx("span",{className:"text-[11px] font-bold text-slate-900 uppercase tracking-widest",children:"Materials"})})}),e.materials.map(T=>d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-6 py-5",children:[d.jsx("div",{className:"text-[15px] font-bold text-slate-900 mb-0.5",children:T.name}),d.jsxs("div",{className:"text-[12px] font-bold text-slate-400 uppercase tracking-wider",children:[T.quantity," ",T.unit,"  ",gt(T.rate)]})]}),d.jsx("td",{className:"px-6 py-5 text-right text-[15px] font-bold text-slate-900 tabular-nums",children:gt(T.quantity*T.rate)})]},T.id)),d.jsx("tr",{className:"bg-slate-50",children:d.jsx("td",{colSpan:2,className:"px-6 py-3",children:d.jsx("span",{className:"text-[11px] font-bold text-slate-900 uppercase tracking-widest",children:"Labour"})})}),d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-6 py-5",children:[d.jsx("div",{className:"text-[15px] font-bold text-slate-900 mb-0.5",children:"Labour Charges"}),d.jsxs("div",{className:"text-[12px] font-bold text-slate-400 uppercase tracking-wider",children:[e.labour.hours," hrs  ",gt(e.labour.rate),"/hr"]})]}),d.jsx("td",{className:"px-6 py-5 text-right text-[15px] font-bold text-slate-900 tabular-nums",children:gt(p)})]})]})]})})})}),d.jsx(ri,{title:"Totals",children:d.jsxs(pn,{className:"!p-0 overflow-hidden border border-slate-100 shadow-xl",children:[d.jsxs("div",{className:"p-6 bg-white flex flex-col gap-3",children:[d.jsxs("div",{className:"flex justify-between text-[14px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"Subtotal"}),d.jsx("span",{className:"text-slate-900",children:gt(k)})]}),d.jsxs("div",{className:"flex justify-between text-[14px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"GST (10%)"}),d.jsx("span",{className:"text-slate-900",children:gt(_)})]})]}),d.jsxs("div",{className:"bg-slate-50 border-t border-slate-100 p-6 flex justify-between items-center",children:[d.jsx("span",{className:"text-[13px] font-bold text-slate-500 uppercase tracking-widest",children:"Total Amount"}),d.jsx("span",{className:"text-[28px] font-bold text-slate-900 tracking-tight leading-none",children:gt(A)})]})]})}),d.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] p-5 bg-white/95 backdrop-blur-xl border-t border-slate-100 z-50 pb-safe",children:d.jsx("div",{className:"flex gap-3 justify-center",children:K()})})]})]})},WA=({status:e})=>{const n={[yt.DRAFT]:{bg:"bg-gray-100",text:"text-gray-700",dot:"bg-gray-400"},[yt.SENT]:{bg:"bg-gray-100",text:"text-gray-700",dot:"bg-gray-500"},[yt.APPROVED]:{bg:"bg-accent/20",text:"text-accentDark",dot:"bg-accent"},[yt.PAID]:{bg:"bg-accent/20",text:"text-accentDark",dot:"bg-accent"}}[e];return d.jsxs("div",{className:`flex items-center gap-1.5 ${n.bg} px-3 py-1.5 rounded-full`,children:[d.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${n.dot}`}),d.jsx("span",{className:`text-[11px] font-bold ${n.text} tracking-wide uppercase`,children:e})]})},VA=({estimate:e,onBack:t,onViewEstimate:n,onViewInvoice:r,onStatusChange:i})=>{const s=Da(e),a=()=>{switch(e.status){case yt.DRAFT:return d.jsxs(Et,{variant:"primary",fullWidth:!0,onClick:n,className:"shadow-float h-[64px] text-[17px]",children:[d.jsx("span",{className:"mr-2 text-white",children:"Review Quote"}),d.jsx(Vh,{size:20,className:"text-white"})]});case yt.SENT:return d.jsxs("div",{className:"flex gap-3 w-full",children:[d.jsx(Et,{variant:"secondary",className:"flex-1 h-[64px]",onClick:n,children:"Resend"}),d.jsxs(Et,{variant:"success",className:"flex-[2] h-[64px] text-[17px]",onClick:()=>i==null?void 0:i(yt.APPROVED),children:[d.jsx(Gh,{size:20,className:"mr-2"}),"Approve to Invoice"]})]});case yt.APPROVED:return d.jsxs(Et,{variant:"primary",fullWidth:!0,onClick:r,className:"shadow-float h-[64px] text-[17px]",children:[d.jsx("span",{className:"mr-2 text-white",children:"Review Invoice"}),d.jsx(Vh,{size:20,className:"text-white"})]});case yt.PAID:return d.jsxs("div",{className:"flex items-center justify-center w-full h-[64px] bg-slate-50 border border-slate-100 rounded-[20px] text-slate-500 font-bold",children:[d.jsx(Gh,{size:20,className:"mr-2 text-green-500"}),"Job Completed"]});default:return null}},o=e.status===yt.APPROVED||e.status===yt.PAID;return d.jsxs(hr,{showNav:!1,activeTab:"estimates",className:"bg-[#FAFAFA] relative",children:[d.jsx(Tr,{left:d.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center -ml-2 text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})})}),d.jsxs("div",{className:"px-6 flex flex-col gap-10 pb-48",children:[d.jsxs("div",{className:"flex flex-col items-center w-full pt-4",children:[d.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center shrink-0 text-[28px] font-black tracking-tight mb-6 bg-white border border-slate-100 text-slate-900 shadow-sm",children:Uu(e.clientName)}),d.jsx("h1",{className:"text-[32px] font-black text-slate-900 tracking-tight leading-[1.1] mb-3 w-full text-center line-clamp-2",children:e.jobTitle}),d.jsxs("div",{className:"flex items-center gap-3 max-w-full px-4 min-w-0",children:[d.jsx("span",{className:"text-slate-500 text-[16px] font-bold min-w-0 flex-shrink truncate",children:e.clientName}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-200 flex-shrink-0"}),d.jsx("div",{className:"flex-shrink-0 scale-110",children:d.jsx(WA,{status:e.status})})]})]}),d.jsxs("div",{className:"relative px-2",children:[d.jsx("div",{className:"absolute left-[36px] top-10 bottom-10 w-[2px] bg-slate-100 z-0"}),d.jsxs("div",{className:"flex flex-col gap-8 relative z-10",children:[d.jsxs("div",{onClick:n,className:"group bg-white rounded-[28px] p-5 flex items-center gap-5 shadow-sm border border-slate-100/50 cursor-pointer active:scale-[0.98] transition-all",children:[d.jsx("div",{className:"w-14 h-14 rounded-[20px] bg-slate-50 border border-slate-100 text-slate-900 flex items-center justify-center shrink-0",children:d.jsx(Zx,{size:26,strokeWidth:2})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-[17px] font-bold text-slate-900 tracking-tight",children:"Estimate"}),d.jsxs("p",{className:"text-[14px] text-slate-400 font-medium mt-0.5",children:["Created ",e.date]})]}),d.jsx("div",{className:"pr-2 text-right",children:d.jsx("span",{className:"text-[17px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(s.total)})})]}),d.jsxs("div",{onClick:o?r:void 0,className:`rounded-[28px] p-5 flex items-center gap-5 transition-all
                ${o?"bg-white shadow-sm border border-slate-100/50 cursor-pointer active:scale-[0.98]":"bg-slate-50/50 border-2 border-dashed border-slate-100 opacity-60"}`,children:[d.jsx("div",{className:`w-14 h-14 rounded-[20px] flex items-center justify-center shrink-0 border-2 ${o?"bg-accent text-accentText border-accent shadow-sm":"bg-transparent text-slate-300 border-slate-100"}`,children:o?d.jsx(u1,{size:26,strokeWidth:2.5}):d.jsx(aN,{size:22})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:`text-[17px] font-bold tracking-tight ${o?"text-slate-900":"text-slate-400"}`,children:o?"Invoice #001":"Invoice"}),d.jsx("p",{className:"text-[14px] text-slate-400 font-medium mt-0.5",children:o?"Ready to send":"Unlock by approving quote"})]}),o&&d.jsx("div",{className:"pr-2 text-right",children:d.jsx("span",{className:"text-[17px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(s.total)})})]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 px-2",children:[e.clientPhone&&d.jsxs("a",{href:`tel:${e.clientPhone}`,className:"bg-white border border-slate-100/50 p-5 rounded-[24px] shadow-sm flex flex-col items-center justify-center gap-3 hover:bg-slate-50 transition-all active:scale-[0.95]",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center",children:d.jsx(dN,{size:20,className:"text-slate-600"})}),d.jsx("span",{className:"text-[14px] font-bold text-slate-900",children:"Call Client"})]}),d.jsxs("div",{className:"bg-white border border-slate-100/50 p-5 rounded-[24px] shadow-sm flex flex-col items-center justify-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center",children:d.jsx(wf,{size:20,className:"text-slate-600"})}),d.jsx("span",{className:"text-[14px] font-bold text-slate-900",children:e.timeline})]})]})]}),d.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] p-6 bg-white/95 backdrop-blur-xl border-t border-slate-100 z-50 pb-safe",children:d.jsx("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:a()})})]})},GA=({onBack:e,onSent:t,type:n="estimate",onTabChange:r,estimateId:i})=>{const s=()=>{const S=window.location.origin;return S.endsWith("/")?S.slice(0,-1):S},[a,o]=me.useState(!1),[l,c]=me.useState(!1),[f,g]=me.useState(""),[y,p]=me.useState(!0),[k,_]=me.useState(null),[A,x]=me.useState(null),[b,N]=me.useState(null),C=n==="invoice"?"Send Invoice":"Send Estimate",K=n==="invoice"?"invoice":"estimate";me.useEffect(()=>{(async()=>{var z,j,R,$,J,X,le,de,Z,se,ve,fe,P,q,G,Y,Q;if(!i){console.error("[SendEstimate] No estimateId provided"),N("No estimate ID provided"),p(!1);return}try{if(console.log(`[SendEstimate] Fetching ${n} data for estimateId:`,i),n==="invoice"){const{data:te,error:ge}=await Ee.from("invoices").select(`
              *,
              invoice_line_items (*),
              customer:customers!customer_id (*),
              quote:quotes!source_quote_id (
                scope_of_work
              )
            `).eq("id",i).maybeSingle();if(ge){console.error("[SendEstimate] Failed to fetch invoice:",ge),N("Failed to load invoice data. Please try again."),p(!1);return}if(te){console.log("[SendEstimate] Invoice data loaded:",{id:te.id,has_short_code:!!te.short_code,is_public:te.is_public,has_customer:!!te.customer});const xe=(te.invoice_line_items||[]).filter(F=>F.item_type==="material"||F.item_type==="materials").map(F=>({id:F.id,name:F.description,quantity:F.quantity,unit:"unit",rate:F.unit_price_cents/100})),je=(te.invoice_line_items||[]).find(F=>F.item_type==="labour"),Te=`Due: ${(te.due_date?new Date(te.due_date):new Date(Date.now()+30*24*60*60*1e3)).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})}`,We={id:te.id,jobTitle:te.title||`Invoice ${te.invoice_number}`,clientName:((z=te.customer)==null?void 0:z.name)||"",clientAddress:"",clientEmail:((j=te.customer)==null?void 0:j.email)||"",clientPhone:((R=te.customer)==null?void 0:R.phone)||"",timeline:Te,scopeOfWork:(($=te.quote)==null?void 0:$.scope_of_work)||(te.description?[te.description]:[]),materials:xe,labour:{hours:(je==null?void 0:je.quantity)||0,rate:((je==null?void 0:je.unit_price_cents)||0)/100},status:te.status,gstRate:te.default_tax_rate||.1};if(_(We),te.short_code){const F=`${s()}/i/${te.short_code}`;console.log("[SendEstimate] Invoice share URL generated:",F),g(F)}else console.error("[SendEstimate] Invoice missing short_code"),N("Invoice is not ready for sharing. Please try again.")}else console.error("[SendEstimate] No invoice data found"),N("Invoice not found.")}else{const{data:te,error:ge}=await Ee.from("quotes").select(`
              *,
              quote_line_items (*),
              customer:customers!customer_id (*)
            `).eq("id",i).maybeSingle();if(ge){console.error("[SendEstimate] Failed to fetch quote:",ge),N("Failed to load estimate data. Please try again."),p(!1);return}if(te){console.log("[SendEstimate] Quote data loaded:",{id:te.id,has_short_code:!!te.short_code,is_public:te.is_public});const xe=(te.quote_line_items||[]).filter(Te=>Te.item_type==="materials").map(Te=>({id:Te.id,name:Te.description,quantity:Te.quantity,unit:Te.unit||"unit",rate:Te.unit_price_cents/100})),je=(te.quote_line_items||[]).find(Te=>Te.item_type==="labour"),Ue={id:te.id,jobTitle:te.title||"",clientName:((J=te.customer)==null?void 0:J.name)||"",clientAddress:"",clientEmail:((X=te.customer)==null?void 0:X.email)||"",clientPhone:((le=te.customer)==null?void 0:le.phone)||"",timeline:"2-3 days",scopeOfWork:te.scope_of_work||[],materials:xe,labour:{hours:(je==null?void 0:je.quantity)||0,rate:((je==null?void 0:je.unit_price_cents)||0)/100},status:te.status,date:new Date(te.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short"}),gstRate:te.default_tax_rate||.1};if(_(Ue),te.short_code){const Te=`${s()}/q/${te.short_code}`;console.log("[SendEstimate] Quote share URL generated:",Te),g(Te)}else console.error("[SendEstimate] Quote missing short_code"),N("Estimate is not ready for sharing. Please try again.")}else console.error("[SendEstimate] No quote data found"),N("Estimate not found.")}const{data:{user:ae}}=await Ee.auth.getUser();if(ae){const{data:te}=await Ee.from("users").select("*, org:organizations(*)").eq("id",ae.id).maybeSingle();te&&x({id:te.id,email:ae.email||"",businessName:te.business_name,tradeType:te.trade_type,phone:te.phone||"",logoUrl:(de=te.org)==null?void 0:de.logo_url,businessAddress:((Z=te.org)==null?void 0:Z.business_address)||"",abn:((se=te.org)==null?void 0:se.abn)||"",website:((ve=te.org)==null?void 0:ve.website)||"",bankName:((fe=te.org)==null?void 0:fe.bank_name)||"",accountName:((P=te.org)==null?void 0:P.account_name)||"",bsbRouting:((q=te.org)==null?void 0:q.bsb_routing)||"",accountNumber:((G=te.org)==null?void 0:G.account_number)||"",paymentTerms:((Y=te.org)==null?void 0:Y.default_payment_terms)||"",paymentInstructions:((Q=te.org)==null?void 0:Q.payment_instructions)||""})}p(!1)}catch(ae){console.error("[SendEstimate] Error fetching data:",ae),p(!1)}})()},[i,n]);const T=async()=>{if(navigator.share)try{c(!0),await navigator.share({title:`${n==="invoice"?"Invoice":"Estimate"} from Smash`,text:`View your ${K}:`,url:f}),await t(),c(!1)}catch(S){c(!1),S.name!=="AbortError"&&console.error("Error sharing:",S)}else M()},M=async()=>{try{await navigator.clipboard.writeText(f),o(!0),c(!0),setTimeout(async()=>{o(!1),await t(),c(!1)},1500)}catch(S){console.error("Failed to copy:",S),c(!1)}},I=async()=>{var S,z,j;if(console.log("[SendEstimate.handleSharePDF] === ENTRY POINT 1: Share PDF Button ==="),console.log("[SendEstimate.handleSharePDF] Browser:",navigator.userAgent),console.log("[SendEstimate.handleSharePDF] Platform:",navigator.platform),console.log("[SendEstimate.handleSharePDF] navigator.share exists:",!!navigator.share),console.log("[SendEstimate.handleSharePDF] navigator.canShare exists:",!!navigator.canShare),!k){console.error("[SendEstimate.handleSharePDF] BLOCKED: No estimate data available"),alert("No estimate data available. Please try again.");return}try{c(!0),console.log("[SendEstimate.handleSharePDF] Calling generateEstimatePDF with:",{hasEstimate:!!k,hasUserProfile:!!A,type:n,estimateId:k.id,clientName:k.clientName,materialsCount:(S=k.materials)==null?void 0:S.length,labourHours:(z=k.labour)==null?void 0:z.hours,estimateKeys:Object.keys(k)});const R=await Xm(k,A||void 0,n);console.log("[SendEstimate.handleSharePDF] PDF returned from generator:",{type:typeof R,constructor:R.constructor.name,blobType:R.type,size:R.size,isBlob:R instanceof Blob});const $=`${n==="invoice"?"invoice":"estimate"}-${k.jobTitle.replace(/\s+/g,"-").toLowerCase()}.pdf`;console.log("[SendEstimate.handleSharePDF] Generated filename:",$);const J=navigator.share&&((j=navigator.canShare)==null?void 0:j.call(navigator,{files:[new File([R],$)]}));if(console.log("[SendEstimate.handleSharePDF] Can share files:",J),J){console.log("[SendEstimate.handleSharePDF] Using navigator.share with file");const X=new File([R],$,{type:"application/pdf"});await navigator.share({files:[X],title:`${n==="invoice"?"Invoice":"Estimate"} - ${k.jobTitle}`}),console.log("[SendEstimate.handleSharePDF] Share completed successfully"),await t()}else{console.log("[SendEstimate.handleSharePDF] Using download fallback");const X=URL.createObjectURL(R);console.log("[SendEstimate.handleSharePDF] Created object URL:",X);const le=document.createElement("a");le.href=X,le.download=$,document.body.appendChild(le),console.log("[SendEstimate.handleSharePDF] Triggering download..."),le.click(),document.body.removeChild(le),URL.revokeObjectURL(X),console.log("[SendEstimate.handleSharePDF] Download complete"),await t()}c(!1)}catch(R){console.error("[SendEstimate.handleSharePDF] === ERROR CAUGHT ==="),console.error("[SendEstimate.handleSharePDF] Error type:",typeof R),console.error("[SendEstimate.handleSharePDF] Error name:",R.name),console.error("[SendEstimate.handleSharePDF] Error message:",R.message),console.error("[SendEstimate.handleSharePDF] Error stack:",R.stack),console.error("[SendEstimate.handleSharePDF] Full error:",R),c(!1),R.name!=="AbortError"&&alert(`Failed to generate or share PDF: ${R.message}

Please check the console for details.`)}};return d.jsxs(hr,{activeTab:"estimates",onTabChange:r,className:"bg-[#FAFAFA]",children:[d.jsx(Tr,{left:d.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-primary hover:bg-gray-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})}),title:C}),d.jsxs("div",{className:"px-6 mt-6 flex flex-col gap-6",children:[b&&d.jsx(pn,{className:"p-4 bg-red-50 border border-red-200",children:d.jsx("p",{className:"text-sm text-red-800 font-medium",children:b})}),d.jsxs(pn,{className:"flex flex-col gap-6 p-6",children:[d.jsxs("div",{className:"text-center mb-2",children:[d.jsxs("h2",{className:"text-lg font-bold text-primary",children:["Share ",K]}),d.jsxs("p",{className:"text-sm text-secondary",children:["Send this ",K," to your client."]})]}),d.jsxs(Et,{variant:"primary",className:"w-full h-14 text-base flex items-center justify-center gap-3",onClick:T,disabled:l||y||!f,children:[d.jsx(fN,{size:20}),y?"Loading...":l?"Sending...":`Share ${n==="invoice"?"Invoice":"Estimate"}`]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-[1px] flex-1 bg-gray-100"}),d.jsx("span",{className:"text-xs text-secondary font-medium",children:"OR"}),d.jsx("div",{className:"h-[1px] flex-1 bg-gray-100"})]}),d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-[14px]",children:[d.jsx(iN,{size:18}),d.jsx("span",{children:"Copy Link"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"bg-surface border-none ring-1 ring-gray-100 rounded-2xl px-4 py-4 text-sm text-secondary flex-1 min-w-0 truncate font-medium",children:y?"Loading share link...":f||"No link available"}),d.jsx(Et,{variant:"secondary",className:"px-6 h-[52px]",onClick:M,disabled:l||y||!f,children:y?"Loading...":l?"Sending...":a?"Copied!":"Copy"})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-[1px] flex-1 bg-gray-100"}),d.jsx("span",{className:"text-xs text-secondary font-medium",children:"OR"}),d.jsx("div",{className:"h-[1px] flex-1 bg-gray-100"})]}),d.jsxs(Et,{variant:"secondary",className:"w-full h-14 text-base flex items-center justify-center gap-3",onClick:I,disabled:l||y||!k,children:[d.jsx(nN,{size:20}),y?"Loading...":l?"Generating...":"Share as PDF"]})]})]})]})},KA=({estimate:e,userProfile:t,onBack:n,onEdit:r,onSend:i,onDelete:s})=>d.jsx(Rb,{estimate:{...e,jobTitle:`Invoice #${e.id.substring(0,4)}`},userProfile:t,onBack:n,onEdit:r,onSend:i,onDelete:s,type:"invoice"}),Ob=({estimate:e,onApprove:t,businessName:n})=>{const{materialsTotal:r,labourTotal:i,subtotal:s,gst:a,total:o}=Da(e);return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] pb-48",children:[d.jsx("div",{className:"h-[80px] flex items-center justify-center bg-white border-b border-slate-100 mb-6 sticky top-0 z-30",children:d.jsxs("h1",{className:"font-black text-2xl tracking-tighter text-slate-900 uppercase flex items-center justify-center gap-0.5",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2.5 shadow-[0_0_10px_rgba(212,255,0,0.5)]"})]})}),d.jsx("div",{className:"px-8 py-6 bg-white border-b border-slate-100 mb-8",children:d.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-[16px] bg-slate-50 border border-slate-100 flex items-center justify-center shrink-0 shadow-lg shadow-slate-900/5",children:d.jsx(Jx,{size:24,className:"text-slate-900"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-[18px] font-black text-slate-900 tracking-tight leading-none",children:n}),d.jsx("p",{className:"text-[13px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Estimate Sent"})]})]})}),d.jsxs("div",{className:"flex flex-col gap-2 mt-2 px-2",children:[d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Job Summary"}),d.jsxs(pn,{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("h2",{className:"text-[32px] font-black text-slate-900 tracking-tighter leading-[1.1]",children:e.jobTitle}),d.jsx("p",{className:"text-[17px] font-bold text-slate-600 truncate",children:e.clientName}),e.clientAddress&&d.jsx("p",{className:"text-[14px] text-slate-400 font-medium leading-relaxed",children:e.clientAddress})]}),d.jsxs("div",{className:"flex items-center gap-3 px-5 py-3.5 bg-slate-50 rounded-[20px] w-fit border border-slate-100",children:[d.jsx(wf,{size:18,className:"text-slate-900"}),d.jsxs("span",{className:"text-[14px] font-black text-slate-900 uppercase tracking-wider",children:["Timeline: ",d.jsx("span",{className:"text-slate-500",children:e.timeline})]})]})]})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Scope of Work"}),d.jsx(pn,{className:"p-8",children:d.jsx("ul",{className:"space-y-6",children:e.scopeOfWork.map((l,c)=>d.jsxs("li",{className:"flex gap-5 text-[16px] text-slate-900 leading-relaxed font-bold",children:[d.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-accent mt-2 shrink-0 shadow-sm"}),d.jsx("span",{children:l})]},c))})})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Breakdown"}),d.jsx(pn,{noPadding:!0,className:"overflow-hidden border-2 border-slate-100 shadow-xl",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-50 text-[11px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-100",children:[d.jsx("th",{className:"px-8 py-5",children:"Line Item"}),d.jsx("th",{className:"px-8 py-5 text-right",children:"Amount"})]})}),d.jsxs("tbody",{children:[d.jsx("tr",{className:"bg-slate-50",children:d.jsx("td",{colSpan:2,className:"px-8 py-4",children:d.jsx("span",{className:"text-[12px] font-black text-slate-900 uppercase tracking-widest",children:"Materials"})})}),e.materials.map(l=>d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"text-[16px] font-black text-slate-900 mb-1",children:l.name}),d.jsxs("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-wider",children:[l.quantity," ",l.unit,"  ",gt(l.rate)]})]}),d.jsx("td",{className:"px-8 py-6 text-right text-[16px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(l.quantity*l.rate)})]},l.id)),d.jsx("tr",{className:"bg-slate-50/50",children:d.jsx("td",{colSpan:2,className:"px-8 py-4",children:d.jsx("span",{className:"text-[12px] font-black text-slate-900 uppercase tracking-widest",children:"Labour"})})}),d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"text-[16px] font-black text-slate-900 mb-1",children:"Labour Charges"}),d.jsxs("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-wider",children:[e.labour.hours," hrs  ",gt(e.labour.rate),"/hr"]})]}),d.jsx("td",{className:"px-8 py-6 text-right text-[16px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(i)})]})]})]})})})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Total Quote"}),d.jsxs(pn,{className:"!p-0 overflow-hidden border-2 border-slate-100 shadow-2xl",children:[d.jsxs("div",{className:"p-8 bg-white flex flex-col gap-4",children:[d.jsxs("div",{className:"flex justify-between text-[15px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"Subtotal"}),d.jsx("span",{className:"text-slate-900",children:gt(s)})]}),d.jsxs("div",{className:"flex justify-between text-[15px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"GST (10%)"}),d.jsx("span",{className:"text-slate-900",children:gt(a)})]})]}),d.jsxs("div",{className:"bg-slate-50 border-t border-slate-100 p-8 flex justify-between items-center",children:[d.jsx("span",{className:"text-[14px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Total"}),d.jsx("span",{className:"text-[36px] font-black text-slate-900 tracking-tighter tabular-nums leading-none",children:gt(o)})]})]})]})]}),d.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] p-6 bg-white/95 backdrop-blur-xl border-t border-slate-100 z-50 pb-safe",children:d.jsx("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:d.jsxs(Et,{variant:"success",fullWidth:!0,onClick:t,className:"h-[64px] text-[17px]",children:[d.jsx(Gh,{size:20,className:"mr-2"}),"Approve Quote"]})})})]})},Fb=({estimate:e,onPaymentClick:t,businessName:n,businessPhone:r,invoiceNumber:i,businessInfo:s})=>{const{materialsTotal:a,labourTotal:o,subtotal:l,gst:c,total:f}=Da(e),[g,y]=me.useState(!1),p=e.status==="Paid",k=async()=>{try{y(!0);const _=s?{businessName:n,phone:r||"",tradeType:"",businessAddress:s.businessAddress,email:s.email||"",abn:s.abn,website:s.website,logoUrl:s.logoUrl,bankName:s.bankName,accountName:s.accountName,bsbRouting:s.bsbRouting,accountNumber:s.accountNumber,paymentTerms:s.paymentTerms,paymentInstructions:s.paymentInstructions}:void 0,A=await Xm(e,_,"invoice"),x=URL.createObjectURL(A),b=document.createElement("a");b.href=x,b.download=`Invoice-${i}.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),setTimeout(()=>URL.revokeObjectURL(x),1e3)}catch(_){console.error("[PublicInvoiceView] PDF error:",_),alert("Failed to generate PDF. Please try again.")}finally{y(!1)}};return d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA] pb-48",children:[d.jsx("div",{className:"h-[80px] flex items-center justify-center bg-white border-b border-slate-100 mb-6 sticky top-0 z-30",children:d.jsxs("h1",{className:"font-black text-2xl tracking-tighter text-slate-900 uppercase flex items-center justify-center gap-0.5",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2.5 shadow-[0_0_10px_rgba(212,255,0,0.5)]"})]})}),d.jsxs("div",{className:"px-8 py-6 bg-white border-b border-slate-100 mb-8",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-[16px] bg-slate-50 border border-slate-100 flex items-center justify-center shrink-0 shadow-lg shadow-slate-900/5",children:d.jsx(Jx,{size:24,className:"text-slate-900"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-[18px] font-black text-slate-900 tracking-tight leading-none",children:n}),r&&d.jsx("p",{className:"text-[13px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:r})]})]}),d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-50 rounded-[14px] w-fit border border-slate-100",children:[d.jsx(u1,{size:16,className:"text-slate-900"}),d.jsxs("p",{className:"text-[13px] font-black text-slate-900 uppercase tracking-widest",children:["Invoice #",i]})]})]}),d.jsxs("div",{className:"flex flex-col px-2",children:[d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Job Summary"}),d.jsxs(pn,{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("h2",{className:"text-[32px] font-black text-slate-900 tracking-tighter leading-[1.1]",children:e.jobTitle}),d.jsx("p",{className:"text-[17px] font-bold text-slate-600 truncate",children:e.clientName}),e.clientAddress&&d.jsx("p",{className:"text-[14px] text-slate-400 font-medium leading-relaxed",children:e.clientAddress})]}),d.jsxs("div",{className:"flex items-center gap-3 px-5 py-3.5 bg-slate-50 rounded-[20px] w-fit border border-slate-100",children:[d.jsx(wf,{size:18,className:"text-slate-900"}),d.jsxs("span",{className:"text-[14px] font-black text-slate-900 uppercase tracking-wider",children:["Issued: ",d.jsx("span",{className:"text-slate-500",children:e.date})]})]})]})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Work Completed"}),d.jsx(pn,{className:"p-8",children:d.jsx("ul",{className:"space-y-6",children:e.scopeOfWork.map((_,A)=>d.jsxs("li",{className:"flex gap-5 text-[16px] text-slate-900 leading-relaxed font-bold",children:[d.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-accent mt-2 shrink-0 shadow-sm"}),d.jsx("span",{children:_})]},A))})})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Breakdown"}),d.jsx(pn,{noPadding:!0,className:"overflow-hidden border-2 border-slate-100 shadow-xl",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-50 text-[11px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-100",children:[d.jsx("th",{className:"px-8 py-5",children:"Line Item"}),d.jsx("th",{className:"px-8 py-5 text-right",children:"Amount"})]})}),d.jsxs("tbody",{children:[d.jsx("tr",{className:"bg-slate-50",children:d.jsx("td",{colSpan:2,className:"px-8 py-4",children:d.jsx("span",{className:"text-[12px] font-black text-slate-900 uppercase tracking-widest",children:"Materials"})})}),e.materials.map(_=>d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"text-[16px] font-black text-slate-900 mb-1",children:_.name}),d.jsxs("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-wider",children:[_.quantity," ",_.unit,"  ",gt(_.rate)]})]}),d.jsx("td",{className:"px-8 py-6 text-right text-[16px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(_.quantity*_.rate)})]},_.id)),d.jsx("tr",{className:"bg-slate-50/50",children:d.jsx("td",{colSpan:2,className:"px-8 py-4",children:d.jsx("span",{className:"text-[12px] font-black text-slate-900 uppercase tracking-widest",children:"Labour"})})}),d.jsxs("tr",{className:"border-b border-slate-50",children:[d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"text-[16px] font-black text-slate-900 mb-1",children:"Labour Charges"}),d.jsxs("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-wider",children:[e.labour.hours," hrs  ",gt(e.labour.rate),"/hr"]})]}),d.jsx("td",{className:"px-8 py-6 text-right text-[16px] font-black text-slate-900 tabular-nums tracking-tight",children:gt(o)})]})]})]})})})]}),d.jsxs("div",{className:"px-6 flex flex-col gap-4 mb-10",children:[d.jsx("h2",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.15em] ml-1",children:"Total Due"}),d.jsxs(pn,{className:"!p-0 overflow-hidden border-2 border-slate-100 shadow-2xl",children:[d.jsxs("div",{className:"p-8 bg-white flex flex-col gap-4",children:[d.jsxs("div",{className:"flex justify-between text-[15px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"Subtotal"}),d.jsx("span",{className:"text-slate-900",children:gt(l)})]}),d.jsxs("div",{className:"flex justify-between text-[15px] font-bold text-slate-400 uppercase tracking-widest",children:[d.jsx("span",{children:"GST (10%)"}),d.jsx("span",{className:"text-slate-900",children:gt(c)})]})]}),d.jsxs("div",{className:"bg-slate-50 border-t border-slate-100 p-8 flex justify-between items-center",children:[d.jsx("span",{className:"text-[14px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Total"}),d.jsx("span",{className:"text-[36px] font-black text-slate-900 tracking-tighter tabular-nums leading-none",children:gt(f)})]})]})]}),p&&d.jsx("div",{className:"px-6 mb-10",children:d.jsxs(pn,{className:"bg-accent/10 border-accent/20 p-6 flex items-center gap-5",children:[d.jsx("div",{className:"w-14 h-14 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:d.jsx(u1,{size:28,className:"text-accentText"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-[18px] font-black text-accentText leading-none mb-1",children:"Invoice Paid"}),d.jsx("p",{className:"text-[14px] text-accentText/60 font-bold uppercase tracking-wider",children:"Payment complete"})]})]})})]}),d.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] p-6 bg-white/95 backdrop-blur-xl border-t border-slate-100 z-50 pb-safe",children:d.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-bottom-4 duration-500",children:[d.jsxs(Et,{variant:"secondary",onClick:k,disabled:g,className:"flex-1 font-black uppercase tracking-widest text-[13px]",children:[d.jsx(c1,{size:18,className:"mr-2"}),g?"...":"PDF"]}),!p&&d.jsxs(Et,{variant:"primary",className:"flex-[2] font-black uppercase tracking-widest text-[13px]",onClick:t,children:[d.jsx(eN,{size:18,className:"mr-2"}),"Pay Invoice"]})]})})]})},JA=["Carpenter","Painter","Electrician","Plumber","Gardener","Cleaner","Handyman","Builder","Tiler","Roofer","Other"];function YA({onBack:e,onNavigate:t,onLogout:n}){const[r,i]=me.useState(!0),[s,a]=me.useState(null),[o,l]=me.useState(""),[c,f]=me.useState(null),[g,y]=me.useState(null),[p,k]=me.useState(null),[_,A]=me.useState(null),[x,b]=me.useState(null),[N,C]=me.useState(!1),[K,T]=me.useState(!1);me.useState(!1);const M=me.useRef(null),I=!1;me.useEffect(()=>{S()},[]);async function S(){try{i(!0);const{data:{user:R}}=await Ee.auth.getUser();if(!R)return;a(R.id),l(R.email||"");const{data:$}=await Ee.from("users").select("org_id").eq("id",R.id).maybeSingle();if(!($!=null&&$.org_id))return;k($.org_id);const{data:J}=await Ee.from("organizations").select("*").eq("id",$.org_id).maybeSingle();f(J);const{data:X}=await Ee.from("user_pricing_profiles").select("*").eq("user_id",R.id).eq("is_active",!0).maybeSingle();y(X)}catch(R){console.error("Failed to load data:",R)}finally{i(!1)}}async function z(){if(!(!p||!c))try{C(!0);let R;if(x==="business"){const{error:$}=await Ee.from("organizations").update({name:c.name,trade_type:c.trade_type,phone:c.phone}).eq("id",p);R=$}else if(x==="invoice"){const{error:$}=await Ee.from("organizations").update({business_address:c.business_address,abn:c.abn,website:c.website}).eq("id",p);R=$}else if(x==="pricing"&&g){const{error:$}=await Ee.from("user_pricing_profiles").update({hourly_rate_cents:g.hourly_rate_cents,callout_fee_cents:g.callout_fee_cents,travel_rate_cents:g.travel_rate_cents,materials_markup_percent:g.materials_markup_percent,default_tax_rate:g.default_tax_rate,default_currency:g.default_currency,bunnings_run_enabled:g.bunnings_run_enabled,bunnings_run_minutes_default:g.bunnings_run_minutes_default,workday_hours_default:g.workday_hours_default}).eq("id",g.id);R=$}else if(x==="payment"){const{error:$}=await Ee.from("organizations").update({default_payment_terms:c.default_payment_terms,bank_name:c.bank_name,account_name:c.account_name,bsb_routing:c.bsb_routing,account_number:c.account_number,payment_instructions:c.payment_instructions}).eq("id",p);R=$}if(R)throw R;b(null)}catch(R){console.error("Failed to save:",R),alert("Failed to save changes. Please try again.")}finally{C(!1)}}const j=async R=>{var J;const $=(J=R.target.files)==null?void 0:J[0];if(!(!$||!s||!p))try{T(!0);const X=await kw(s,$);await Ee.from("organizations").update({logo_url:X}).eq("id",p),f(le=>le?{...le,logo_url:X}:null)}catch(X){console.error("Error uploading logo:",X)}finally{T(!1)}};return r?d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA]",children:[d.jsx(Tr,{title:"Settings",left:d.jsx("button",{onClick:e,className:"p-2 -ml-2 text-slate-900",children:d.jsx(hs,{size:24})})}),d.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400 font-bold uppercase tracking-widest text-[13px]",children:"Loading..."})]}):d.jsxs(hr,{showNav:!1,className:"bg-[#FAFAFA]",children:[d.jsx(Tr,{title:"Settings",left:d.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:24})})}),d.jsxs("div",{className:"flex flex-col pb-32",children:[d.jsxs("div",{className:"px-6 py-10 flex flex-col items-center text-center",children:[d.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:j,className:"hidden"}),d.jsxs("button",{onClick:()=>{var R;return(R=M.current)==null?void 0:R.click()},disabled:K,className:"relative w-24 h-24 rounded-[32px] bg-white shadow-xl shadow-slate-900/5 flex items-center justify-center mb-6 cursor-pointer hover:scale-105 transition-all group disabled:opacity-50 border border-slate-50",children:[c!=null&&c.logo_url?d.jsx("img",{src:c.logo_url,alt:"Logo",className:"w-full h-full rounded-[32px] object-cover"}):d.jsx(To,{size:40,className:"text-slate-900"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/60 rounded-[32px] opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Yx,{size:24,className:"text-white"})})]}),d.jsx("h2",{className:"text-[24px] font-black text-slate-900 tracking-tight leading-none",children:(c==null?void 0:c.name)||"Business Name"}),d.jsx("p",{className:"text-[15px] text-slate-400 font-bold uppercase tracking-wider mt-2",children:o})]}),d.jsx(ri,{title:"Business Profile",children:d.jsx(pn,{className:"flex flex-col gap-6",children:x==="business"?d.jsxs(d.Fragment,{children:[d.jsx(jt,{label:"Business Name",value:(c==null?void 0:c.name)||"",onChange:R=>f($=>$?{...$,name:R.target.value}:null)}),d.jsx(ph,{label:"Trade Type",options:JA,value:(c==null?void 0:c.trade_type)||"",onChange:R=>f($=>$?{...$,trade_type:R.target.value}:null)}),d.jsx(jt,{label:"Phone",type:"tel",value:(c==null?void 0:c.phone)||"",onChange:R=>f($=>$?{...$,phone:R.target.value}:null)}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Et,{variant:"secondary",fullWidth:!0,onClick:()=>b(null),children:"Cancel"}),d.jsx(Et,{variant:"primary",fullWidth:!0,onClick:z,disabled:N,children:N?"Saving...":"Save"})]})]}):d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[11px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Trade"}),d.jsx("p",{className:"font-bold text-slate-900",children:(c==null?void 0:c.trade_type)||"Not set"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[11px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Phone"}),d.jsx("p",{className:"font-bold text-slate-900",children:(c==null?void 0:c.phone)||"Not set"})]})]}),d.jsx(Et,{variant:"secondary",fullWidth:!0,onClick:()=>b("business"),children:"Edit Profile"})]})})}),d.jsx(ri,{title:"Pricing & Rates",children:d.jsx(pn,{className:"flex flex-col gap-6",children:x==="pricing"&&g?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(jt,{label:"Hourly Rate",type:"number",value:String(g.hourly_rate_cents/100),onChange:R=>y({...g,hourly_rate_cents:Math.round(parseFloat(R.target.value)*100)})}),d.jsx(jt,{label:"Tax Rate %",type:"number",value:String(g.default_tax_rate||10),onChange:R=>y({...g,default_tax_rate:parseFloat(R.target.value)})})]}),d.jsx(jt,{label:"Materials Markup %",type:"number",value:String(g.materials_markup_percent),onChange:R=>y({...g,materials_markup_percent:parseFloat(R.target.value)})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Et,{variant:"secondary",fullWidth:!0,onClick:()=>b(null),children:"Cancel"}),d.jsx(Et,{variant:"primary",fullWidth:!0,onClick:z,disabled:N,children:"Save"})]})]}):d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-slate-50 p-4 rounded-[20px] border border-slate-100",children:[d.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Hourly Rate"}),d.jsxs("p",{className:"text-[20px] font-black text-slate-900",children:["$",((g==null?void 0:g.hourly_rate_cents)||0)/100]})]}),d.jsxs("div",{className:"bg-slate-50 p-4 rounded-[20px] border border-slate-100",children:[d.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Markup"}),d.jsxs("p",{className:"text-[20px] font-black text-slate-900",children:[(g==null?void 0:g.materials_markup_percent)||0,"%"]})]})]}),d.jsx(Et,{variant:"secondary",fullWidth:!0,onClick:()=>b("pricing"),children:"Edit Rates"})]})})}),d.jsx(ri,{title:"Tools",children:d.jsxs(pn,{onClick:()=>t==null?void 0:t("MaterialsCatalog"),className:"flex items-center gap-4 active:scale-95 transition-transform border-2 border-slate-900",children:[d.jsx("div",{className:"w-12 h-12 rounded-[16px] bg-slate-900 flex items-center justify-center shrink-0",children:d.jsx(Q3,{size:22,className:"text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-black text-slate-900 tracking-tight text-[17px]",children:"Materials Catalog"}),d.jsx("p",{className:"text-[13px] text-slate-400 font-bold uppercase tracking-wider",children:"Manage shortcuts"})]}),d.jsx(Vh,{size:20,className:"text-slate-300"})]})}),d.jsx("div",{className:"px-6 mt-10",children:d.jsxs("button",{onClick:n,className:"w-full h-[60px] rounded-[24px] bg-red-50 text-red-500 font-black uppercase tracking-[0.2em] text-[13px] flex items-center justify-center gap-3 active:scale-95 transition-all",children:[d.jsx(oN,{size:18}),"Sign Out"]})})]})]})}const Ov=["timber","paint","hardware","fasteners","electrical","plumbing","other"],ZA=["each","linear_m","square_m","litre","kg","pack"],QA={timber:"bg-amber-100 text-amber-700",paint:"bg-blue-100 text-blue-700",hardware:"bg-slate-100 text-slate-700",fasteners:"bg-gray-100 text-gray-700",electrical:"bg-yellow-100 text-yellow-700",plumbing:"bg-cyan-100 text-cyan-700",other:"bg-purple-100 text-purple-700"};function XA({onBack:e}){const[t,n]=me.useState([]),[r,i]=me.useState(!0),[s,a]=me.useState(null),[o,l]=me.useState(!1),[c,f]=me.useState({name:"",category:"other",unit:"each",unit_price_cents:0,supplier_name:"",sku_or_code:"",notes:""}),[g,y]=me.useState("all");me.useEffect(()=>{p()},[]);async function p(){try{i(!0);const{data:T,error:M}=await Ee.from("material_catalog_items").select("*").eq("is_active",!0).order("category",{ascending:!0}).order("name",{ascending:!0});if(M)throw M;n(T||[])}catch(T){console.error("Failed to load materials:",T),alert("Failed to load materials")}finally{i(!1)}}async function k(){try{const T={name:c.name.trim(),category:c.category,unit:c.unit,unit_price_cents:Math.round(c.unit_price_cents*100),supplier_name:c.supplier_name.trim()||null,sku_or_code:c.sku_or_code.trim()||null,notes:c.notes.trim()||null};if(!T.name){alert("Material name is required");return}if(s){const{error:M}=await Ee.from("material_catalog_items").update(T).eq("id",s);if(M)throw M}else{const{error:M}=await Ee.from("material_catalog_items").insert([T]);if(M)throw M}a(null),l(!1),b(),p()}catch(T){console.error("Failed to save material:",T),alert("Failed to save material")}}async function _(T){if(confirm("Delete this material? This will not affect existing quotes."))try{const{error:M}=await Ee.from("material_catalog_items").update({is_active:!1}).eq("id",T);if(M)throw M;p()}catch(M){console.error("Failed to delete material:",M),alert("Failed to delete material")}}function A(T){a(T.id),l(!1),f({name:T.name,category:T.category,unit:T.unit,unit_price_cents:T.unit_price_cents/100,supplier_name:T.supplier_name||"",sku_or_code:T.sku_or_code||"",notes:T.notes||""})}function x(){l(!0),a(null),b()}function b(){f({name:"",category:"other",unit:"each",unit_price_cents:0,supplier_name:"",sku_or_code:"",notes:""})}function N(){a(null),l(!1),b()}const C=g==="all"?t:t.filter(T=>T.category===g),K=o||s!==null;return d.jsx(hr,{showNav:!1,className:"bg-[#FAFAFA]",children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsx(Tr,{title:"Materials Catalog",left:d.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(hs,{size:20})}),right:K?null:d.jsx("button",{onClick:x,className:"w-10 h-10 flex items-center justify-center text-primary hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(wo,{size:20})})}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:r?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"text-secondary",children:"Loading..."})}):d.jsxs(d.Fragment,{children:[(o||s)&&d.jsxs("div",{className:"px-6 py-4 bg-white border-b border-slate-200",children:[d.jsx("h3",{className:"text-[12px] font-bold text-secondary uppercase tracking-widest mb-4",children:o?"New Material":"Edit Material"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(jt,{label:"Name",value:c.name,onChange:T=>f({...c,name:T.target.value}),placeholder:"e.g., White primer 4L"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[11px] font-semibold text-secondary uppercase tracking-wider mb-2",children:"Category"}),d.jsx("select",{value:c.category,onChange:T=>f({...c,category:T.target.value}),className:"w-full px-3 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent bg-white",children:Ov.map(T=>d.jsx("option",{value:T,className:"capitalize",children:T},T))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[11px] font-semibold text-secondary uppercase tracking-wider mb-2",children:"Unit"}),d.jsx("select",{value:c.unit,onChange:T=>f({...c,unit:T.target.value}),className:"w-full px-3 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent bg-white",children:ZA.map(T=>d.jsx("option",{value:T,children:T},T))})]})]}),d.jsx(jt,{label:"Price ($)",type:"number",step:"0.01",value:c.unit_price_cents,onChange:T=>f({...c,unit_price_cents:parseFloat(T.target.value)||0}),placeholder:"0.00"}),d.jsx(jt,{label:"Supplier (optional)",value:c.supplier_name,onChange:T=>f({...c,supplier_name:T.target.value}),placeholder:"e.g., Bunnings"}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx(Et,{onClick:N,variant:"ghost",className:"flex-1",children:"Cancel"}),d.jsxs(Et,{onClick:k,className:"flex-1",children:[d.jsx(hN,{className:"w-4 h-4"})," Save"]})]})]})]}),!K&&d.jsx("div",{className:"px-6 py-4 overflow-x-auto no-scrollbar",children:d.jsxs("div",{className:"flex gap-2 pb-2",children:[d.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1.5 rounded-full text-xs font-semibold whitespace-nowrap transition-colors ${g==="all"?"bg-primary text-white":"bg-slate-100 text-slate-600"}`,children:["All (",t.length,")"]}),Ov.map(T=>{const M=t.filter(I=>I.category===T).length;return M===0?null:d.jsxs("button",{onClick:()=>y(T),className:`px-3 py-1.5 rounded-full text-xs font-semibold whitespace-nowrap capitalize transition-colors ${g===T?"bg-primary text-white":"bg-slate-100 text-slate-600"}`,children:[T," (",M,")"]},T)})]})}),d.jsx("div",{className:"px-6 pb-6 space-y-3",children:C.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:d.jsx(cN,{className:"w-8 h-8 text-slate-400"})}),d.jsx("h3",{className:"text-sm font-semibold text-primary mb-1",children:"No materials yet"}),d.jsx("p",{className:"text-xs text-secondary max-w-[240px]",children:t.length===0?"Add your first material to get started with faster quoting":`No ${g} materials found`}),t.length===0&&d.jsxs(Et,{onClick:x,className:"mt-4",children:[d.jsx(wo,{className:"w-4 h-4"})," Add Material"]})]}):C.map(T=>d.jsx(pn,{className:"p-4",children:d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-primary truncate",children:T.name}),d.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full capitalize whitespace-nowrap ${QA[T.category]}`,children:T.category})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-secondary",children:[d.jsxs("span",{className:"font-semibold text-primary",children:["$",(T.unit_price_cents/100).toFixed(2)]}),d.jsxs("span",{className:"text-tertiary",children:["per ",T.unit]})]}),T.supplier_name&&d.jsx("div",{className:"text-[11px] text-tertiary mt-1 truncate",children:T.supplier_name})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{onClick:()=>A(T),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:K,children:d.jsx(uN,{className:"w-4 h-4 text-slate-600"})}),d.jsx("button",{onClick:()=>_(T.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",disabled:K,children:d.jsx(Om,{className:"w-4 h-4 text-red-600"})})]})]})},T.id))})]})})]})})}const Db=({onBack:e,onQuoteCreated:t})=>{const i=(Number.isFinite(NaN),1e3),s=_e=>{const ce=(_e||"").toUpperCase();return ce==="USD"?"US":ce==="GBP"?"UK":ce==="NZD"?"NZ":"AU"},a=_e=>{switch(_e){case"US":return"United States";case"UK":return"United Kingdom";case"NZ":return"New Zealand";case"AU":default:return"Australia"}},o=async _e=>{var ce,Le,De;try{const{regionName:ye,currency:Ne,items:Oe}=_e;if(!Oe||Oe.length===0)return[];const{data:{session:qe}}=await Ee.auth.getSession();if(!qe)throw new Error("No session");const ut=await fetch("https://rhijyaoguokspapkwtrt.supabase.co/functions/v1/openai-proxy",{method:"POST",headers:{Authorization:`Bearer ${qe.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({endpoint:"chat/completions",body:{model:"gpt-4o-mini",temperature:.3,max_tokens:500,messages:[{role:"system",content:"You are a construction materials pricing expert. Estimate realistic UNIT prices (not totals). Be conservative and practical. Return JSON only."},{role:"user",content:`Estimate unit prices for these materials in ${ye}. Currency: ${Ne}. Return JSON with EXACT shape:
{
  "items": [
    { "unit_price_cents": number, "confidence": "low|medium|high", "reasoning": string }
  ]
}
Rules:
- Keep order aligned with input items.
- unit_price_cents must be > 0.
- If unsure, still guess and set confidence="low".

Items:
${Oe.map((Ze,Xt)=>`${Xt+1}. ${Ze.description}  qty ${Ze.quantity} ${Ze.unit}`).join(`
`)}`}],response_format:{type:"json_object"}}})});if(!ut.ok)return null;const Bt=await ut.json(),Ve=JSON.parse(((De=(Le=(ce=Bt.choices)==null?void 0:ce[0])==null?void 0:Le.message)==null?void 0:De.content)||"{}"),Me=Array.isArray(Ve==null?void 0:Ve.items)?Ve.items:null;return Me?Me.map(Ze=>({unit_price_cents:typeof(Ze==null?void 0:Ze.unit_price_cents)=="number"?Math.max(1,Math.round(Ze.unit_price_cents)):0,confidence:(Ze==null?void 0:Ze.confidence)==="low"||(Ze==null?void 0:Ze.confidence)==="medium"||(Ze==null?void 0:Ze.confidence)==="high"?Ze.confidence:"low",reasoning:typeof(Ze==null?void 0:Ze.reasoning)=="string"?Ze.reasoning:""})).slice(0,Oe.length):null}catch(ye){return console.warn("[VoiceRecorder] AI pricing batch failed (non-fatal):",ye),null}},[l,c]=me.useState(!1),[f,g]=me.useState(0),[y,p]=me.useState(!1),[k,_]=me.useState(!1),[A,x]=me.useState(!1),[b,N]=me.useState(null),[C,K]=me.useState([{id:1,label:"Job address",status:"waiting"},{id:2,label:"Customer name",status:"waiting"},{id:3,label:"Scope of work",status:"waiting"},{id:4,label:"Materials needed",status:"waiting"},{id:5,label:"Time to complete",status:"waiting"},{id:6,label:"Additional charges",status:"waiting"}]),T=!1,M=me.useRef(null),I=me.useRef(""),[S,z]=me.useState(null),j=me.useRef(null),R=me.useRef(null),[$,J]=me.useState(0),X=me.useRef(0),le=me.useRef(null),de=()=>{const _e=Date.now();X.current=_e,!le.current&&(le.current=window.setTimeout(()=>{J(X.current),le.current=null},220))},Z=_e=>{R.current=_e,!j.current&&(j.current=window.setTimeout(()=>{z(R.current),j.current=null},180))},[se,ve]=me.useState(null),[fe,P]=me.useState(null),q=me.useRef(null),G=me.useRef(new Map),Y=me.useRef(null),Q=me.useRef([]),ae=me.useRef(null),te=me.useRef(null),ge=me.useRef(!1),xe=me.useRef(null),je=me.useRef(!1),Ue=me.useRef([]),Te=me.useRef(null),We=me.useRef(null),F=me.useRef(null),re=me.useRef(null),Ie=me.useRef(""),ze=me.useRef(null),we=me.useRef(!1),Xe=me.useRef(0),$e=6,Ye=me.useRef(null),et=(_e,ce,Le)=>{var Bt;const De=!!(Le!=null&&Le.preferPatch),ye={..._e||{}},Ne=Ve=>typeof Ve=="string"&&Ve.trim().length>0?Ve.trim():null,Oe=Ve=>typeof Ve=="number"&&Number.isFinite(Ve)?Ve:null,qe=(Ve,Me)=>{if(ye[Ve]===null||ye[Ve]===void 0||typeof ye[Ve]=="string"&&ye[Ve].trim()===""){Me!=null&&(ye[Ve]=Me);return}De&&Me!==null&&Me!==void 0&&(ye[Ve]=Me)};if(qe("customerName",Ne(ce==null?void 0:ce.customerName)),qe("jobLocation",Ne(ce==null?void 0:ce.jobLocation)),qe("jobTitle",Ne(ce==null?void 0:ce.jobTitle)),qe("timeline",Ne(ce==null?void 0:ce.timeline)),!ye.scopeOfWork||Array.isArray(ye.scopeOfWork)&&ye.scopeOfWork.length===0||De){const Ve=ce==null?void 0:ce.scopeOfWork;if(Array.isArray(Ve)){const Me=Ve.filter(Ze=>typeof Ze=="string"&&Ze.trim().length>0).map(Ze=>Ze.trim());Me.length>0&&(ye.scopeOfWork=Me)}else typeof Ve=="string"&&Ve.trim().length>0&&(ye.scopeOfWork=[Ve.trim()])}const ut=Array.isArray(ce==null?void 0:ce.materials)?ce.materials:[];Array.isArray(ye.materials)||(ye.materials=[]);for(const Ve of ut){const Me=Ne(Ve==null?void 0:Ve.name);if(!Me)continue;const Ze=Ne(Ve==null?void 0:Ve.unit)||"unit",Xt=Oe(Ve==null?void 0:Ve.quantity)??1,ct=ye.materials.findIndex(It=>((It==null?void 0:It.name)||"").toLowerCase()===Me.toLowerCase());if(ct===-1)ye.materials.push({name:Me,unit:Ze,quantity:Xt});else{De&&Ze&&(ye.materials[ct].unit=Ze);const It=typeof((Bt=ye.materials[ct])==null?void 0:Bt.quantity)=="number"?ye.materials[ct].quantity:0;Xt>It&&(ye.materials[ct].quantity=Xt)}}if(qe("laborHours",Oe(ce==null?void 0:ce.laborHours)),!Array.isArray(ye.fees)||ye.fees.length===0){const Me=(Array.isArray(ce==null?void 0:ce.fees)?ce.fees:Array.isArray(ce==null?void 0:ce.additionalFees)?ce.additionalFees:[]).map(Ze=>({description:Ne(Ze==null?void 0:Ze.description),amount:Oe(Ze==null?void 0:Ze.amount)})).filter(Ze=>Ze.description);Me.length>0&&(ye.fees=Me)}return ye};me.useEffect(()=>{console.log("[VERIFICATION] Old polling system removed - only useEffect polling remains")},[]),me.useEffect(()=>()=>{if(ae.current&&clearInterval(ae.current),q.current&&clearInterval(q.current),G.current.forEach(_e=>clearTimeout(_e)),te.current&&te.current.getTracks().forEach(_e=>_e.stop()),xe.current&&(xe.current.stop(),xe.current=null),re.current&&(cancelAnimationFrame(re.current),re.current=null),M.current&&(clearTimeout(M.current),M.current=null),j.current&&(clearTimeout(j.current),j.current=null),le.current&&(clearTimeout(le.current),le.current=null),Te.current){try{Te.current.close()}catch{}Te.current=null}We.current=null,F.current=null},[]);const Ut=()=>{re.current&&(cancelAnimationFrame(re.current),re.current=null);for(let _e=0;_e<Ue.current.length;_e++){const ce=Ue.current[_e];ce&&(ce.style.height="12%")}if(Te.current){try{Te.current.close()}catch{}Te.current=null}We.current=null,F.current=null},Lt=_e=>{try{Ut();const ce=window.AudioContext||window.webkitAudioContext;if(!ce)return;const Le=new ce;Te.current=Le,Le.resume().catch(()=>{});const De=Le.createAnalyser();De.fftSize=256,De.smoothingTimeConstant=.8,We.current=De,F.current=new Uint8Array(De.frequencyBinCount),Le.createMediaStreamSource(_e).connect(De);const Ne=Oe=>{const qe=We.current,ut=F.current;if(!je.current||!qe||!ut){re.current=null;return}qe.getByteFrequencyData(ut);let Bt=0;const Ve=Math.min(ut.length,48);for(let Ze=2;Ze<Ve;Ze++)Bt+=ut[Ze];Bt/Math.max(1,Ve-2)/255>.06&&de();for(let Ze=0;Ze<16;Ze++){const Xt=Ue.current[Ze];if(!Xt)continue;const ct=Math.floor(Ze*(ut.length*.6)/16),It=ut[ct]/255,Ot=.05*Math.sin(Oe/200+Ze),dn=Math.max(12,Math.min(100,(It+Ot)*100));Xt.style.height=`${dn}%`}re.current=requestAnimationFrame(Ne)};re.current=requestAnimationFrame(Ne)}catch(ce){console.warn("[VoiceRecorder] Visualizer init failed (non-fatal):",ce)}};me.useEffect(()=>{const ce=C.filter(De=>De.id<=5).every(De=>De.status==="complete"),Le=C.every(De=>De.status==="complete");C.filter(De=>De.status==="complete").length,fe?(console.log("[VoiceRecorder] v2 - Quote created, using callback navigation:",fe),console.log("[VoiceRecorder] v2 - onQuoteCreated callback exists:",!!t),lt(),t?(console.log("[VoiceRecorder] v2 - Calling onQuoteCreated NOW"),t(fe)):(console.log("[VoiceRecorder] v2 - No onQuoteCreated callback, calling onBack"),e())):(ce||Le)&&se&&!fe&&console.log("[VoiceRecorder] Checklist complete but quote not created yet. Waiting for quote creation...",{voiceQuoteId:se,createdQuoteId:fe})},[C,se,fe]);const ft=_e=>{const ce=_e.toLowerCase(),Le={1:[{pattern:/\b(\d{1,5}\s+[a-z0-9\s]{2,40}\b(?:street|st|road|rd|avenue|ave|drive|dr|lane|ln|court|ct|way|place|pl|boulevard|blvd)\b(?:\s+[a-z]+){0,3})\b/i,requiresContext:!0},{pattern:/\baddress\s*(?:is|at)?\s*([0-9][^.,]{6,80})/i,requiresContext:!0}],2:[{pattern:/\bname\s+is\s+([a-z]+(?:\s+[a-z]+){0,2})\b/i,requiresContext:!0},{pattern:/\b(?:customer|client)\s+name\s*(?:is)?\s*([a-z]+(?:\s+[a-z]+){0,2})\b/i,requiresContext:!0},{pattern:/\bcustom\s+name\s*(?:is)?\s*([a-z]+(?:\s+[a-z]+){0,2})\b/i,requiresContext:!0}],3:[{pattern:/\b((?:build|install|repair|replace|paint|fix|remove|demolish|construct|fit|hang|mount|plaster|tile|wire|plumb)[^.,]{6,80})/i,requiresContext:!0},{pattern:/\bscope(?:\s+of)?\s+work\s*(?:is|:)?\s*([^.,]{6,120})/i,requiresContext:!0}],4:[{pattern:/\bmaterials?\s*(?:needed|are|include|includes|:)\s*([^.,]{3,120})/i,requiresContext:!0},{pattern:/\bneed\s+(?:some\s+)?(?:materials?|)([^.,]{3,120})/i,requiresContext:!0},{pattern:/\bmaterial\s+list\s*(?:is|:)?\s*([^.,]{3,120})/i,requiresContext:!0}],5:[{pattern:/\b(\d+\s*(?:hours?|days?|weeks?))\b/i,requiresContext:!0},{pattern:/\b((?:one|two|three|four|five|six|seven|eight|nine|ten)\s+(?:hours?|days?|weeks?))\b/i,requiresContext:!0},{pattern:/\btime(?:\s+to)?\s+complete\s*(?:is|:)?\s*([^.,]{3,40})/i,requiresContext:!0}],6:[{pattern:/\b(?:fees?|charges?)\s*(?:include|are|is|:)?\s*([^.,]{3,80})/i,requiresContext:!0},{pattern:/\b(travel\s+time|travel\s+fee|callout\s+fee|waste\s+disposal|delivery\s+fee)\b/i,requiresContext:!0},{pattern:/\bbunnings\s+run\b/i,requiresContext:!0}]};K(De=>De.map(ye=>{if(ye.status==="complete")return ye;const Ne=Le[ye.id]||[];let Oe=!1;for(const qe of Ne){const ut=ce.match(qe.pattern);if(ut&&qe.requiresContext&&(ut[1]||ut[0]||"").trim().length>2){Oe=!0;break}}if(Oe)return je.current&&ye.status==="waiting"?{...ye,status:"detecting"}:ye;if(je.current&&ye.status==="waiting"){const qe=ce;if(ye.id===2&&(qe.includes("customer name")||qe.includes("client name")||qe.includes("custom name")||qe.includes("customer")||qe.includes("client"))||ye.id===3&&(qe.includes("scope of work")||qe.includes("scope")||qe.includes("work"))||ye.id===4&&(qe.includes("materials")||qe.includes("material")||qe.includes("supplies"))||ye.id===5&&(qe.includes("time to complete")||qe.includes("time")||qe.includes("days")||qe.includes("hours"))||ye.id===6&&(qe.includes("additional")||qe.includes("fees")||qe.includes("fee")||qe.includes("charges")||qe.includes("bunnings")))return{...ye,status:"detecting"}}return ye}))},Ct=()=>{!Ie.current||Ie.current.trim().length<12||we.current||Xe.current>=$e||(ze.current&&clearTimeout(ze.current),ze.current=window.setTimeout(async()=>{var _e,ce,Le;try{we.current=!0,Xe.current+=1;const{data:{session:De}}=await Ee.auth.getSession();if(!De)return;const ye=Ie.current.trim().slice(-1200),Ne=await fetch("https://rhijyaoguokspapkwtrt.supabase.co/functions/v1/openai-proxy",{method:"POST",headers:{Authorization:`Bearer ${De.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({endpoint:"chat/completions",body:{model:"gpt-4o-mini",messages:[{role:"system",content:`Extract structured quote details from partial speech text (may include mumbling, slang, abbreviations). Be conservative: only fill fields if clearly mentioned, but DO handle common trade slang and casual phrasing. Write scope items as professional action phrases (e.g., "Build and install custom shelving" instead of "and shelves"). Do not drop descriptive adjectives like "custom", "premium", or "detailed".

IMPORTANT: scopeOfWork can be very detailed. When you can, split into multiple short deliverables (each <= 90 chars). Prefer 38 items for partial snippets.

For fuzzy quantities: "a couple"=2, "a few"=3, "some"=1, "heaps"=10 (choose a reasonable number). Keep vague materials like "fixings/hardware/glue/paint" as material items (never drop them). Return JSON only.`},{role:"user",content:`Partial transcript (may be incomplete):

${ye}

Return JSON with this exact structure:
{
  "customerName": "string or null",
  "jobTitle": "string or null",
  "jobLocation": "string or null",
  "scopeOfWork": ["string"] or null,
  "timeline": "string or null",
  "materials": [{"name": "string", "quantity": number, "unit": "string"}],
  "laborHours": number or null,
  "fees": [{"description": "string", "amount": number}] or null
}`}],response_format:{type:"json_object"}}})});if(!Ne.ok)return;const Oe=await Ne.json(),qe=JSON.parse(((Le=(ce=(_e=Oe.choices)==null?void 0:_e[0])==null?void 0:ce.message)==null?void 0:Le.content)||"{}"),ut=et(Ye.current,qe);Ye.current=ut,At(ut,{confirmed:!1})}catch(De){console.warn("[VoiceRecorder] Incremental extraction failed (non-fatal):",De)}finally{we.current=!1}},900))},At=(_e,ce)=>{const Le=!!(ce!=null&&ce.confirmed);Z(_e),K(De=>De.map(Ne=>{var qe;if(Ne.status==="complete")return Ne;let Oe=!1;if(Ne.id===1&&_e.jobLocation&&(Oe=!0),Ne.id===2&&_e.customerName&&(Oe=!0),Ne.id===3&&_e.jobTitle&&(Oe=!0),Ne.id===4&&((qe=_e.materials)==null?void 0:qe.length)>0&&(Oe=!0),Ne.id===5&&(_e.laborHours||_e.timeline)&&(Oe=!0,_e.laborHours),Ne.id===6&&(_e.fees&&(Array.isArray(_e.fees)?_e.fees.length>0:Object.keys(_e.fees).length>0)?Oe=!0:Oe=!1),Oe){const ut=G.current.get(`item-${Ne.id}`);return ut&&(clearTimeout(ut),G.current.delete(`item-${Ne.id}`)),Le?{...Ne,status:"complete"}:Ne.status==="detecting"?Ne:{...Ne,status:"detecting"}}else Ne.status;return Ne}))};me.useEffect(()=>{if(!se)return;const _e=Date.now(),ce=G.current,Le=window.setInterval(async()=>{if(Date.now()-_e>6e4){console.log("[VoiceRecorder] Polling timeout reached (60s)"),clearInterval(Le),q.current=null;return}const{data:ye,error:Ne}=await Ee.from("voice_quotes").select("quote_data, status").eq("id",se).single();if(Ne){console.error("[VoiceRecorder] Polling error:",Ne);return}if(console.log("POLLING RESULT:",ye),ye&&ye.quote_data){const Oe=ye.status==="extracted"||ye.status==="complete"||ye.status==="creating_quote";At(ye.quote_data,{confirmed:Oe})}else console.log("[VoiceRecorder] No quote_data found in polling result, status:",ye==null?void 0:ye.status)},2e3);return q.current=Le,()=>{console.log("[VoiceRecorder] Cleanup: clearing interval and timeouts"),clearInterval(Le),q.current=null;const De=ce.size;ce.forEach(ye=>clearTimeout(ye)),ce.clear(),console.log("[VoiceRecorder] Cleanup: cleared",De,"timeouts")}},[se]);const tt=async()=>{try{console.log("[VoiceRecorder] Requesting microphone access...");const _e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});te.current=_e,console.log("[VoiceRecorder] Microphone access granted"),Lt(_e),Q.current=[],ge.current=!1,K([{id:1,label:"Job address",status:"waiting"},{id:2,label:"Customer name",status:"waiting"},{id:3,label:"Scope of work",status:"waiting"},{id:4,label:"Materials needed",status:"waiting"},{id:5,label:"Time to complete",status:"waiting"},{id:6,label:"Additional charges",status:"waiting"}]);const ce=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":MediaRecorder.isTypeSupported("audio/mp4")?"audio/mp4":"";console.log("[VoiceRecorder] Using MIME type:",ce||"default");const Le=ce?new MediaRecorder(_e,{mimeType:ce}):new MediaRecorder(_e);Y.current=Le,Le.ondataavailable=ye=>{console.log("[VoiceRecorder] Data available:",ye.data.size,"bytes"),ye.data&&ye.data.size>0&&Q.current.push(ye.data)},Le.onstart=()=>{if(console.log("[VoiceRecorder] Recording started"),Ie.current="",Ye.current=null,Xe.current=0,"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const ye=window.webkitSpeechRecognition||window.SpeechRecognition,Ne=new ye;Ne.continuous=!0,Ne.interimResults=!0,Ne.lang="en-AU";try{const Oe=window.webkitSpeechGrammarList||window.SpeechGrammarList;if(Oe){const qe=new Oe,Bt=`#JSGF V1.0; grammar smash; public <phrase> = ${["job address","address","customer name","custom name","client name","scope of work","scope","materials needed","material list","materials","time to complete","timeline","additional charges","fees","bunnings run","travel fee","callout fee","fixings","gyprock","liquid nails"].join(" | ")} ;`;qe.addFromString(Bt,1),Ne.grammars=qe}}catch{}Ne.onresult=Oe=>{let qe="",ut="";for(let Ve=Oe.resultIndex;Ve<Oe.results.length;Ve++){const Me=Oe.results[Ve][0].transcript;Oe.results[Ve].isFinal?ut+=Me+" ":qe+=Me}const Bt=Ve=>{I.current=Ve,!M.current&&(M.current=window.setTimeout(()=>{const Me=I.current;I.current="",M.current=null,Me&&Me.trim()&&ft(Me.trim())},140))};ut.trim()?(de(),Bt(ut.trim()),Ie.current=`${Ie.current} ${ut.trim()}`.trim(),Ct()):qe.trim()&&(de(),Bt(qe.trim()))},Ne.onerror=Oe=>{console.warn("[VoiceRecorder] Speech recognition error:",Oe.error)},Ne.onend=()=>{if(je.current&&!ge.current)try{Ne.start()}catch(Oe){console.warn("[VoiceRecorder] Could not restart speech recognition:",Oe)}};try{Ne.start(),xe.current=Ne,console.log("[VoiceRecorder] Real-time speech recognition started")}catch(Oe){console.warn("[VoiceRecorder] Could not start speech recognition:",Oe)}}else console.warn("[VoiceRecorder] Speech recognition not supported in this browser")},Le.onstop=async()=>{if(console.log("[VoiceRecorder] Recording stopped, total chunks:",Q.current.length),ge.current)return;if(ge.current=!0,Q.current.length===0){console.error("[VoiceRecorder] No audio data captured"),alert("No audio was captured. Please try again."),c(!1),te.current&&te.current.getTracks().forEach(Ne=>Ne.stop());return}const ye=new Blob(Q.current,{type:ce||"audio/webm"});console.log("[VoiceRecorder] Created audio blob:",ye.size,"bytes"),te.current&&te.current.getTracks().forEach(Ne=>Ne.stop()),Ut(),await it(ye)},Le.onerror=ye=>{console.error("[VoiceRecorder] Recorder error:",ye.error),alert("Recording error: "+ye.error)},Le.start(1e3),console.log("[VoiceRecorder] Recorder.start() called with 1000ms timeslice"),je.current=!0,c(!0),g(0);const De=Date.now();ae.current=window.setInterval(()=>{const ye=Math.floor((Date.now()-De)/1e3);g(ye),ye>=60&&(console.log("[VoiceRecorder] Max time reached, stopping..."),pt())},1e3)}catch(_e){console.error("[VoiceRecorder] Error starting recording:",_e),alert("Could not access microphone. Please check permissions and try again."),c(!1)}},pt=()=>{if(console.log("[VoiceRecorder] stopRecording called"),xe.current)try{xe.current.stop(),xe.current=null,console.log("[VoiceRecorder] Speech recognition stopped")}catch(_e){console.warn("[VoiceRecorder] Error stopping speech recognition:",_e)}ae.current&&(clearInterval(ae.current),ae.current=null),je.current=!1,Ut(),Y.current&&Y.current.state==="recording"&&(console.log("[VoiceRecorder] Stopping MediaRecorder"),Y.current.stop(),c(!1))},it=async _e=>{p(!0),console.log("[VoiceRecorder] Starting upload, blob size:",_e.size);try{const{data:{user:ce}}=await Ee.auth.getUser();if(!ce)throw new Error("User not authenticated");console.log("[VoiceRecorder] User ID:",ce.id);const{data:Le,error:De}=await Ee.from("users").select("org_id").eq("id",ce.id).maybeSingle();if(De)throw console.error("[VoiceRecorder] User query error:",De),new Error("Failed to get user organization: "+De.message);if(!Le)throw new Error("User organization not found");const ye=Le.org_id;console.log("[VoiceRecorder] Org ID:",ye);const Ne=`${crypto.randomUUID()}.webm`,Oe=`${ye}/${Ne}`;console.log("[VoiceRecorder] Upload path:",Oe);const{error:qe}=await Ee.storage.from("audio").upload(Oe,_e,{contentType:_e.type||"audio/webm",cacheControl:"3600",upsert:!1});if(qe)throw console.error("[VoiceRecorder] Upload error:",qe),qe;console.log("[VoiceRecorder] Upload successful");const{data:{publicUrl:ut}}=Ee.storage.from("audio").getPublicUrl(Oe);console.log("[VoiceRecorder] Public URL:",ut),await xn(ut,ye,_e)}catch(ce){console.error("[VoiceRecorder] Upload failed:",ce),alert("Failed to upload recording: "+(ce.message||"Unknown error")),p(!1),c(!1)}},xn=async(_e,ce,Le)=>{try{console.log("[VoiceRecorder] Saving to database:",{audioUrl:_e,orgId:ce});const{data:De,error:ye}=await Ee.from("voice_quotes").insert({org_id:ce,audio_url:_e,status:"recorded"}).select().single();if(ye)throw console.error("[VoiceRecorder] Database insert error:",ye),ye;if(console.log("[VoiceRecorder] Recording saved to database:",De),ve(De.id),Ye.current)try{await Ee.from("voice_quotes").update({quote_data:Ye.current}).eq("id",De.id)}catch(Ne){console.warn("[VoiceRecorder] Failed to persist draft quote_data (non-fatal):",Ne)}await Rt(De.id,_e,Le)}catch(De){throw console.error("[VoiceRecorder] Database save failed:",De),De}},Rt=async(_e,ce,Le)=>{try{console.log("[VoiceRecorder] Starting transcription for:",_e),await Ee.from("voice_quotes").update({status:"transcribing"}).eq("id",_e);const De=Le||await(async()=>{const Ve=await fetch(ce);if(!Ve.ok)throw new Error(`Failed to fetch audio: ${Ve.status} ${Ve.statusText}`);return await Ve.blob()})(),ye=new FormData;ye.append("endpoint","audio/transcriptions"),ye.append("file",De,"audio.webm"),ye.append("model","whisper-1"),ye.append("language","en");const{data:{session:Ne}}=await Ee.auth.getSession();if(!Ne)throw new Error("No session");const Oe="https://rhijyaoguokspapkwtrt.supabase.co/functions/v1/openai-proxy";console.log("[VoiceRecorder] Calling OpenAI proxy:",Oe);const qe=await fetch(Oe,{method:"POST",headers:{Authorization:`Bearer ${Ne.access_token}`},body:ye});if(!qe.ok){const Ve=await qe.text().catch(()=>"Unknown error");throw new Error(`Transcription failed: ${qe.status} ${qe.statusText} - ${Ve}`)}const Bt=(await qe.json()).text;if(!Bt)throw new Error("Transcription returned empty text");console.log("[VoiceRecorder] Transcript:",Bt),N(Bt),await Ee.from("voice_quotes").update({status:"transcribed",transcript:Bt}).eq("id",_e),await _t(_e,Bt)}catch(De){console.error("[VoiceRecorder] Processing failed:",De);const ye=(De==null?void 0:De.message)||String(De);console.error("[VoiceRecorder] Error details:",{message:ye,stack:De==null?void 0:De.stack,voiceQuoteId:_e});try{const{error:Ne}=await Ee.from("voice_quotes").update({status:"failed"}).eq("id",_e);Ne?console.error("[VoiceRecorder] Failed to update status:",Ne):console.log("[VoiceRecorder] Updated voice quote status to failed")}catch(Ne){console.error("[VoiceRecorder] Failed to update status:",Ne)}}},_t=async(_e,ce)=>{try{console.log("[VoiceRecorder] Extracting quote data..."),_(!0),await Ee.from("voice_quotes").update({status:"extracting"}).eq("id",_e);const{data:{session:Le}}=await Ee.auth.getSession();if(!Le)throw new Error("No session");const De=await fetch("https://rhijyaoguokspapkwtrt.supabase.co/functions/v1/openai-proxy",{method:"POST",headers:{Authorization:`Bearer ${Le.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({endpoint:"chat/completions",body:{model:"gpt-4o-mini",messages:[{role:"system",content:`Extract structured quote information from voice transcripts (mumbling/slang/abbreviations possible). Write professional, high-detail action items for jobTitle and scopeOfWork. Preserve verbs + adjectives exactly (e.g., if the user says "build and fit custom shelves", keep that meaning, not "and shelves"). Ensure items are grammatically complete and do not start with fragments like "and".

IMPORTANT: Scope of work can be very detailed. Produce a list of deliverables:
- scopeOfWork MUST be an array of short, clear deliverables (split big sentences into multiple items).
- Prefer 412 items when possible.
- Each item should be <= 90 characters.

Be tolerant:
- Understand common AU trade slang: bunnings run, fixings, hardware, sparky, chippy, arvo, reno, studs, noggins, gyprock, liquid nails/goop.
- Keep vague materials as material items (never drop them): "fixings", "hardware", "glue", "paint", "timber".
- Convert fuzzy quantities to reasonable numbers: "a couple"=2, "a few"=3, "some"=1, "heaps"=10.
- If a material has no explicit quantity, use 1.
- If a unit is unclear, use "unit".
- For time ranges like "three to four days", set timeline as "3-4 days".
- If a fee is described without an amount, include it with amount null.

If a field is not mentioned, use null. Return JSON only.`},{role:"user",content:`Extract quote information from this transcript:

${ce}

Return JSON with this exact structure:
{
  "customerName": "string or null",
  "jobTitle": "string or null (brief description of the work)",
  "jobLocation": "string or null (address or location)",
  "scopeOfWork": ["string"] or null,
  "timeline": "string or null",
  "materials": [{"name": "string", "quantity": number, "unit": "string"}],
  "laborHours": number or null,
  "fees": [{"description": "string", "amount": number}] or null
}`}],response_format:{type:"json_object"}}})});if(!De.ok)throw new Error("Extraction failed");const ye=await De.json(),Ne=JSON.parse(ye.choices[0].message.content);console.log("[VoiceRecorder] Extracted data:",Ne);const Oe=et(Ye.current,Ne,{preferPatch:!0}),{error:qe}=await Ee.from("voice_quotes").update({quote_data:Oe,status:"extracted"}).eq("id",_e);qe?console.error("[VoiceRecorder] Failed to update quote_data:",qe):(console.log("[VoiceRecorder] Successfully updated quote_data in database"),At(Oe,{confirmed:!0}),await Nt(_e,Oe))}catch(Le){console.error("[VoiceRecorder] Extraction failed:",Le),await Ee.from("voice_quotes").update({status:"failed"}).eq("id",_e)}},Nt=async(_e,ce)=>{try{console.log("[VoiceRecorder] Creating quote from extracted data..."),_(!1),x(!0);const{data:Le,error:De}=await Ee.from("voice_quotes").select("org_id, customer_id").eq("id",_e).single();if(De||!Le)throw new Error("Failed to fetch voice quote: "+(De==null?void 0:De.message));const{data:{session:ye}}=await Ee.auth.getSession();if(!ye)throw new Error("No session");const{data:{user:Ne}}=await Ee.auth.getUser();if(!Ne)throw new Error("User not authenticated");let Oe=null;try{const{data:ct,error:It}=await Ee.rpc("get_effective_pricing_profile",{p_user_id:Ne.id});It||(Oe=ct)}catch(ct){console.warn("[VoiceRecorder] Pricing profile fetch failed (non-fatal):",ct)}let qe=Le.customer_id;if(!qe)if(ce.customerName){const{data:ct}=await Ee.from("customers").select("id").eq("org_id",Le.org_id).ilike("name",ce.customerName).maybeSingle();if(ct)qe=ct.id;else{const{data:It,error:Ot}=await Ee.from("customers").insert({org_id:Le.org_id,name:ce.customerName,created_by_user_id:Ne.id}).select().single();if(Ot||!It)throw new Error("Failed to create customer: "+(Ot==null?void 0:Ot.message));qe=It.id}}else{const{data:ct,error:It}=await Ee.from("customers").insert({org_id:Le.org_id,name:"Voice Quote Customer",created_by_user_id:Ne.id}).select().single();if(It||!ct)throw new Error("Failed to create placeholder customer: "+(It==null?void 0:It.message));qe=ct.id}const{data:ut,error:Bt}=await Ee.rpc("generate_quote_number",{p_org_id:Le.org_id});if(Bt||!ut)throw new Error("Failed to generate quote number: "+(Bt==null?void 0:Bt.message));const Ve=Array.isArray(ce==null?void 0:ce.scopeOfWork)?ce.scopeOfWork.filter(ct=>typeof ct=="string"&&ct.trim().length>0).map(ct=>ct.trim()):typeof(ce==null?void 0:ce.scopeOfWork)=="string"&&ce.scopeOfWork.trim().length>0?[ce.scopeOfWork.trim()]:typeof(ce==null?void 0:ce.jobTitle)=="string"&&ce.jobTitle.trim().length>0?[ce.jobTitle.trim()]:null,{data:Me,error:Ze}=await Ee.from("quotes").insert({org_id:Le.org_id,customer_id:qe,quote_number:ut,title:ce.jobTitle||"Voice Quote",scope_of_work:Ve,site_address:ce.jobLocation||null,source:"voice",created_by_user_id:Ne.id}).select().single();if(Ze)throw new Error("Failed to create quote: "+Ze.message);console.log("[VoiceRecorder] Quote created:",Me.id);const Xt=[];if(ce.materials&&Array.isArray(ce.materials)){const ct=ce.materials.filter(He=>typeof(He==null?void 0:He.name)=="string"&&He.name.trim().length>0).map(He=>({description:He.name.trim(),quantity:typeof He.quantity=="number"&&Number.isFinite(He.quantity)&&He.quantity>0?He.quantity:1,unit:typeof He.unit=="string"&&He.unit.trim().length>0?He.unit.trim():"unit"})),It=((Oe==null?void 0:Oe.default_currency)||"AUD").toUpperCase(),Ot=s(It),dn=a(Ot);let Ln=null;const Ei={};if(ct.length>0)try{const He=ct.map(wn=>({description:wn.description,unit:wn.unit})),{data:an,error:Wt}=await Ee.rpc("match_catalog_items_for_quote_materials",{p_org_id:Le.org_id,p_region_code:Ot,p_materials:He});if(!Wt&&Array.isArray(an)){Ln=an;const wn=an.map(en=>en==null?void 0:en.catalog_item_id).filter(en=>typeof en=="string");if(wn.length>0){const{data:en}=await Ee.from("material_catalog_items").select("id, unit_price_cents, typical_low_price_cents, typical_high_price_cents, unit").in("id",wn);(en||[]).forEach(di=>{Ei[di.id]=di})}}}catch(He){console.warn("[VoiceRecorder] Catalog matching failed (non-fatal):",He)}const Mn=ct.map((He,an)=>{let Wt=0,wn=null,en=null,di=!1;if(Ln){const Li=Ln[an];if(wn=typeof(Li==null?void 0:Li.catalog_item_id)=="string"?Li.catalog_item_id:null,wn&&Ei[wn]){const Wr=Ei[wn],Ws=typeof Wr.unit_price_cents=="number"?Wr.unit_price_cents:null,Fo=typeof Wr.typical_low_price_cents=="number"?Wr.typical_low_price_cents:null,Vs=typeof Wr.typical_high_price_cents=="number"?Wr.typical_high_price_cents:null,Do=Fo!==null&&Vs!==null?Math.round((Fo+Vs)/2):null;Wt=Ws??Do??0}}return{description:He.description,quantity:He.quantity,unit:He.unit,unitPriceCents:typeof Wt=="number"&&Number.isFinite(Wt)?Math.max(0,Math.round(Wt)):0,catalogItemId:wn,notes:en,needsReview:di}}),fr=Mn.map((He,an)=>({p:He,idx:an})).filter(({p:He})=>!He.unitPriceCents||He.unitPriceCents<=0).map(({idx:He})=>He);if(fr.length>0){const He=fr.map(Wt=>({description:Mn[Wt].description,unit:Mn[Wt].unit,quantity:Mn[Wt].quantity})),an=await o({regionName:dn,currency:It,items:He});if(an&&an.length>0)for(let Wt=0;Wt<fr.length;Wt++){const wn=fr[Wt],en=an[Wt];en&&typeof en.unit_price_cents=="number"&&en.unit_price_cents>0&&(Mn[wn].unitPriceCents=Math.max(1,Math.round(en.unit_price_cents)),Mn[wn].needsReview=en.confidence==="low",Mn[wn].notes=`AI estimated (${en.confidence} confidence) - ${en.reasoning}. Please review and adjust if needed.`)}}for(const He of Mn)(!He.unitPriceCents||He.unitPriceCents<=0)&&(He.unitPriceCents=i,He.needsReview=!0,He.notes="Default price applied (AI/catalog unavailable). Please update with actual pricing.");console.log("[VoiceRecorder] Material pricing decisions:",Mn.map(He=>({description:He.description,unit:He.unit,quantity:He.quantity,unitPriceCents:He.unitPriceCents,source:He.catalogItemId?"catalog":typeof He.notes=="string"&&He.notes.toLowerCase().startsWith("ai estimated")?"ai":"fallback",needsReview:He.needsReview})));const Nr=Oe==null?void 0:Oe.materials_markup_percent;if(typeof Nr=="number"&&Number.isFinite(Nr)&&Nr>0)for(const He of Mn)He.unitPriceCents>0&&(He.unitPriceCents=Math.round(He.unitPriceCents*(1+Nr/100)));for(const He of Mn){const an=He.quantity,Wt=He.unitPriceCents;Xt.push({org_id:Le.org_id,quote_id:Me.id,position:Xt.length+1,item_type:"materials",description:He.description,quantity:an,unit:He.unit,catalog_item_id:He.catalogItemId,unit_price_cents:Wt,line_total_cents:Math.max(0,Math.round(Wt*an)),notes:He.notes,is_needs_review:He.needsReview,is_placeholder:!1})}}if(ce.laborHours){const ct=typeof(Oe==null?void 0:Oe.hourly_rate_cents)=="number"&&Number.isFinite(Oe.hourly_rate_cents)?Math.round(Oe.hourly_rate_cents):0;Xt.push({org_id:Le.org_id,quote_id:Me.id,position:Xt.length+1,item_type:"labour",description:"Labor",quantity:ce.laborHours,unit:"hours",unit_price_cents:ct,line_total_cents:Math.max(0,Math.round(ct*ce.laborHours))})}if(Array.isArray(ce==null?void 0:ce.fees)&&ce.fees.length>0)for(const ct of ce.fees){const It=typeof(ct==null?void 0:ct.description)=="string"?ct.description.trim():"",Ot=typeof(ct==null?void 0:ct.amount)=="number"&&Number.isFinite(ct.amount)?ct.amount:null;if(!It)continue;const dn=Ot!==null?Math.max(0,Math.round(Ot*100)):0;Xt.push({org_id:Le.org_id,quote_id:Me.id,position:Xt.length+1,item_type:"fee",description:It,quantity:1,unit:"service",unit_price_cents:dn,line_total_cents:dn})}if(Xt.length>0){const{error:ct}=await Ee.from("quote_line_items").insert(Xt);ct?console.error("[VoiceRecorder] Failed to create line items:",ct):console.log("[VoiceRecorder] Created",Xt.length,"line items")}await Ee.from("voice_quotes").update({status:"complete",quote_data:{...ce,created_quote_id:Me.id}}).eq("id",_e),console.log("[VoiceRecorder] Quote creation complete"),P(Me.id)}catch(Le){console.error("[VoiceRecorder] Quote creation failed:",Le),await Ee.from("voice_quotes").update({status:"failed"}).eq("id",_e)}},sn=_e=>{const ce=Math.floor(_e/60),Le=_e%60;return`${ce}:${Le.toString().padStart(2,"0")}`},lt=()=>{q.current&&(console.log("[VoiceRecorder] Stopping polling"),clearInterval(q.current),q.current=null)};return d.jsxs("div",{className:"h-full w-full bg-white flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between px-6 py-5 shrink-0",children:[d.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Voice Quote"}),d.jsx("button",{onClick:e,disabled:y,className:"text-[15px] font-medium text-slate-500 hover:text-slate-900 transition-colors disabled:opacity-50",children:"Cancel"})]}),d.jsx("div",{className:"flex-1 flex flex-col px-6 pb-8 overflow-y-auto custom-scrollbar",children:y?d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center animate-in fade-in zoom-in duration-1000",children:[d.jsxs("div",{className:"w-24 h-24 relative mb-12",children:[d.jsx("div",{className:"absolute inset-0 border-[3px] border-primary/5 rounded-full"}),d.jsx("div",{className:"absolute inset-0 border-[3px] border-primary border-t-transparent rounded-full animate-spin"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx(Kh,{size:32,className:"text-primary/20"})})]}),d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Generating Estimate"}),d.jsx("p",{className:"text-[16px] text-slate-400 font-medium max-w-[260px] mx-auto leading-relaxed",children:"Turning your voice recording into a professional quote..."})]}),d.jsxs("div",{className:"mt-16 w-full max-w-[240px]",children:[d.jsx("div",{className:"h-1.5 w-full bg-slate-50 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary transition-all duration-1000 ease-out",style:{width:A?"90%":k?"60%":b?"40%":"15%"}})}),d.jsxs("div",{className:"mt-4 flex justify-between items-center px-1",children:[d.jsx("span",{className:"text-[11px] font-bold text-primary uppercase tracking-widest",children:A?"Finalizing":k?"Extracting":"Analyzing"}),d.jsx("span",{className:"text-[11px] font-bold text-slate-300 uppercase tracking-widest",children:"Almost there"})]})]})]}):d.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500",children:[d.jsxs("div",{className:"flex flex-col items-center mb-10 pt-4",children:[d.jsx("div",{className:"relative",children:d.jsx("div",{className:`w-40 h-40 rounded-full flex items-center justify-center transition-all duration-700 ease-out ${l?"bg-primary/10 scale-110 shadow-[0_0_40px_rgba(var(--primary-rgb),0.2)]":"bg-slate-50"}`,children:l?d.jsx("div",{className:"flex gap-1 items-center h-16",children:[...Array(16)].map((_e,ce)=>d.jsx("div",{className:"w-1 bg-primary rounded-full transition-all duration-75",ref:Le=>{Ue.current[ce]=Le},style:{height:"12%"}},ce))}):d.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-300 animate-pulse"})})}),d.jsxs("div",{className:"text-center mt-8",children:[d.jsx("h2",{className:`text-xl font-bold transition-colors duration-500 ${l?"text-primary":"text-slate-900"}`,children:l?"Listening...":"Ready to record"}),d.jsx("p",{className:"mt-2 text-[15px] text-slate-500 leading-relaxed max-w-[280px]",children:"Mention the address, client name, and job details."})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 mb-8",children:[d.jsx("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:l?"Detecting items...":"Required items:"}),C.map(_e=>{var ce;return d.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl border transition-all duration-500 ease-out ${_e.status==="complete"?"bg-primary/[0.03] border-primary/20 shadow-sm translate-x-1":_e.status==="detecting"?"bg-primary/[0.04] border-primary/10 shadow-sm translate-x-0":"bg-slate-50 border-transparent shadow-none translate-x-0"}`,children:[d.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center transition-all duration-700 transform ${_e.status==="complete"?"bg-primary text-white scale-110 rotate-0":_e.status==="detecting"?"bg-primary/10 text-primary scale-105 shadow-sm":"bg-white text-slate-300 scale-100 shadow-sm"}`,children:_e.status==="complete"?d.jsx(_u,{size:16,strokeWidth:3,className:"animate-in zoom-in duration-300"}):_e.status==="detecting"?d.jsx(_u,{size:16,strokeWidth:3,className:"opacity-80 animate-pulse"}):d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-current"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:`block text-[15px] font-semibold transition-colors duration-500 ${_e.status==="complete"?"text-primary":_e.status==="detecting"?"text-slate-900":"text-slate-600"}`,children:_e.label}),l&&_e.status==="waiting"&&Date.now()-$<900&&d.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[12px] text-slate-400",children:[d.jsxs("span",{className:"relative inline-flex h-2 w-2",children:[d.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-primary/30 animate-ping"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-primary/60"})]}),"Hearing you"]}),_e.id===3&&Array.isArray(S==null?void 0:S.scopeOfWork)&&S.scopeOfWork.length>0&&d.jsxs("div",{className:"mt-1 text-[12px] text-slate-500",children:[S.scopeOfWork.length," scope item",S.scopeOfWork.length===1?"":"s"," captured"]}),_e.id===4&&Array.isArray(S==null?void 0:S.materials)&&S.materials.length>0&&d.jsxs("div",{className:"mt-1 text-[12px] text-slate-500",children:[S.materials.length," material",S.materials.length===1?"":"s"," captured"]}),_e.id===1&&typeof(S==null?void 0:S.jobLocation)=="string"&&S.jobLocation.trim()&&d.jsx("div",{className:"mt-1 text-[12px] text-slate-500 truncate",children:S.jobLocation}),_e.id===2&&typeof(S==null?void 0:S.customerName)=="string"&&S.customerName.trim()&&d.jsx("div",{className:"mt-1 text-[12px] text-slate-500 truncate",children:S.customerName}),_e.id===5&&(typeof(S==null?void 0:S.timeline)=="string"||typeof(S==null?void 0:S.laborHours)=="number")&&d.jsx("div",{className:"mt-1 text-[12px] text-slate-500 truncate",children:typeof(S==null?void 0:S.timeline)=="string"&&S.timeline?S.timeline:typeof(S==null?void 0:S.laborHours)=="number"?`${S.laborHours} hours`:""}),_e.id===6&&Array.isArray(S==null?void 0:S.fees)&&S.fees.length>0&&d.jsx("div",{className:"mt-1 text-[12px] text-slate-500 truncate",children:String(((ce=S.fees[0])==null?void 0:ce.description)||"Additional fees")})]})]},_e.id)})]}),d.jsxs("div",{className:"mt-auto py-4",children:[l&&d.jsxs("div",{className:"flex flex-col items-center mb-6 animate-in fade-in slide-in-from-bottom-2",children:[d.jsx("div",{className:"text-3xl font-bold text-slate-900 tabular-nums mb-1",children:sn(f)}),d.jsx("div",{className:"text-[13px] font-bold text-slate-400 uppercase tracking-widest",children:"Recording"})]}),d.jsx("button",{onClick:l?pt:tt,className:`w-full h-18 rounded-3xl flex items-center justify-center gap-4 font-extrabold text-lg shadow-xl transition-all active:scale-95 active:shadow-inner ${l?"bg-white border-2 border-red-500 text-red-500":"bg-primary text-white"}`,children:l?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 rounded-[3px] bg-red-500 animate-pulse"}),"Finish Recording"]}):d.jsxs(d.Fragment,{children:[d.jsx(Kh,{size:22,strokeWidth:2.5}),"Start Recording"]})})]})]})})]})},eE=({status:e})=>{const t=()=>{switch(e){case"recorded":return"bg-blue-50 text-blue-600";case"transcribing":return"bg-amber-50 text-amber-600";case"transcribed":return"bg-indigo-50 text-indigo-600";case"extracting":return"bg-purple-50 text-purple-600";case"extracted":return"bg-green-50 text-green-600";case"complete":return"bg-slate-900 text-white";case"failed":return"bg-red-50 text-red-600";default:return"bg-slate-50 text-slate-600"}},n=()=>{switch(e){case"recorded":return"Recorded";case"transcribing":return"Transcribing";case"transcribed":return"Transcribed";case"extracting":return"Extracting";case"extracted":return"Ready";case"complete":return"Done";case"failed":return"Failed";default:return e}};return d.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[11px] font-black uppercase tracking-wider shadow-sm ${t()}`,children:[(e==="transcribing"||e==="extracting")&&d.jsx(sN,{size:10,className:"animate-spin",strokeWidth:3}),n()]})},tE=({onProfileClick:e,activeTab:t,onTabChange:n,onQuoteCreated:r})=>{const[i,s]=me.useState([]),[a,o]=me.useState(!0),[l,c]=me.useState(!1);me.useEffect(()=>{f();const y=Ee.channel("voice_quotes_changes").on("postgres_changes",{event:"*",schema:"public",table:"voice_quotes"},()=>{f()}).subscribe();return()=>{Ee.removeChannel(y)}},[]);const f=async()=>{try{const{data:y,error:p}=await Ee.from("voice_quotes").select("*").order("created_at",{ascending:!1});if(p)throw p;s(y||[])}catch(y){console.error("[VoiceQuotesList] Error loading voice quotes:",y)}finally{o(!1)}},g=y=>{const p=new Date(y),_=new Date().getTime()-p.getTime(),A=Math.floor(_/6e4),x=Math.floor(_/36e5);return A<1?"Just now":A<60?`${A}m ago`:x<24?`${x}h ago`:p.toLocaleDateString("en-AU",{day:"numeric",month:"short"})};return d.jsxs(d.Fragment,{children:[d.jsxs(hr,{activeTab:t,onTabChange:n,className:"bg-[#FAFAFA] pb-32",fab:d.jsx(jf,{onClick:()=>c(!0)}),children:[d.jsx(Tr,{title:"VOICE QUOTES",right:e&&d.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center text-slate-900 hover:bg-slate-100 rounded-full transition-colors",children:d.jsx(To,{size:22})})}),d.jsx("div",{className:"px-6 space-y-4 pt-4",children:a?d.jsxs("div",{className:"flex flex-col items-center justify-center py-32 gap-4",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-slate-100 border-t-slate-900 rounded-full animate-spin"}),d.jsx("p",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Syncing"})]}):i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center",children:[d.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-slate-50 flex items-center justify-center mb-6 border border-slate-100",children:d.jsx(Kh,{size:40,className:"text-slate-200"})}),d.jsx("h3",{className:"text-[20px] font-black text-slate-900 mb-2 tracking-tight",children:"No voice recordings"}),d.jsx("p",{className:"text-[15px] text-slate-400 max-w-[220px] font-medium leading-relaxed",children:"Your dictated quotes will appear here for review."})]}):i.map(y=>{var p,k,_,A,x;return d.jsxs("div",{className:"bg-white rounded-[28px] p-6 shadow-sm border border-slate-100/50 active:scale-[0.98] transition-all flex flex-col gap-5",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[d.jsx("h3",{className:"font-black text-[17px] text-slate-900 mb-1 tracking-tight leading-tight truncate",children:((p=y.quote_data)==null?void 0:p.jobTitle)||"Voice Recording"}),d.jsx("p",{className:"text-[14px] text-slate-500 font-bold",children:((k=y.quote_data)==null?void 0:k.customerName)||"Processing customer..."})]}),d.jsx(eE,{status:y.status})]}),y.status==="extracted"&&d.jsx("div",{className:"bg-slate-50 rounded-[20px] p-4 flex flex-col gap-2 border border-slate-100/50",children:d.jsxs("div",{className:"flex items-center gap-4 text-[13px] font-black text-slate-400 uppercase tracking-wider",children:[d.jsxs("span",{children:[((A=(_=y.quote_data)==null?void 0:_.materials)==null?void 0:A.length)||0," Materials"]}),d.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),d.jsxs("span",{children:[((x=y.quote_data)==null?void 0:x.laborHours)||0,"h Labor"]})]})}),y.status==="failed"&&d.jsx("div",{className:"bg-red-50 border border-red-100 rounded-[20px] p-4",children:d.jsx("p",{className:"text-[13px] text-red-600 font-bold leading-relaxed text-center",children:"Processing failed. Please try recording again."})}),d.jsxs("div",{className:"flex items-center justify-between pt-2",children:[d.jsx("span",{className:"text-[12px] font-bold text-slate-300 uppercase tracking-widest",children:g(y.created_at)}),y.status==="extracted"&&d.jsxs("button",{className:"flex items-center gap-2 text-[13px] font-black text-slate-900 uppercase tracking-widest group",children:["Review Draft",d.jsx(X3,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})]})]},y.id)})})]}),l&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/10 backdrop-blur-sm flex justify-center animate-in fade-in duration-300",children:d.jsx("div",{className:"w-full max-w-[390px] h-[100dvh] bg-white shadow-2xl animate-in slide-in-from-bottom-8 duration-500",children:d.jsx(Db,{onBack:()=>{c(!1),f()},onQuoteCreated:y=>{console.log("[VoiceQuotesList] Quote created, closing recorder and navigating:",y),c(!1),r&&r(y)}})})})]})};function nE(e){const t=e.match(/^\/(?:q|quote)\/([A-Z0-9]+)$/i),n=e.match(/^\/(?:i|invoice)\/([A-Z0-9]+)$/i);return t?{type:"quote",shortCode:t[1].toUpperCase()}:n?{type:"invoice",shortCode:n[1].toUpperCase()}:null}yt.SENT;const rE=()=>{const[e,t]=me.useState({currentScreen:"Login",selectedEstimateId:null,selectedInvoiceId:null,selectedCustomerId:null,estimates:[],invoices:[],customers:[],user:null,isAuthenticated:!1,sendingType:"estimate",activeTab:"estimates",editReturnScreen:"EstimatePreview",loading:!0}),n=T=>{var M,I,S,z,j,R,$,J;return{id:T.id,jobTitle:T.title||"Untitled Job",clientName:((M=T.customer)==null?void 0:M.name)||"No Customer",clientAddress:T.site_address||"",clientEmail:((I=T.customer)==null?void 0:I.email)||"",clientPhone:((S=T.customer)==null?void 0:S.phone)||"",timeline:"2-3 days",scopeOfWork:Array.isArray(T.scope_of_work)&&T.scope_of_work.length>0?T.scope_of_work:T.description?[T.description]:[],materials:((z=T.line_items)==null?void 0:z.filter(X=>X.item_type==="materials").map(X=>({id:X.id,name:X.description,quantity:X.quantity,unit:X.unit,rate:X.unit_price_cents/100,catalogItemId:X.catalog_item_id??null,needsReview:!!X.is_needs_review,pricingNotes:X.notes??null,pricingSource:X.catalog_item_id?"catalog":typeof X.notes=="string"&&X.notes.toLowerCase().startsWith("ai estimated")?"ai":typeof X.notes=="string"&&X.notes.toLowerCase().startsWith("default price")?"fallback":void 0})))||[],labour:{hours:((j=T.line_items)==null?void 0:j.filter(X=>X.item_type==="labour").reduce((X,le)=>X+le.quantity,0))||0,rate:(($=(R=T.line_items)==null?void 0:R.find(X=>X.item_type==="labour"))==null?void 0:$.unit_price_cents)/100||0},additionalFees:((J=T.line_items)==null?void 0:J.filter(X=>X.item_type==="fee").map(X=>({id:X.id,description:X.description,amount:(typeof X.line_total_cents=="number"?X.line_total_cents:(X.unit_price_cents||0)*(X.quantity||1))/100})))||[],status:T.status==="sent"?yt.SENT:T.status==="accepted"||T.status==="approved"?yt.APPROVED:T.status==="paid"?yt.PAID:yt.DRAFT,date:new Date(T.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short"}),gstRate:T.default_tax_rate||.1}},r=async T=>{try{console.log("[App] Loading quotes from database for user:",T);const{data:{session:M}}=await Ee.auth.getSession();if(!M){console.warn("[App] No active session, skipping quote load");return}const{data:I,error:S}=await Ee.from("quotes").select(`
          *,
          customer:customers!customer_id(*),
          line_items:quote_line_items(*)
        `).order("created_at",{ascending:!1});if(S){console.error("[App] Failed to load quotes:",S);return}if(console.log("[App] Loaded quotes:",(I==null?void 0:I.length)||0),!I||I.length===0){console.log("[App] No quotes found in database");return}const z=I.map(j=>n(j));console.log("[App] Converted quotes to estimates:",z.length),t(j=>({...j,estimates:z}))}catch(M){console.error("[App] Error loading quotes:",M)}},i=async T=>{try{const{data:{session:M}}=await Ee.auth.getSession();if(!M)return;const{data:I,error:S}=await Ee.from("quotes").select(`
          *,
          customer:customers!customer_id(*),
          line_items:quote_line_items(*)
        `).eq("id",T).maybeSingle();if(S){console.error("[App] Failed to load quote by id:",S);return}if(!I){console.warn("[App] Quote not found by id:",T);return}const z=n(I);t(j=>({...j,estimates:[z,...j.estimates.filter(R=>R.id!==z.id)]}))}catch(M){console.error("[App] Error loading quote by id:",M)}},s=async T=>{try{console.log("[App] Loading invoices from database for user:",T);const{data:{session:M}}=await Ee.auth.getSession();if(!M){console.warn("[App] No active session, skipping invoice load");return}const{data:I,error:S}=await Ee.from("invoices").select(`
          *,
          quote:quotes!source_quote_id(
            *,
            customer:customers!customer_id(*)
          ),
          line_items:invoice_line_items(*)
        `).order("created_at",{ascending:!1});if(S){console.error("[App] Failed to load invoices:",S);return}if(console.log("[App] Loaded invoices:",(I==null?void 0:I.length)||0),!I||I.length===0){console.log("[App] No invoices found in database"),t(j=>({...j,invoices:[]}));return}const z=I.map(j=>{var J,X,le,de,Z,se,ve,fe,P,q,G;const R=j.status;let $=R;if((R==="issued"||R==="sent")&&j.due_date){const Y=new Date(j.due_date),Q=new Date;Q.setHours(0,0,0,0),Y<Q&&($="overdue")}return{id:j.id,invoiceNumber:j.invoice_number||j.id.substring(0,8),jobTitle:((J=j.quote)==null?void 0:J.title)||"Invoice",clientName:((le=(X=j.quote)==null?void 0:X.customer)==null?void 0:le.name)||"Customer",clientAddress:"",clientEmail:((Z=(de=j.quote)==null?void 0:de.customer)==null?void 0:Z.email)||"",clientPhone:((ve=(se=j.quote)==null?void 0:se.customer)==null?void 0:ve.phone)||"",status:$,date:new Date(j.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short"}),dueDate:j.due_date?new Date(j.due_date).toLocaleDateString("en-AU",{day:"numeric",month:"short"}):void 0,materials:((fe=j.line_items)==null?void 0:fe.filter(Y=>Y.item_type==="material"||Y.item_type==="materials").map(Y=>({id:Y.id,name:Y.description,quantity:Y.quantity,unit:Y.unit||"item",rate:Y.unit_price_cents/100})))||[],labour:{hours:((P=j.line_items)==null?void 0:P.filter(Y=>Y.item_type==="labour").reduce((Y,Q)=>Y+Q.quantity,0))||0,rate:((G=(q=j.line_items)==null?void 0:q.find(Y=>Y.item_type==="labour"))==null?void 0:G.unit_price_cents)/100||0},gstRate:j.default_tax_rate||.1,quoteId:j.source_quote_id||void 0}});console.log("[App] Converted invoices:",z.length),t(j=>({...j,invoices:z}))}catch(M){console.error("[App] Error loading invoices:",M)}},a=async T=>{try{console.log("[App] Loading customers from database for user:",T);const{data:{session:M}}=await Ee.auth.getSession();if(!M){console.warn("[App] No active session, skipping customer load");return}const{data:I,error:S}=await Ee.from("customers").select("*").order("name",{ascending:!0});if(S){console.error("[App] Failed to load customers:",S);return}if(console.log("[App] Loaded customers:",(I==null?void 0:I.length)||0),!I||I.length===0){console.log("[App] No customers found in database"),t(j=>({...j,customers:[]}));return}const z=I.map(j=>({id:j.id,name:j.name||"",email:j.email||void 0,phone:j.phone||void 0,company_name:j.company_name||void 0,notes:j.notes||void 0,created_at:j.created_at,updated_at:j.updated_at}));console.log("[App] Converted customers:",z.length),t(j=>({...j,customers:z}))}catch(M){console.error("[App] Error loading customers:",M)}};me.useEffect(()=>{(async()=>{try{console.log("[App] Initializing session...");const{data:{session:I}}=await Ee.auth.getSession();if(I!=null&&I.user){console.log("[App] Session found for user:",I.user.id);const S={id:I.user.id,email:I.user.email||"",businessName:"Demo Business",tradeType:"Carpenter",phone:"0400 000 000"},z=r(I.user.id),j=s(I.user.id),R=a(I.user.id),$=new Promise(J=>setTimeout(J,5e3));await Promise.race([Promise.all([z,j,R]),$]),console.log("[App] Database load complete or timed out"),t(J=>({...J,user:S,isAuthenticated:!0,currentScreen:"EstimatesList",loading:!1}))}else console.log("[App] No session found"),t(S=>({...S,loading:!1}))}catch(I){console.error("[App] Error in initSession:",I),t(S=>({...S,loading:!1}))}})();const{data:{subscription:M}}=Ee.auth.onAuthStateChange(async(I,S)=>{if(S!=null&&S.user){console.log("[App] Auth state change - user logged in:",S.user.id);const z={id:S.user.id,email:S.user.email||"",businessName:"Demo Business",tradeType:"Carpenter",phone:"0400 000 000"},j=r(S.user.id),R=s(S.user.id),$=a(S.user.id),J=new Promise(X=>setTimeout(X,5e3));await Promise.race([Promise.all([j,R,$]),J]),t(X=>({...X,user:z,isAuthenticated:!0,currentScreen:X.currentScreen==="Login"||X.currentScreen==="Signup"?"EstimatesList":X.currentScreen}))}else console.log("[App] Auth state change - user logged out"),t({currentScreen:"Login",selectedEstimateId:null,selectedInvoiceId:null,selectedCustomerId:null,estimates:[],invoices:[],customers:[],user:null,isAuthenticated:!1,sendingType:"estimate",activeTab:"estimates",editReturnScreen:"EstimatePreview",loading:!1})});return()=>{M.unsubscribe()}},[]),me.useEffect(()=>{const T=async()=>{if(!e.isAuthenticated||!e.user)return;const I=window.location.pathname,S=nE(I);if(S){console.log("[App] Public route detected while logged in:",S);try{if(S.type==="quote"){const{data:z,error:j}=await Ee.from("quotes").select("id").eq("short_code",S.shortCode).maybeSingle();if(j){console.error("[App] Failed to lookup quote by short code:",j),alert("Failed to load quote. Please try again.");return}if(!z){console.error("[App] Quote not found with short code:",S.shortCode),alert("Quote not found."),t(R=>({...R,currentScreen:"EstimatesList"})),window.history.replaceState({},"","/");return}console.log("[App] Found quote:",z.id),await r(e.user.id),t(R=>({...R,selectedEstimateId:z.id,currentScreen:"JobCard"})),window.history.replaceState({},"","/")}else if(S.type==="invoice"){const{data:z,error:j}=await Ee.from("invoices").select("id, source_quote_id").eq("short_code",S.shortCode).maybeSingle();if(j){console.error("[App] Failed to lookup invoice by short code:",j),alert("Failed to load invoice. Please try again.");return}if(!z){console.error("[App] Invoice not found with short code:",S.shortCode),alert("Invoice not found."),t(R=>({...R,currentScreen:"EstimatesList",activeTab:"invoices"})),window.history.replaceState({},"","/");return}console.log("[App] Found invoice:",z.id),await Promise.all([r(e.user.id),s(e.user.id)]),z.source_quote_id?t(R=>({...R,selectedEstimateId:z.source_quote_id,currentScreen:"InvoicePreview"})):t(R=>({...R,selectedInvoiceId:z.id,currentScreen:"InvoicePreview"})),window.history.replaceState({},"","/")}}catch(z){console.error("[App] Error handling public route:",z),alert("An error occurred. Please try again.")}}};T();const M=()=>{console.log("[App] Browser navigation detected"),T()};return window.addEventListener("popstate",M),()=>{window.removeEventListener("popstate",M)}},[e.isAuthenticated,e.user]);const o=T=>t(M=>({...M,currentScreen:T})),l=(T,M)=>{const I={id:T,email:M,businessName:"Demo Business",tradeType:"Carpenter",phone:"0400 000 000"};t(S=>({...S,user:I,isAuthenticated:!0,currentScreen:"EstimatesList"}))},c=(T,M)=>{t(I=>({...I,user:{id:T,email:M,businessName:"",tradeType:"",phone:""},currentScreen:"Onboarding"}))},f=async()=>{t(M=>({...M,isAuthenticated:!0,currentScreen:"EstimatesList"}));const{data:{user:T}}=await Ee.auth.getUser();T&&await r(T.id)},g=async()=>{await Ee.auth.signOut(),t({currentScreen:"Login",selectedEstimateId:null,selectedInvoiceId:null,selectedCustomerId:null,estimates:[],invoices:[],customers:[],user:null,isAuthenticated:!1,sendingType:"estimate",activeTab:"estimates",editReturnScreen:"EstimatePreview",loading:!1})},y=T=>{t(M=>({...M,selectedEstimateId:T,currentScreen:"EstimatePreview"}))},p=async T=>{var I,S,z,j,R,$,J,X,le;const M=e.selectedEstimateId;if(M){t(de=>({...de,estimates:de.estimates.map(Z=>Z.id===M?{...Z,status:T}:Z)}));try{let de=T.toLowerCase();de==="approved"&&(de="accepted");const{data:Z,error:se}=await Ee.from("quotes").select("customer_id, status").eq("id",M).maybeSingle();if(se){console.error("[App] Failed to fetch quote:",se),alert(`Failed to fetch quote: ${se.message}`),(I=e.user)!=null&&I.id&&await r(e.user.id);return}if(!Z){console.error("[App] Quote not found"),alert("Quote not found. Please try again."),(S=e.user)!=null&&S.id&&await r(e.user.id);return}const ve=Z.status,{data:fe,error:P}=await Ee.from("customers").select("email, name").eq("id",Z.customer_id).maybeSingle();if(P&&console.error("[App] Failed to fetch customer:",P),de==="accepted"&&ve==="draft"){console.log("[App] Quote is in draft status, transitioning to sent first");const{error:Y}=await Ee.from("quotes").update({status:"sent",sent_at:new Date().toISOString()}).eq("id",M);if(Y){console.error("[App] Failed to mark quote as sent:",Y),alert(`Failed to prepare quote: ${Y.message}`),(z=e.user)!=null&&z.id&&await r(e.user.id);return}}const q={status:de};if(de==="accepted"){const Y=(j=fe==null?void 0:fe.email)==null?void 0:j.trim(),Q=(R=fe==null?void 0:fe.name)==null?void 0:R.trim();q.accepted_by_email=Y||"customer@approved.local",q.accepted_by_name=Q||"Customer",console.log("[App] Accepting quote with:",{email:q.accepted_by_email,name:q.accepted_by_name})}const{error:G}=await Ee.from("quotes").update(q).eq("id",M);if(G){console.error("[App] Failed to update quote status:",G),alert(`Failed to update status: ${G.message}`),($=e.user)!=null&&$.id&&await r(e.user.id);return}if(console.log("[App] Quote status updated:",T),de==="accepted")try{console.log("[App] Creating invoice for quote:",M);const{data:Y,error:Q}=await Ee.rpc("create_invoice_from_accepted_quote",{p_quote_id:M});if(Q){console.error("[App] Failed to create invoice:",Q),console.error("[App] Invoice error details:",{message:Q.message,details:Q.details,hint:Q.hint,code:Q.code});const ae=Q.message||"Unknown error";alert(`Quote approved successfully!

However, invoice creation encountered an issue:
${ae}

The invoice can be created later from the job card.`),(J=e.user)!=null&&J.id&&await r(e.user.id),t(te=>({...te,currentScreen:"JobCard"}));return}else{console.log("[App] Invoice created successfully:",Y),t(ae=>({...ae,currentScreen:"InvoicePreview"}));return}}catch(Y){console.error("[App] Exception creating invoice:",Y);const Q=Y instanceof Error?Y.message:"Unknown error";alert(`Quote approved successfully!

However, invoice creation encountered an issue:
${Q}

The invoice can be created later from the job card.`),(X=e.user)!=null&&X.id&&await r(e.user.id),t(ae=>({...ae,currentScreen:"JobCard"}));return}}catch(de){console.error("[App] Error updating status:",de),alert("Failed to update status. Please try again."),(le=e.user)!=null&&le.id&&await r(e.user.id);return}t(de=>({...de,currentScreen:T===yt.APPROVED?"JobCard":de.currentScreen}))}},k=async()=>{var M,I;const T=e.selectedEstimateId;if(T)try{console.log("[App] Converting draft quote directly to invoice:",T);const{data:S,error:z}=await Ee.from("quotes").select(`
          id,
          customer_id,
          status,
          title,
          description,
          subtotal_cents,
          tax_total_cents,
          grand_total_cents,
          currency,
          default_tax_rate,
          quote_line_items (*)
        `).eq("id",T).maybeSingle();if(z||!S){console.error("[App] Failed to fetch quote:",z),alert(`Failed to load quote: ${(z==null?void 0:z.message)||"Not found"}`);return}const{data:j}=await Ee.from("customers").select("email, name").eq("id",S.customer_id).maybeSingle();if(S.status==="draft"){const{error:le}=await Ee.from("quotes").update({status:"sent",sent_at:new Date().toISOString()}).eq("id",T);if(le){console.error("[App] Failed to mark as sent:",le),alert(`Failed to prepare quote: ${le.message}`);return}}const R={quote_id:S.id,title:S.title,description:S.description,subtotal_cents:S.subtotal_cents,tax_cents:S.tax_total_cents,total_cents:S.grand_total_cents,currency:S.currency,default_tax_rate:S.default_tax_rate,line_items:S.quote_line_items,accepted_at:new Date().toISOString()};console.log("[App] Created acceptance snapshot:",{snapshot:R});const{error:$}=await Ee.from("quotes").update({status:"accepted",accepted_at:new Date().toISOString(),accepted_by_email:(j==null?void 0:j.email)||"internal@approved.local",accepted_by_name:(j==null?void 0:j.name)||"Internal Approval",accepted_quote_snapshot:R}).eq("id",T);if($){console.error("[App] Failed to accept quote:",$),alert(`Failed to approve quote: ${$.message}`);return}console.log("[App] Quote accepted with snapshot, creating invoice...");const{data:J,error:X}=await Ee.rpc("create_invoice_from_accepted_quote",{p_quote_id:T});if(X){console.error("[App] Failed to create invoice:",X),alert(`Quote approved but invoice creation failed:
${X.message}

You can create the invoice later from the job card.`),(M=e.user)!=null&&M.id&&await r(e.user.id),t(le=>({...le,currentScreen:"JobCard"}));return}console.log("[App] Invoice created successfully:",J),(I=e.user)!=null&&I.id&&(await s(e.user.id),await r(e.user.id)),t(le=>({...le,currentScreen:"SendEstimate",sendingType:"invoice",selectedInvoiceId:J}))}catch(S){console.error("[App] Exception in handleConvertToInvoiceDirectly:",S);const z=S instanceof Error?S.message:"Unknown error";alert(`Failed to create invoice: ${z}`)}},_=async T=>{if(confirm("Are you sure you want to delete this estimate? This cannot be undone."))try{console.log("[App] Deleting quote:",T);const{error:M}=await Ee.from("quote_line_items").delete().eq("quote_id",T);if(M){console.error("[App] Failed to delete line items:",M),alert("Failed to delete estimate. Please try again.");return}const{error:I}=await Ee.from("quotes").delete().eq("id",T);if(I){console.error("[App] Failed to delete quote:",I),alert("Failed to delete estimate. Please try again.");return}console.log("[App] Quote deleted successfully"),t(S=>({...S,estimates:S.estimates.filter(z=>z.id!==T),selectedEstimateId:null,currentScreen:"EstimatesList"}))}catch(M){console.error("[App] Error deleting quote:",M),alert("Failed to delete estimate. Please try again.")}},A=(T,M="EstimatePreview")=>{t(I=>({...I,estimates:I.estimates.map(S=>S.id===T.id?T:S),currentScreen:M}))},x=()=>e.estimates.find(T=>T.id===e.selectedEstimateId),b=()=>e.customers.find(T=>T.id===e.selectedCustomerId),N=T=>{t(M=>({...M,selectedCustomerId:T,currentScreen:"CustomerProfile"}))},C=async T=>{try{console.log("[App] Deleting customer:",T);const{error:M}=await Ee.from("customers").delete().eq("id",T);if(M){console.error("[App] Failed to delete customer:",M),alert("Failed to delete customer. Please try again.");return}console.log("[App] Customer deleted successfully"),t(I=>({...I,customers:I.customers.filter(S=>S.id!==T),selectedCustomerId:null,currentScreen:"EstimatesList",activeTab:"customers"}))}catch(M){console.error("[App] Error deleting customer:",M),alert("Failed to delete customer. Please try again.")}},K=()=>{const T=x();return d.jsx("div",{className:"animate-in fade-in duration-300 h-full w-full",children:(()=>{switch(e.currentScreen){case"Login":return d.jsx(CS,{onLogin:l,onSignupClick:()=>o("Signup")});case"Signup":return d.jsx(PS,{onSignup:c,onBack:()=>o("Login")});case"Onboarding":return d.jsx(OS,{onComplete:f});case"Settings":return d.jsx(YA,{onBack:()=>o("EstimatesList"),onNavigate:o,onLogout:g});case"MaterialsCatalog":return d.jsx(XA,{onBack:()=>o("Settings")});case"VoiceRecorder":return d.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/10 backdrop-blur-sm flex justify-center animate-in fade-in duration-200",children:d.jsx("div",{className:"w-full max-w-[390px] h-[100dvh] bg-white shadow-2xl animate-in slide-in-from-bottom-6 duration-300",children:d.jsx(Db,{onBack:()=>o("EstimatesList"),onQuoteCreated:async I=>{var S;console.log("[App] Quote created from voice, navigating to edit:",I),await i(I),t(z=>({...z,selectedEstimateId:I,currentScreen:"EditEstimate",editReturnScreen:z.editReturnScreen})),(S=e.user)!=null&&S.id&&r(e.user.id)}})})});case"VoiceQuotesList":return d.jsx(tE,{onProfileClick:()=>o("Settings"),activeTab:e.activeTab,onTabChange:I=>t(S=>({...S,activeTab:I,currentScreen:"EstimatesList"})),onQuoteCreated:async I=>{var S;console.log("[App] Quote created from voice, navigating to edit:",I),await i(I),t(z=>({...z,selectedEstimateId:I,currentScreen:"EditEstimate",editReturnScreen:z.editReturnScreen})),(S=e.user)!=null&&S.id&&r(e.user.id)}});case"PublicQuoteView":return T&&e.user?d.jsx(Ob,{estimate:T,businessName:e.user.businessName,onApprove:()=>{p(yt.APPROVED),alert("Quote approved!")}}):null;case"PublicInvoiceView":return T&&e.user?d.jsx(Fb,{estimate:T,businessName:e.user.businessName,businessPhone:e.user.phone,invoiceNumber:T.id.substring(0,6).toUpperCase(),onPaymentClick:()=>alert("Payment gateway would open here")}):null;case"EstimatesList":return e.activeTab==="estimates"?d.jsx(DS,{estimates:e.estimates,onNewEstimate:()=>o("VoiceRecorder"),onSelectEstimate:y,activeTab:e.activeTab,onTabChange:I=>t(S=>({...S,activeTab:I})),onProfileClick:()=>o("Settings"),onQuickRecord:()=>o("VoiceRecorder")}):e.activeTab==="invoices"?d.jsx(US,{invoices:e.invoices,onNewEstimate:()=>o("VoiceRecorder"),onQuickRecord:()=>o("VoiceRecorder"),onSelectInvoice:I=>t(S=>({...S,selectedInvoiceId:I,currentScreen:"InvoicePreview",activeTab:"invoices"})),activeTab:e.activeTab,onTabChange:I=>t(S=>({...S,activeTab:I})),onProfileClick:()=>o("Settings")}):d.jsx(BS,{customers:e.customers,onNewEstimate:()=>o("VoiceRecorder"),onSelectCustomer:N,activeTab:e.activeTab,onTabChange:I=>t(S=>({...S,activeTab:I})),onProfileClick:()=>o("Settings")});case"CustomerProfile":const M=b();return M?d.jsx(zS,{customer:M,quotes:e.estimates,invoices:e.invoices,onBack:()=>t(I=>({...I,currentScreen:"EstimatesList",activeTab:"customers"})),onNewQuote:()=>o("VoiceRecorder"),onSelectQuote:I=>t(S=>({...S,selectedEstimateId:I,currentScreen:"EstimatePreview"})),onSelectInvoice:I=>t(S=>({...S,selectedInvoiceId:I,currentScreen:"InvoicePreview"})),onDeleteCustomer:C}):null;case"EditEstimate":return T?d.jsx(qS,{estimate:T,returnScreen:e.editReturnScreen,onBack:()=>o(e.editReturnScreen||"EstimatesList"),onSave:I=>A(I,e.editReturnScreen),onSend:I=>{A(I,"EstimatePreview"),t(S=>({...S,currentScreen:"SendEstimate",sendingType:"estimate"}))}}):d.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-surface",children:d.jsx("div",{className:"text-center",children:d.jsx("p",{className:"text-[14px] text-secondary",children:"Loading quote..."})})});case"EstimatePreview":return T?d.jsx(Rb,{estimate:T,userProfile:e.user||void 0,onBack:()=>o("EstimatesList"),onEdit:()=>t(I=>({...I,currentScreen:"EditEstimate",editReturnScreen:"EstimatePreview"})),onSend:()=>t(I=>({...I,currentScreen:"SendEstimate",sendingType:"estimate"})),onStatusChange:p,onViewInvoice:()=>o("InvoicePreview"),onDelete:()=>_(T.id),onConvertToInvoice:k}):null;case"JobCard":return T?d.jsx(VA,{estimate:T,onBack:()=>o("EstimatesList"),onViewEstimate:()=>o("EstimatePreview"),onViewInvoice:()=>o("InvoicePreview"),onSendInvoice:()=>t(I=>({...I,currentScreen:"SendEstimate",sendingType:"invoice"})),onStatusChange:p}):null;case"SendEstimate":return d.jsx(GA,{onBack:()=>o(e.sendingType==="invoice"?"InvoicePreview":"EstimatePreview"),type:e.sendingType,onTabChange:I=>t(S=>({...S,activeTab:I,currentScreen:"EstimatesList"})),estimateId:e.sendingType==="invoice"?e.selectedInvoiceId||void 0:e.selectedEstimateId||void 0,onSent:async()=>{var S;const I=e.sendingType==="invoice"?yt.PAID:yt.SENT;if(e.selectedEstimateId){t(R=>({...R,estimates:R.estimates.map($=>$.id===e.selectedEstimateId?{...$,status:I}:$),currentScreen:"JobCard"}));const z=I===yt.SENT?"sent":"paid",{error:j}=await Ee.from("quotes").update({status:z,sent_at:new Date().toISOString()}).eq("id",e.selectedEstimateId);if(j){console.error("[App] Failed to update quote status:",j),alert("Failed to mark as sent. Please try again."),(S=e.user)!=null&&S.id&&await r(e.user.id);return}}else t(z=>({...z,currentScreen:"JobCard"}))}});case"InvoicePreview":return T?d.jsx(KA,{estimate:T,userProfile:e.user||void 0,onBack:()=>o("EstimatesList"),onEdit:()=>t(I=>({...I,currentScreen:"EditEstimate",editReturnScreen:"InvoicePreview"})),onSend:()=>t(I=>({...I,currentScreen:"SendEstimate",sendingType:"invoice"})),onDelete:()=>_(T.id)}):null;default:return d.jsx("div",{className:"p-10 text-center",children:"Screen not implemented yet"})}})()},e.currentScreen)};return e.loading?d.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-surface",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("h1",{className:"text-[24px] font-bold text-primary flex items-center justify-center gap-1",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2 shadow-[0_0_12px_rgba(212,255,0,0.5)]"})]}),d.jsx("p",{className:"text-[14px] text-secondary mt-2",children:"Loading..."})]})}):d.jsx(d.Fragment,{children:K()})},iE=()=>{const[e,t]=me.useState(!0),[n,r]=me.useState(null),[i,s]=me.useState(null),[a,o]=me.useState(null),[l,c]=me.useState(""),[f,g]=me.useState("quote");me.useEffect(()=>{const _=window.location.pathname,A=_.match(/^\/(?:quote|q)\/([a-zA-Z0-9-]+)$/i),x=_.match(/^\/(?:invoice|i)\/([a-zA-Z0-9-]+)$/i);A?(g("quote"),y(A[1])):x?(g("invoice"),p(x[1])):(r("Invalid URL"),t(!1))},[]);const y=async _=>{try{const{data:A,error:x}=await Ee.rpc("get_public_quote",{identifier:_});if(x){console.error("[PublicRouter] Error loading quote:",x),console.error("[PublicRouter] Error details:",{code:x.code,message:x.message,details:x.details,hint:x.hint,identifier:_}),r(`Quote not found: ${x.message||"Unknown error"}`),t(!1);return}if(!A){r("Quote not found"),t(!1);return}const b=A,N=b.line_items||[],C=N.filter(M=>M.item_type==="materials"||M.item_type==="material").map(M=>({id:M.id,name:M.description,quantity:M.quantity,unit:M.unit||"unit",rate:M.unit_price/100})),K=N.find(M=>M.item_type==="labour"),T={id:b.id,jobTitle:b.scope_of_work||"Quote",clientName:b.customer_name||"",clientAddress:"",timeline:"2-3 days",scopeOfWork:b.scope_of_work?[b.scope_of_work]:[],materials:C,labour:{hours:(K==null?void 0:K.quantity)||0,rate:((K==null?void 0:K.unit_price)||0)/100},status:b.status==="accepted"?yt.APPROVED:yt.SENT,date:new Date(b.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short"}),gstRate:.1};s(T),o({name:b.organization.business_name,phone:b.organization.phone,email:b.organization.email,abn:b.organization.business_number,website:b.organization.website,businessAddress:[b.organization.address_line1,b.organization.address_line2,b.organization.city,b.organization.state,b.organization.postal_code,b.organization.country].filter(Boolean).join(", ")}),t(!1)}catch(A){console.error("[PublicRouter] Exception loading quote:",A),r("Failed to load quote"),t(!1)}},p=async _=>{try{const{data:A,error:x}=await Ee.rpc("get_public_invoice",{identifier:_});if(x){console.error("[PublicRouter] Error loading invoice:",x),r("Invoice not found"),t(!1);return}if(!A){r("Invoice not found"),t(!1);return}const b=A,N=b.line_items||[],C=N.filter(M=>M.item_type==="material"||M.item_type==="materials").map(M=>({id:M.id,name:M.description,quantity:M.quantity,unit:"unit",rate:M.unit_price/100})),K=N.find(M=>M.item_type==="labour"),T={id:b.id,jobTitle:"Invoice",clientName:b.customer_name||"",clientAddress:"",timeline:"",scopeOfWork:[],materials:C,labour:{hours:(K==null?void 0:K.quantity)||0,rate:((K==null?void 0:K.unit_price)||0)/100},status:b.status==="paid"?yt.PAID:yt.APPROVED,date:new Date(b.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short"}),gstRate:.1};s(T),o({name:b.organization.business_name,phone:b.organization.phone,businessAddress:[b.organization.address_line1,b.organization.address_line2,b.organization.city,b.organization.state,b.organization.postal_code,b.organization.country].filter(Boolean).join(", "),email:b.organization.email,abn:b.organization.business_number,website:b.organization.website,bankName:b.organization.bank_name,accountName:b.organization.account_name,bsbRouting:b.organization.bsb,accountNumber:b.organization.account_number,paymentInstructions:b.organization.payment_instructions}),c(b.invoice_number),t(!1)}catch(A){console.error("[PublicRouter] Exception loading invoice:",A),r("Failed to load invoice"),t(!1)}};if(e)return d.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-surface",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("h1",{className:"text-[24px] font-bold text-primary flex items-center justify-center gap-1",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2 shadow-[0_0_12px_rgba(212,255,0,0.5)]"})]}),d.jsx("p",{className:"text-[14px] text-secondary mt-2",children:"Loading..."})]})});if(n||!i||!a)return d.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-surface",children:d.jsxs("div",{className:"text-center p-6",children:[d.jsxs("h1",{className:"text-[24px] font-bold text-primary mb-4 flex items-center justify-center gap-1",children:[d.jsx("span",{children:"SMASH"}),d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2 shadow-[0_0_12px_rgba(212,255,0,0.5)]"})]}),d.jsx("p",{className:"text-[16px] text-secondary",children:n||"Not found"})]})});if(f==="invoice")return d.jsx(Fb,{estimate:i,businessName:a.name,businessPhone:a.phone,invoiceNumber:l,businessInfo:{businessAddress:a.businessAddress,email:a.email,abn:a.abn,website:a.website,logoUrl:a.logoUrl,bankName:a.bankName,accountName:a.accountName,bsbRouting:a.bsbRouting,accountNumber:a.accountNumber,paymentTerms:a.paymentTerms,paymentInstructions:a.paymentInstructions},onPaymentClick:()=>alert("Payment gateway would open here")});const k=async()=>{if(i)try{const A=window.location.pathname.match(/^\/(?:quote|q)\/([a-zA-Z0-9-]+)$/i);if(!A){alert("Invalid quote URL");return}const x=A[1],{data:b,error:N}=await Ee.rpc("get_public_quote",{identifier:x});if(N||!b){console.error("[PublicRouter] Failed to get quote for approval:",N),alert("Failed to load quote details. Please try again.");return}const C=b.id,K=b.line_items||[],T={quote_id:C,quote_number:b.quote_number,customer_name:b.customer_name,line_items:K,totals:{subtotal:b.subtotal,tax:b.tax,total:b.total},accepted_at:new Date().toISOString()},{error:M}=await Ee.from("quotes").update({status:"accepted",accepted_at:new Date().toISOString(),accepted_by_name:b.customer_name||"Customer",accepted_by_email:b.customer_email,accepted_quote_snapshot:T}).eq("id",C);if(M){console.error("[PublicRouter] Failed to approve quote:",M),alert("Failed to approve quote. Please try again.");return}const{data:I,error:S}=await Ee.rpc("create_invoice_from_accepted_quote",{p_quote_id:C});if(S){console.error("[PublicRouter] Failed to create invoice:",S),console.error("[PublicRouter] Full error object:",JSON.stringify(S,null,2));const z=S.message||S.hint||S.details||"Unknown error";alert(`Quote approved successfully!

However, invoice creation encountered an issue:
${z}

The invoice can be created later from the job card.`);return}console.log("[PublicRouter] Quote approved and invoice created:",I),alert("Quote approved successfully! An invoice has been created and the business owner will be in touch shortly.")}catch(_){console.error("[PublicRouter] Exception during approval:",_),alert("An unexpected error occurred. Please try again.")}};return d.jsx(Ob,{estimate:i,businessName:a.name,onApprove:k})};class sE extends me.Component{constructor(t){super(t),this.handleReset=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-[#f1f5f9] p-6",children:d.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("span",{className:"text-3xl",children:""})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page."}),this.state.error&&d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg text-left",children:d.jsx("p",{className:"text-xs text-gray-500 font-mono break-all",children:this.state.error.message})}),d.jsx(Et,{onClick:this.handleReset,className:"w-full",children:"Go to Home"})]})}):this.props.children}}const aE=()=>{const e=window.location.pathname;return/^\/(quote|q|invoice|i)\/[a-zA-Z0-9-]+$/i.test(e)};Kx(document.getElementById("root")).render(d.jsx(me.StrictMode,{children:d.jsx(sE,{children:aE()?d.jsx(iE,{}):d.jsx(rE,{})})}));export{Zt as _,ki as c,lE as g};
